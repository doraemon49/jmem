(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{IoBy:function(t,e,i){"use strict";var n=i("EVdn"),s=i("Ll3W"),o=window.nhn=window.nhn||{},a=i("WUO0").isMobileVersion,h="active";a&&(h="opened");var l=function(){n("#ac_layer").hasClass(h)&&n("#ac_layer").removeClass(h)};o.AutoCompleteDic=s.$Class({$init:function(t,e,i){this.bEnable="false"!=n.cookie("ac_enable"),this.elArrow=s.$$.getSingle(".btn_autocomplete",this.elLayer),void 0!==this.elArrow&&null!==this.elArrow&&s.$Fn((function(t){t.stop(),this.fireEvent("clickArrow")}),this).attach(this.elArrow,"click"),s.$Fn(this._onKeyDown,this).attach(this.elInput,"keydown"),s.$Agent().navigator().ie?s.$Fn(this._onMouseDown,this).attach(this.elLayer,"mousedown"):s.$Fn(this._onBlur,this).attach(window,"blur"),n(window).on("hashchange",l)},destroy:function(){this.oWatchInput.detachAll(),this.oWatchInput.deactivate(),this.oWatchInput=null},_onMouseOver:function(t){t.stopDefault();"li"==s.$Element(t.element).tag&&(this.selected=s.$Element(t.element),this.fireEvent("select",{element:this.selected.$value()}))},_onClick:function(t){t.stopDefault();this.selected=s.$Element(t.element),this.fireEvent("submit",{text:this.selected.text(),item:this.selected})},_onKeyDown:function(t){var e=t.key();if(e.enter&&this.fireEvent("submit",{text:this.elInput.value}),this.isRunning()&&(e.down||e.up||9==e.keyCode))if(this.aResultList[0].childNodes.length){if(e.down||9==e.keyCode)if(this.selected){if(this.selected.$value().nextSibling)this.selected=this.selected.next();else{if("ul"!=this.selected.parent().next().tag)return;this.selected=this.selected.parent().next().first()}}else{if(!this.sQuery&&this.elInput.value&&(this.sQuery=this.elInput.value),!this.sQuery)return;this.selected=s.$Element(this.aResultList[0]).first().first()}else{if(!this.selected)return void this.fireEvent("keyup");if(this.selected.$value().previousSibling)this.selected=this.selected.prev();else{if(!this.selected.parent().prev())return this.selected.removeClass("focus"),this.selected=null,void this.oWatchInput.setInputValue(this.sQuery);this.selected=this.selected.parent().prev().last()}}if(t.stop(),this.selected){this.oWatchInput.stop();var i=s.$Element(this.selected._element).attr("data-item");i&&(i=i.replace(/\[.*?\]/g,"")),this.oWatchInput.setInputValue(i);var n=this.oWatchInput;setTimeout((function(){n.start(!0)}),200),this.fireEvent("select",{element:this.selected.$value()})}}else this.selected=null},_onBlur:function(t){"blur"==t.type&&t.currentElement==window&&l(),"blur"!=t.type||t.currentElement!=this.elInput||this._mdown||(this._hideTimer=setTimeout(l,100)),this._mdown=!1},_onMouseDown:function(t){this._mdown=!0,this._hideTimer&&clearTimeout(this._hideTimer)}}).extend(o.AutoComplete)},QPY6:function(t,e,i){i("vqop"),t.exports=window.jindo},RcM0:function(t,e,i){"use strict";i("Ll3W"),i("QPY6"),i("lNR/"),i("a1ZB"),i("IoBy"),i("uhru"),i("gOCG")},a1ZB:function(t,e,i){"use strict";var n=i("Ll3W"),s=window.nhn=window.nhn||{},o=i("WUO0"),a=o.isMobileVersion,h="div.autocomplete",l="active";a&&(h="ul._autocomplete",l="opened"),s.AutoComplete=n.$Class({sQuery:"",$init:function(t,e,i){var s=this;this.option({query_var:"{query}"}),this.option(i),this._htOption.query_var_regexp=new RegExp(this.option("query_var").replace(/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\])/g,"\\$1"),"g"),this.oResponse={},this._oResponseCache={},this.elInput=n.$(t),this.elLayer=n.$(e),this.aResultList=n.$$(h,this.elLayer),this.oWatchInput=new n.WatchInput(this.elInput,{interval:10,useTimerOnIE:!0}).attach({change:n.$Fn((function(t){s._stopRequest(),s.sQuery=t.text,s.fireEvent("input",{sInputValue:t.text})}),this).bind()}),a&&jQuery("#ac_input").bind("input propertychange",(function(t){s._stopRequest(),s.sQuery=jQuery(this).val(),s.fireEvent("input",{sInputValue:s.sQuery}),"false"==jQuery.cookie("ac_enable")&&s.fireEvent("openAC",{oResponse:s.oResponse})})),n.$Fn((function(t){jQuery("#ac_layer").hasClass(l)&&this.elInput.value?jQuery("#ac_layer").removeClass(l):this.elInput.value?s.request():this.fireEvent("showReviewWord")}),this).attach(this.elInput,"click"),n.$Fn((function(t){this.fireEvent("focus")}),this).attach(this.elInput,"focus"),n.$Element(document).delegate("mouseover","._auto_complete_list_item",n.$Fn(this._onMouseOver,this).bind()),n.$Fn(this._onMouseOver,this).attach(this.elLayer,"mouseover"),n.$Element(document).delegate("click","._auto_complete_list_item",n.$Fn(this._onClick,this).bind())},start:function(){this._bStatus=!0,this.fireEvent("start")},stop:function(){this.oResponse={},this._bStatus=!1,this.fireEvent("stop")},isRunning:function(){return this._bStatus||!1},setCache:function(t,e){this._oResponseCache[t.toString()]=null,this._oResponseCache[t.toString()]=e},getCache:function(t){return this._oResponseCache[t.toString()]||!1},request:function(t){t=t||this.elInput.value,t=encodeURIComponent(t.trim());var e=this._htOption,i=e.url+t,s=this;this.oResponse={},this.selected=null,this.oAjax=n.$Ajax(i,{type:e.request_type,method:e.request_method,onload:function(t){try{s.oResponse=o.convertAutoCompleteResult?o.convertAutoCompleteResult(t):t,s.fireEvent("load",{oResponse:s.oResponse})}catch(t){}}}).request()},_stopRequest:function(){try{this.oAjax.abort(),this.oAjax=null}catch(t){}}}).extend(n.Component)},gOCG:function(t,e,i){"use strict";var n=i("EVdn"),s=i("Ll3W"),o=window.nhn=window.nhn||{},a=i("WUO0"),h=function(){n("#ac_layer").hasClass("active")&&n("#ac_layer").removeClass("active")},l=function(){n("div.ly_my_keyword").hasClass("active")&&n("div.ly_my_keyword").removeClass("active")};o.AutoCompleteWithSpecialChars=s.$Class({_rxFra:/[^ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/,status:null,$init:function(t){this.option({elInput:null,elLayer:null,sRequestURL:"",nMaxLeftOfLayer:250,htSpecialChars:["á","é","í","ó","ú","ü","ñ"],itemCount:6,itemCountForWriter:3,showLayerForWriter:null,hiddenLayerForWriter:null}),this.option(t||{}),this.arrow=$$.getSingle("div.gbox_inner a.btn_arw"),this.arrow&&(this.arrow=$Element(this.arrow)),this._init()},destroy:function(){this._onInputFocusHandler.detach(this._elInput,"focus"),this._elInput=null,this._elLayer=null,this._oAutoCompleteDic.detachAll(),this._oAutoCompleteDic.destroy(),this._oAutoCompleteDic=null,this._oSpecialAlphabet=null,this._wfOnKeydownDocument.detach(document,"keydown")},_init:function(){if(!this._bInit){if(!this.option("elInput")||!this.option("elLayer"))throw new Exception("대상 엘리먼트가 지정되지 않았습니다.");this._elInput=this.option("elInput"),this._elLayer=this.option("elLayer"),this._initEvent(),this._oAutoCompleteDic=new o.AutoCompleteDic(this._elInput,this._elLayer,{url:this.option("sRequestURL"),request_type:"jsonp",request_method:"get"}),this.option("elInput")&&this.option("elLayer")&&this._onActivate(),this._oAutoCompleteDic.bEnable?this._oAutoCompleteDic.start():this._oAutoCompleteDic.stop(),this._oSpecialAlphabet=new o.AutoCompleteDic.SpecialAlphabet(this._elInput,{nMaxLeftOfLayer:this.option("nMaxLeftOfLayer"),htSpecialChars:this.option("htSpecialChars"),htSpecialCharNumberPerRow:this.option("htSpecialCharNumberPerRow"),elLayerBtn:this.option("elLayerSpecialCharBtn"),elLayer:this.option("elLayerSpecialChar"),elCheckbox:this.option("elCheckboxSpecialChar"),elAutoLayer:this._elLayer}),this._itemCount=this.option("itemCount"),this.showAuto=!1,this._bInit=!0}},_initEvent:function(){var t;this._htEventAutoCompleteDic={start:s.$Fn(this._onStartAutoComplete,this).bind(),stop:s.$Fn(this._onStopAutoComplete,this).bind(),input:s.$Fn(this._onInputAutoComplete,this).bind(),select:s.$Fn(this._onSelectAutoComplete,this).bind(),submit:s.$Fn(this._onSubmitAutoComplete,this).bind(),load:s.$Fn(this._onLoadAutoComplete,this).bind(),clickArrow:s.$Fn(this._onClickArrowAutoComplete,this).bind(),show:s.$Fn(this._onShowAutoComplete,this).bind(),hide:s.$Fn(this._onHideAutoComplete,this).bind(),showReviewWord:s.$Fn(this._onShowMyReviewedWord,this).bind()},this._wfOnKeydownDocument=s.$Fn(this._onKeydownDocument,this),t="data-event-hide-autocomplete-layer",n(document).attr(t)||n(document).on("click",(function(t){var e=n(t.target);n("#ac_layer").hasClass("active")&&e.closest("div.keyword_search").length<=0&&h(),n("div.ly_my_keyword").hasClass("active")&&!e.hasClass("_btn_see_more")&&!e.hasClass("_btn_del_keyword")&&e.closest("div.keyword_search").length<=0&&e.closest("#pcLyAddWordBook").length<=0&&l()})).attr(t,!0)},_onActivate:function(){this._oAutoCompleteDic.attach(this._htEventAutoCompleteDic),this._wfOnKeydownDocument.attach(document,"keydown"),this._onInputFocusHandler=s.$Fn((function(t){this._oAutoCompleteDic.isRunning()&&(this.status=!0)}),this),this._onInputFocusHandler.attach(this._elInput,"focus"),s.$Fn((function(t){this.status=!1}),this).attach(this._elInput,"blur"),this._oAutoCompleteDic.bEnable?(this._oAutoCompleteDic.start(),this._oAutoCompleteDic.elInput.value&&this._oAutoCompleteDic.oWatchInput.setCompareValue(this._oAutoCompleteDic.elInput.value)):this._oAutoCompleteDic.fireEvent("stop")},_makeHighlight:function(t,e){var i=t.match(e[0]);return i?(i=i[0],t=t.replace(e[0],'<em class="match_word">'+i+"</em>")):(i=t.match(e[1]))&&(i=i[0],t=t.replace(e[1],'<em class="match_word">'+i+"</em>")),t},_makeSubstring:function(t,e){return t.length>e?t.substring(0,e)+"...":t},_filter:function(t){return"null"==t?"":t},_getRealHTMLTag:function(t){for(var e=[],i=t.split(""),n=!1,s=0;s<i.length;s++)i[s].length>0&&this._rxFra.test(i[s])?(n||/^\s*$/.test(i[s])||(e.push('<span class="fra">'),n=!0),e.push(i[s])):(n&&e.push("</span>"),e.push(i[s]),n=!1),s==i.length-1&&n&&e.push("</span>");return e.join("")},_onStartAutoComplete:function(){},_onStopAutoComplete:function(){},_onInputAutoComplete:function(t){var e=this;t.sInputValue||(n("#ac_layer div.autocomplete").empty(),s.$Element(this._oAutoCompleteDic.elLayer).addClass("_no_result")),t.sInputValue&&""!=t.sInputValue?this._oAutoCompleteDic.bEnable?setTimeout((function(){e.status&&(e._oAutoCompleteDic.isRunning()?e._onRequestAc(t.sInputValue):e._onShowAutoComplete())}),10):l():this._onHideAutoComplete()},_onRequestAc:function(t){var e=this._oAutoCompleteDic.getCache(t);e?this._oAutoCompleteDic.fireEvent("load",{oResponse:e}):this._oAutoCompleteDic.request()},_onSelectAutoComplete:function(t){!this._oAutoCompleteDic.sQuery&&this._oAutoCompleteDic.elInput.value&&(this._oAutoCompleteDic.sQuery=this._oAutoCompleteDic.elInput.value),n("li._auto_complete_list_item").removeClass("focus"),s.$Element(t.element).addClass("focus")},_onSubmitAutoComplete:function(t){(t.item&&!t.item.hasClass("_reviewedWord")||!t.item)&&(t.item&&(t.item._element&&t.item._element.dataset&&t.item._element.dataset.item?this._oAutoCompleteDic.oWatchInput.setInputValue(t.item._element.dataset.item):this._oAutoCompleteDic.oWatchInput.setInputValue(t.item.first().$value().origKeyWord)),this.fireEvent("submit"))},_onLoadAutoComplete:function(t){var e=t.oResponse,i=e.json(),o="jakodict"==a.dictName?n("#ac_input").val().toLowerCase():i.query[0].toLowerCase();this.queryStr=o;var h=i.items;"jakodict"==a.dictName&&h&&h.length>0&&0==h[0].length&&h.splice(0,1);var l=[],r={a:"[a|à|â|æ|ā|á|ǎ|ă]",A:"[A|À|Â|Æ]",c:"[c|ç]",e:"[e|é|è|ë|ê|ē|ě|ĕ]",E:"[E|É|È|Ë|Ê]",i:"[i|î|ï|ī|í|ǐ|ĭ|ì]",o:"[o|ô|œ|ō|ó|ǒ|ŏ|ò]",oe:"œ",OE:"Œ",ae:"æ",AE:"Æ",O:"[Ô|Œ]",u:"[u|ù|û|ü|ū|ú|ǔ|ŭ]",U:"[U|Ù|Û|Ü|]",v:"[v|ü|ǖ|ǘ|ǚ|ǜ]","|":"[|]"};try{for(var c="\\s*",u="",d=0,f=0,_=o.length;f<_;f++){if(f<_-1){var p;if("o"==o.charAt(f)&&"e"==o.charAt(f+1)||"O"==o.charAt(f)&&"E"==o.charAt(f+1))(p=r[o.charAt(f)+o.charAt(f+1)])&&(u+=(f>0?o.charAt(f-1):"")+p),d=f+1;if("a"==o.charAt(f)&&"e"==o.charAt(f+1)||"A"==o.charAt(f)&&"E"==o.charAt(f+1))(p=r[o.charAt(f)+o.charAt(f+1)])&&(u+=(f>0?o.charAt(f-1):"")+p),d=f+1}c+=(p=r[o.charAt(f)])?p+"\\s*":o.charAt(f)+"\\s*"}""!==u&&"e"!==o.charAt(f)&&"E"!==o.charAt(f)&&(u+=o.substr(d+1,o.length));var g=new RegExp(""+c,"i"),m=new RegExp(c+"$","i"),v=new RegExp("^"+u,"i"),E=new RegExp(u+"$","i")}catch(t){g=m=null}this._oAutoCompleteDic.setCache(o,e);var b=this._itemCount;location.href.indexOf("write")>-1&&(b=this._itemCountForWriter);var C=[];if(this._oAutoCompleteDic.bEnable)if(a.convertACResultWithcustomACTemplet){var w=a.convertACResultWithcustomACTemplet(h,o,a);w&&l.push(w),this.queryStr||this.showAuto?l.length||(s.$Element(this._oAutoCompleteDic.aResultList[0]).empty(),l.push('<p class="nothing" style="display: block;">'+window.i18n("autocomplete.no.word","해당 단어로 추천어가 없습니다.")+"</p>")):this._onShowMyReviewedWord()}else if(a.isShowACDataNotMatching){try{if(h[0].length>0||h[1].length>0){if(h[0].length>0){l.push('<ul class="list_word">');f=0;for(var S=h.length;S>0&&f<b;f++)if(h[0].length>f&&h[0][f]){if(!(h[0][f][0]instanceof Array))continue;location.hostname.indexOf("ardic.naver.com")>-1||location.hostname.indexOf("fadic.naver.com")>-1?l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[0][f][2][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap"><span class="rtl">'+this._makeHighlight(this._makeSubstring(h[0][f][2][0],50),[g,v])+'</span></span><span class="mean">'+this._filter(h[0][f][3][0])+"</span></a></li>"):l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[0][f][2][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[0][f][2][0],50),[g,v])+'</span><span class="mean">'+this._filter(h[0][f][3][0])+"</span></a></li>")}l.push("</ul>")}if(h[1].length>0){l.push('<ul class="list_word">');for(f=0;f<3;f++)if(h[1][f]&&h[1][f][0]){if(s.$A(C).has(h[1][f][0][0]))continue;location.hostname.indexOf("ardic.naver.com")>-1||location.hostname.indexOf("fadic.naver.com")>-1?l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[1][f][2][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap"><span class="rtl">'+this._makeHighlight(this._makeSubstring(h[1][f][2][0],50),[g,v])+'</span></span><span class="mean">'+this._filter(h[1][f][3][0])+"</span></a></li>"):l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[1][f][2][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[1][f][2][0],50),[g,v])+'</span><span class="mean">'+this._filter(h[1][f][3][0])+"</span></a></li>"),!1}l.push("</ul>")}}}catch(t){}this.queryStr||this.showAuto?l.length||(s.$Element(this._oAutoCompleteDic.aResultList[0]).empty(),l.push('<p class="nothing" style="display: block;">'+window.i18n("autocomplete.no.word","해당 단어로 추천어가 없습니다.")+"</p>")):this._onShowMyReviewedWord()}else{try{if(h[0].length>0||h[1].length>0){if(h[0].length>0){if(l.push('<ul class="list_word">'),a.customAutoCompTemplet)for(f=0;f<h[0].length;f++)l.push(a.customAutoCompTemplet(h[0][f]));else{var j=a.autocompleteLtItem2Count&&h[1]&&h[1].length>0?a.autocompleteLtItem2Count:b;for(f=0,S=h.length;S>0&&f<j;f++)if(h[0].length>f&&h[0][f]){if(!(h[0][f][0]instanceof Array))continue;location.hostname.indexOf("ardic.naver.com")>-1||location.hostname.indexOf("fadic.naver.com")>-1?l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[0][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap"><span class="rtl">'+this._makeHighlight(this._makeSubstring(h[0][f][0][0],50),[g,v])+'</span></span><span class="mean">'+this._makeHighlight(this._makeSubstring(this._filter(h[0][f][1][0]),50),[g,v])+"</span></a></li>"):l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[0][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[0][f][0][0],50),[g,v])+'</span><span class="mean">'+this._makeHighlight(this._makeSubstring(this._filter(h[0][f][1][0]),50),[g,v])+"</span></a></li>")}}l.push("</ul>")}if(h[1].length>0){if(l.push('<ul class="list_word">'),a.customAutoCompTemplet)for(f=0;f<h[1].length;f++)l.push(a.customAutoCompTemplet(h[1][f]));else for(f=0;f<(a.autocompleteLtItem2Count||3);f++)if(h[1][f]&&h[1][f][0]){if(s.$A(C).has(h[1][f][0][0]))continue;m=a.autocompleteLtItem2WithFrontMatch?g:m,E=a.autocompleteLtItem2WithFrontMatch?v:E,location.hostname.indexOf("ardic.naver.com")>-1||location.hostname.indexOf("fadic.naver.com")>-1?l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[1][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap"><span class="rtl">'+this._makeHighlight(this._makeSubstring(h[1][f][0][0],50),[m,E])+'</span></span><span class="mean">'+this._makeHighlight(this._makeSubstring(this._filter(h[1][f][1][0]),50),[m,E])+"</span></a></li>"):l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[1][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[1][f][0][0],50),[m,E])+'</span><span class="mean">'+this._makeHighlight(this._makeSubstring(this._filter(h[1][f][1][0]),50),[m,E])+"</span></a></li>"),!1}l.push("</ul>")}}else if(h[2].length>0||h[3].length>0){if(h[2].length>0){l.push('<ul class="list_word">');for(f=0,S=h.length;S>0&&f<b;f++)if(h[2].length>f&&h[2][f]){if(!(h[2][f][0]instanceof Array))continue;l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[2][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[2][f][0][0],50),[g,v])+'</span><span class="mean">'+this._filter(h[2][f][1][0])+"</span></a></li>")}l.push("</ul>")}if(h[3].length>0){l.push('<ul class="list_word">');for(f=0;f<3;f++)if(h[3][f]&&h[3][f][0]){if(s.$A(C).has(h[3][f][0][0]))continue;l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[3][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[3][f][0][0],50),[m,E])+'</span><span class="mean">'+this._filter(h[3][f][1][0])+"</span></a></li>"),!1}l.push("</ul>")}}if("jakodict"==a.dictName&&h[2]&&h[2].length>0){l.push('<ul class="list_word">');for(f=0,S=h.length;S>0&&f<5;f++)if(h[2].length>f&&h[2][f]){if(!(h[2][f][0]instanceof Array))continue;l.push('<li class="_auto_complete_list_item" data-item="'+this._entryEncoding(h[2][f][0][0])+'"><a href="javascript:;" onclick="clickcr(this, \'sch.autoentryclick\',\'\',\'\',event);"><span class="word_wrap">'+this._makeHighlight(this._makeSubstring(h[2][f][0][0],50),[g,v])+'</span><span class="mean">'+this._makeHighlight(this._makeSubstring(this._filter(h[2][f][1][0]),50),[g,v])+"</span></a></li>")}l.push("</ul>")}}catch(t){}this.queryStr||this.showAuto?l.length||(s.$Element(this._oAutoCompleteDic.aResultList[0]).empty(),l.push('<p class="nothing" style="display: block;">'+window.i18n("autocomplete.no.word","해당 단어로 추천어가 없습니다.")+"</p>")):this._onShowMyReviewedWord()}else l.push('<p class="auto_off_info" style="display: block;">'+window.i18n("autocomplete.search.help","네이버 <strong>검색어 자동완성</strong>을 아시나요?<br>검색어를 한 글자만 입력해도 찾으시려는 단어를 추천해주는 편리한 기능입니다.")+'<br><button class="_link_open">'+window.i18n("autocomplete.on","자동완성 사용하기")+"</button></p>");(this.queryStr||this.showAuto)&&(this._oAutoCompleteDic.bEnable?l.push('<div class="option"><a href="https://help.naver.com/support/service/main.nhn?serviceNo=606&amp;categoryNo=1987" class="_link_help" target="_blank">'+window.i18n("autocomplete.help","도움말")+'</a> <span class="bar"></span><a href="javascript:;" class="_link_close">'+window.i18n("autocomplete.stop","자동완성 끄기")+"</a></div>"):l.push('<div class="option"><a href="https://help.naver.com/support/service/main.nhn?serviceNo=606&amp;categoryNo=1987" class="_link_help" target="_blank">'+window.i18n("autocomplete.help","도움말")+"</a></div>")),n("#ac_layer div.autocomplete").empty().append(l.join("")),this._oAutoCompleteDic.aResultList[0]&&s.$Element(this._oAutoCompleteDic.aResultList[0]).html(l.join("")),n("._link_help").attr("onclick","clickcr(this, 'sch.autohelp','','',event);"),this._oAutoCompleteDic.selected=null;var y=this._oAutoCompleteDic.aResultList[0].getElementsByTagName("a");this._oAutoCompleteDic.elLayer;setTimeout((function(){for(var t=0;t<y.length;t++)void 0===y[t].origKeyWord&&(y[t].origKeyWord=y[t].firstChild.textContent||y[t].firstChild.innerText||"")}),0),this._onShowAutoComplete()},_onClickArrowAutoComplete:function(){if(n("#ac_layer").hasClass("active"))h(),clickcr($$("#btn_arw"),"sch.autounfold","","",null);else{if(this._oAutoCompleteDic.bEnable)if(this.queryStr){n("#ac_layer div.autocomplete").empty();var t=this._oAutoCompleteDic.getCache(this._elInput.value.toLowerCase());t?this._oAutoCompleteDic.fireEvent("load",{oResponse:t}):this._oAutoCompleteDic.request()}else this.showAuto=!0,this._oAutoCompleteDic.request();else this.showAuto=!0,this._oAutoCompleteDic.request();clickcr($$("#btn_arw"),"sch.autofold","","",null)}},_onShowAutoComplete:function(){(this.queryStr||this.showAuto)&&(l(),n("#ac_layer").addClass("active"),n("ul.list_word").not(":has(li)").remove(),this._onClickAutoBottom()),this.showAuto=!1},_onHideAutoComplete:function(){h(),this._onShowMyReviewedWord(),clickcr($$("#btn_arw"),"sch.autofold","","",null)},_onClickAutoBottom:function(){var t=this;n("._link_help").unbind("click").on("click",(function(t){clickcr(this,"DTP.autohelp","","",event)})),n("._link_close").unbind("click").on("click",(function(e){confirm(window.i18n("autocomplete.stop.real","자동완성 기능을 사용 중지하시겠습니까?"))&&(h(),n.cookie("ac_enable","false",{expires:3e3},location.hostname),t._oAutoCompleteDic.bEnable=!1,clickcr(this,"sch.autooff","","",event)),n("#ac_input").focus(),setTimeout((function(){n("#ac_input").focus()}))})),n("._link_open").unbind("click").on("click",(function(e){confirm(window.i18n("autocomplete.usage.open","자동완성 기능을 사용하시겠습니까?"))&&(h(),n.cookie("ac_enable","true",{expires:3e3},location.hostname),t._oAutoCompleteDic.bEnable=!0,clickcr(this,"sch.autoon","","",event)),n("#ac_input").focus(),setTimeout((function(){n("#ac_input").focus()}))}))},_onKeydownDocument:function(t){var e=t._event,i=t.element,n=t.element.tagName.toUpperCase(),s=e.keyCode;if(!("INPUT"==n||"SELECT"==n||e.ctrlKey&&86!=s||"TEXTAREA"==n))if(8==s||s>32&&s<41||21!=s&&s<32||e.altKey||e.metaKey||224==s);else if(32==s)e.shiftKey&&(this._elInput.focus(),this._elInput.select(),t.returnValue=!1);else if(21==s)scrollTo(0,0),this._elInput.focus(),this._elInput.select(),t.returnValue=!1;else if(i!=this._elInput&&(scrollTo(0,0),this._elInput))try{["enkodict","enendict"].includes(a.dictName)?(this._elInput.focus(),this._elInput.select()):(this._elInput.value="",this._elInput.focus(),t.stopDefault())}catch(t){}},_onShowMyReviewedWord:function(){this.fireEvent("showMyReviewedWord")},_entryEncoding:function(t){return t.replace(/\"/g,"&quot;")}}).extend(s.UIComponent)},"lNR/":function(t,e,i){"use strict";var n=i("Ll3W"),s=location.href.indexOf("#se")>-1;n.WatchInput=n.$Class({_bIsActivating:!1,_bTimerRunning:!1,_bEventAttached:!1,_sPrevValue:"",$init:function(t,e){this.option({interval:1e4,useTimerOnIE:!1,keyEvent:"keyup",activateOnload:!0}),this.option(e||{}),this._elInput=n.$(t),this._oTimer=new n.Timer,this._bIE=n.$Agent().navigator().ie,this.option("useTimerOnIE")&&(this._bIE=!1),this._wfFocus=n.$Fn(this._onFocus,this),this._wfBlur=n.$Fn(this._onBlur,this),this._wfKeyEvent=n.$Fn(this._onKeyEvent,this),this.option("activateOnload")&&this.activate(!s)},getInput:function(){return this._elInput},setInputValue:function(t){this.getInput().value=t,this.setCompareValue(t)},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(t){this._sPrevValue=t},start:function(t){this.activate(t||!1)},stop:function(){this.deactivate()},isActivating:function(){return this._bIsActivating},activate:function(t){if(!this.isActivating()){var e=this.getInput();if(t=t||!1,this._bIE)this._wfKeyEvent.attach(e,this.option("keyEvent"));else{if(this._isTimerRunning())return;this._wfFocus.attach(e,"focus"),this._wfBlur.attach(e,"blur"),t&&this._onFocus()}return this._bIsActivating=!0,this.fireEvent("start"),this}},deactivate:function(){if(this.isActivating()){var t=this.getInput();return this._bIE?this._wfKeyEvent.detach(t,this.option("keyEvent")):(this._isTimerRunning()&&this._stopTimer(),this._wfFocus.detach(t,"focus"),this._wfBlur.detach(t,"blur")),this._bIsActivating=!1,this.fireEvent("stop"),this}},getInterval:function(){return this.option("interval")},setInterval:function(t){this.option("interval",t)},_isTimerRunning:function(){return this._bTimerRunning},_stopTimer:function(){var t=this;return setTimeout((function(){t._oTimer.abort(),t._bTimerRunning=!1,t.fireEvent("timerStop")}),this.getInterval())},_onKeyEvent:function(t){this._compare()},_onFocus:function(){if(this._isTimerRunning())return clearTimeout(this._nTimerStopCall),void(this._nTimerStopCall=null);this._bTimerRunning=!0,this.fireEvent("timerStart"),this._compare();var t=this;this._oTimer.start((function(){return t._compare(),!0}),this.getInterval())},_onBlur:function(){},_compare:function(){var t=this.getInput().value;t!=this.getCompareValue()&&(this.fireEvent("change",{text:t}),this.setCompareValue(t))}}).extend(n.Component)},uhru:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("EVdn"),o=i("Ll3W");(window.nhn=window.nhn||{}).AutoCompleteDic.SpecialAlphabet=o.$Class({_htElement:null,_aSpecial:null,_sQuery:"",_sPrevQuery:"",_nInputIndex:0,_nSelectIndex:0,_nMaxCnt:0,_aUnit:[],_nCursorPos:null,eventType:1,$init:function(t,e){var i=$Agent().os();i.iphone?this.eventType=2:(i.android,this.eventType=1),this.option({htSpecialCharNumberPerRow:7}),this._htElement=[],this.option(e),this._htOption.nMaxLeftOfLayer=310;this._makeSpecialCharsTable(this.option("htSpecialChars")||["à","â","æ"]),this._nCursorPos={x:0,y:0},this._htElement.input=this.getRefferElement(t),this._htElement.auto_layer=this.getRefferElement(this.option("elAutoLayer")),this._htElement.layerBtn=this.getRefferElement(this.option("elLayerBtn")),this._htElement.layer=this.getRefferElement(this.option("elLayer")),this._htElement.ul=this.getRefferElement(o.$$.getSingle("ul",this._htElement.layer.el)),this._htElement.special_check=this.getRefferElement(this.option("elCheckbox")),this._htElement.arrow_d=this.getRefferElement(o.$$.getSingle("._arrow",this._htElement.layer.el))},_makeSpecialCharsTable:function(t){this._htSpecialWord=t},isSelectedAutocomplete:function(){var t=o.$$(">ul>li",this._htElement.auto_layer.el);if(!this._htElement.auto_layer.wel.visible())return!1;for(var e=0,i=t.length;e<i;e++)if(o.$Element(t[e]).hasClass("on"))return!0;return!1},_onOver:function(t){var e=t.element;"A"===e.tagName&&(this.resetLayerDesign(),this._setFocusStyle(e))},_setFocusStyle:function(t){for(var e=t,i=!1,n=0,s=this._nMaxCnt;n<s;n++)this._aUnit[n]===e&&0===n&&(i=!0),o.$Element(this._aUnit[n]).removeClass("on");i&&this._htElement.arrow_d.wel.addClass("over"),o.$Element(e).addClass("on")},_onKeyDownInput:function(t){var e=t.key();t.element;this._getInputIndex();if(!e.ctrl){if(e.up||e.right&&this._nInputIndex==this._htElement.input.el.value.length){if(this.isSelectedAutocomplete())return;return this.visible()?(this._setFocusStyle(this._aUnit[0]),this._htElement.input.el.value=this._sPrevQuery,void this._aUnit[0].focus()):(this.run(!1),void(this.visible()&&(this.move(0),this._setFocusStyle(this._aUnit[0]),this._aUnit[0].focus())))}this.nKeycode=e.keyCode,setTimeout(o.$Fn((function(){this.run(!0)}),this).bind(),1)}},_onKeyPressInput:function(t){var e=t.key();16===e.keyCode||!e.shift||e.up||e.right||e.down||e.left||(this.nKeycode=e.keyCode,setTimeout(o.$Fn((function(){this.run(!0)}),this).bind(),1))},_onKeyDown:function(t){if(t.stop(),t.key().down)return this._htElement.input.el.focus(),void this._hideLayer();if(t.key().left){if(0===this._nSelectIndex)return this._htElement.input.el.focus(),void this._hideLayer();this._nSelectIndex--,this._nSelectIndex=this._nSelectIndex<0?0:this._nSelectIndex,this.move(),this._setFocusStyle(this._aUnit[this._nSelectIndex])}else t.key().right?(this._nSelectIndex++,this._nSelectIndex=this._nSelectIndex>this._nMaxCnt-1?this._nMaxCnt-1:this._nSelectIndex,this.move(),this._setFocusStyle(this._aUnit[this._nSelectIndex])):t.key().enter&&this._replaceValue(t.element.innerHTML)},_onClick:function(t){t.stop(),"A"!==t.element.tagName&&"EM"!==t.element.tagName||this._replaceValue(t.element.innerHTML)},getCodeToChar:function(t){return this._htSpecialKeyCode[t]||null},getRefferElement:function(t){return{el:o.$(t),wel:o.$Element(t)}},_hideLayer:function(){},_replaceValue:function(t){this._getInputIndex();var e=this._htElement.input.el.value.split("");e.splice(this._nInputIndex,0,t),this._htElement.input.el.value=e.join(""),this._htElement.input.wel.fireEvent("input",{sInputValue:this._htElement.input.el.value}),this._sPrevQuery=this._htElement.input.el.value,this._setInputIndex(),setTimeout(o.$Fn((function(){this._htElement.input.el.focus()}),this).bind(),10)},_checkByKeycode:function(t){return this.nKeycode=t||this.nKeycode,!!this._htSpecialCode[this.nKeycode]},_checkByChar:function(){var t=this._htElement.input.el.value.split("")[this._nInputIndex-1];return"object"==n(this._htSpecialWord[t])},_isChecked:function(){return!this._htElement.special_check||this._htElement.special_check.el.checked},_setPositionLayer:function(){for(var t=this._htElement.input.el.value.split(""),e=[],i=0,n=this._nInputIndex;i<n;i++)e.push(" "==t[i]?"&nbsp;":t[i]);this._htElement.dummy_span.wel.html(e.join(""));var s=parseInt(this._htElement.dummy_span.wel.width()),o=parseInt(s+55);this._htElement.dummy_span2.wel.html(this._getCharNowTarget());var a=parseInt(this._htElement.dummy_span2.wel.width()/2);o-=a,this._htOption.nMaxLeftOfLayer=a<3?312:310,o=o>this._htOption.nMaxLeftOfLayer?this._htOption.nMaxLeftOfLayer:o,this._htElement.layer.wel.css({left:o+"px"})},_getCharNowTarget:function(){return this._htElement.input.el.value.split("")[this._nInputIndex-1]},_beValidation:function(t){return!!this._isChecked()&&(t?this._checkByKeycode():this._checkByChar())},_setInputIndex:function(){var t=this._nInputIndex+1,e=this._htElement.input.el;if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},_getInputIndex:function(){var t=0,e=this._htElement.input.el;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);this._nInputIndex=t},_executeLayer:function(){this._sPrevQuery=this._htElement.input.el.value,this._nSelectIndex=0,this._getInputIndex();var t=[],e=this._htSpecialWord||[];if(0!==e.length){for(var i=this.option("htSpecialCharNumberPerRow")||-1,n=0,a=e.length;n<a;n++)2==this.eventType?n==i-1||n==e.length-1?t.push('<li class="editor_lst last_lst"><em class="edit_lk">'+e[n]+"</em></li>"):t.push('<li class="editor_lst"><em class="edit_lk">'+e[n]+"</em></li>"):n==i-1||n==e.length-1?t.push('<li class="editor_lst last_lst"><a href="#" onclick="return false;" class="edit_lk">'+e[n]+"</a></li>"):t.push('<li class="editor_lst"><a href="#" onclick="return false;" class="edit_lk">'+e[n]+"</a></li>");if(this._htElement.ul.wel.html(t.join("")),this._htElement.layer.wel.show(),2==this.eventType){var h=this.eventType;this._aUnit=o.$$("li>em",this._htElement.layer.el),$A(this._aUnit).forEach((function(t,e,i){2==h&&s(t).bind("touchstart",(function(e){s(t).addClass("on")})).bind("touchmove",(function(e){s(t).removeClass("on")})).bind("tap",(function(e){return s(t).removeClass("on"),!1}))}))}else this._aUnit=o.$$("li>a",this._htElement.layer.el),$A(this._aUnit).forEach((function(t,e,i){s(t).bind("mousedown",(function(e){s(t).addClass("on")})).bind("mousemove",(function(e){s(t).removeClass("on")})).bind("click",(function(e){s(t).removeClass("on")})),s(t).bind("touchstart",(function(e){s(t).addClass("on")})).bind("touchmove",(function(e){s(t).removeClass("on")})).bind("touchend",(function(e){return s(t).removeClass("on"),!1}))}));this._nMaxCnt=this._aUnit.length,this.resetLayerDesign()}},run:function(){this._htElement.layer.wel.visible()?this.turnOff():($Element(this._htElement.layerBtn.el).addClass("on"),this._executeLayer())},turnOff:function(){$Element(this._htElement.layerBtn.el).removeClass("on"),this._hideLayer()},_getSelection:function(){var t=this._htElement.input.el,e=[-1,-1];if(isNaN(t.selectionStart)){for(var i=document.selection.createRange().duplicate(),n=t.value.length,s=i.text.length,o=0;o<n&&i.parentElement()===t;o++)i.moveStart("character",-1);e[1]=i.text.length,e[0]=e[1]-s}else e[0]=t.selectionStart,e[1]=t.selectionEnd;return e},setCursorPos:function(t){t.el;this._nCusorPos.x=0},visible:function(){return this._htElement.layer.wel.visible()},resetLayerDesign:function(){this._htElement.arrow_d.wel.hasClass("over")&&this._htElement.arrow_d.wel.removeClass("over")},move:function(t){try{this._aUnit[t||this._nSelectIndex].focus(),this._htElement.arrow_d.wel.removeClass("over"),0===(t||this._nSelectIndex)&&this._htElement.arrow_d.wel.addClass("over")}catch(t){}}}).extend(o.Component)},vqop:function(t,e){var i;jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this.constructor.getInstance().push(this),this._htEventHandler={},this._htOption={},this._htOption._htSetter={}},option:function(t,e){switch(typeof t){case"undefined":return this._htOption;case"string":if(void 0===e)return this._htOption[t];if("htCustomEventHandler"==t){if(void 0!==this._htOption[t])return this;this.attach(e)}this._htOption[t]=e,"function"==typeof this._htOption._htSetter[t]&&this._htOption._htSetter[t](e);break;case"object":for(var i in t){if("htCustomEventHandler"==i){if(void 0!==this._htOption[i])continue;this.attach(t[i])}this._htOption[i]=t[i],"function"==typeof this._htOption._htSetter[i]&&this._htOption._htSetter[i](t[i])}}return this},optionSetter:function(t,e){switch(typeof t){case"undefined":return this._htOption._htSetter;case"string":if(void 0===e)return this._htOption._htSetter[t];this._htOption._htSetter[t]=jindo.$Fn(e,this).bind();break;case"object":for(var i in t)this._htOption._htSetter[i]=jindo.$Fn(t[i],this).bind()}return this},fireEvent:function(t,e){e=e||{};var i=this["on"+t],n=this._htEventHandler[t]||[],s="function"==typeof i,o=n.length>0;if(!s&&!o)return!0;n=n.concat(),e.sType=t,void 0===e._aExtend&&(e._aExtend=[],e.stop=function(){e._aExtend.length>0&&(e._aExtend[e._aExtend.length-1].bCanceled=!0)}),e._aExtend.push({sType:t,bCanceled:!1});var a,h,l,r=[e];for(a=2,h=arguments.length;a<h;a++)r.push(arguments[a]);if(s&&i.apply(this,r),o)for(a=0;l=n[a];a++)l.apply(this,r);return!e._aExtend.pop().bCanceled},attach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn((function(t,e){this.attach(e,t)}),this).bind()),this;var i=this._htEventHandler[t];return void 0===i&&(i=this._htEventHandler[t]=[]),i.push(e),this},detach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn((function(t,e){this.detach(e,t)}),this).bind()),this;var i=this._htEventHandler[t];if(i)for(var n,s=0;n=i[s];s++)if(n===e){i=i.splice(s,1);break}return this},detachAll:function(t){var e=this._htEventHandler;if(arguments.length)return void 0===e[t]?this:(delete e[t],this);for(var i in e)delete e[i];return this}}),jindo.Component.factory=function(t,e){var i,n=[];void 0===e&&(e={});for(var s,o=0;s=t[o];o++)i=new this(s,e),n[n.length]=i;return n},jindo.Component.getInstance=function(){return void 0===this._aInstance&&(this._aInstance=[]),this._aInstance},jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.Component),jindo.HTMLComponent=jindo.$Class({sTagName:"",$init:function(){},paint:function(){return this._onPaint(),this}}).extend(jindo.UIComponent),jindo.HTMLComponent.paint=function(){for(var t,e=this.getInstance(),i=0;t=e[i];i++)t.paint()},jindo.Formatter=jindo.$Class({_aMarks:["\0","￿"],_sPrevValue:null,_oTextRange:null,_bFakeFocus:!1,$init:function(t,e){this._el=jindo.$(t),this.option({bPaintOnload:!0,bActivateOnload:!0,WatchInput:{nInterval:100,bPermanent:!0,bActivateOnload:!1}}),this.option(e||{});var i=this;this._wfRealBlur=jindo.$Fn(this._realBlur,this),this._wfRealFocus=jindo.$Fn(this._realFocus,this),this._oTextRange=new jindo.TextRange(t),this._oWatchInput=new jindo.WatchInput(t,this.option("WatchInput")).attach({change:function(t){setTimeout((function(){i.paint()}),1)}}),this.option("bPaintOnload")&&setTimeout((function(){i.paint()}),1),this.option("bActivateOnload")&&this.activate()},getWatchInput:function(){return this._oWatchInput},_splice:function(t,e,i,n){return t.slice(0,e)+n+t.slice(e+i)},setValue:function(t){return this._el.value=t,this.paint(),this},paint:function(){var t,e,i=this._el,n=this._oTextRange,s=this._aMarks,o=i.value.toString(),a=n.hasFocus();if(a){t=[-1,-1];try{t=n.getSelection()}catch(t){}o=this._splice(this._splice(o,t[1],0,s[1]),t[0],0,s[0])}if(e={elInput:i,sText:o,sStartMark:s[0],sEndMark:s[1]},this.fireEvent("beforeChange",e)){var h=e.sText;if(a){var l=h.indexOf(s[0]);l>-1&&(h=this._splice(h,l,1,"")),(t=[l])[1]=h.indexOf(s[1]),t[1]>-1&&(h=this._splice(h,t[1],1,""));var r=this;setTimeout((function(){r._bFakeFocus=!0,i.blur()}),1),setTimeout((function(){r._oWatchInput.setInputValue(h),i.focus();try{n.setSelection(t[0],t[1])}catch(t){}r.fireEvent("change",{elInput:i})}),2),setTimeout((function(){r._bFakeFocus=!1}),20)}else this._oWatchInput.setInputValue(h),this.fireEvent("change",{elInput:i})}return this},_realBlur:function(){this._bFakeFocus||(this.getWatchInput().stop(),this.fireEvent("blur",{elInput:this._el}))},_realFocus:function(){this._bFakeFocus||(this.getWatchInput().start(!0),this.fireEvent("focus",{elInput:this._el}))},_onActivate:function(){this._wfRealBlur.attach(this._el,"blur"),this._wfRealFocus.attach(this._el,"focus")},_onDeactivate:function(){this._wfRealBlur.detach(this._el,"blur"),this._wfRealFocus.detach(this._el,"focus")}}).extend(jindo.UIComponent),jindo.Dialog=jindo.$Class({$init:function(t){this.option({sClassPrefix:"dialog-",LayerPosition:{sPosition:"inside-center",bAuto:!0}}),this.option(t||{}),this._bIsEventAttached=!1,this._bIsShown=!1,this._assignHTMLElements(),this._initLayerPosition()},_assignHTMLElements:function(){this._elLayer=jindo.$('<div class="'+this.option("sClassPrefix")+'layer"></div>'),this._welLayer=jindo.$Element(this._elLayer),this._wfClick=jindo.$Fn(this._onClick,this)},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(document.body,this._elLayer,this.option("LayerPosition"))},getLayer:function(){return this._elLayer},getLayerPosition:function(){return this._oLayerPosition},setLayerTemplate:function(t){this._sTemplate=t,this._template=jindo.$Template(this._sTemplate)},getLayerTemplate:function(){return this._sTemplate},show:function(t,e){if(!this.isShown()){this.attach(e),document.body.appendChild(this._elLayer),this._welLayer.html(this._template.process(t));var i={elLayer:this._elLayer};this.fireEvent("beforeShow",i)&&(this._welLayer.show(),this._attachEvents(),this.getLayerPosition().setPosition(),this._bIsShown=!0,this.fireEvent("show",i))}},hide:function(){if(this.isShown()){var t={elLayer:this._elLayer};this.fireEvent("beforeHide",t)&&(this.detachAll("close").detachAll("confirm").detachAll("cancel"),this._detachEvents(),this._welLayer.hide(),this._welLayer.leave(),this._bIsShown=!1,this.fireEvent("hide",t))}},isShown:function(){return this._bIsShown},_isEventAttached:function(){return this._bIsEventAttached},_attachEvents:function(){return this._isEventAttached()||(this._wfClick.attach(this._elLayer,"click"),this._bIsEventAttached=!0),this},_detachEvents:function(){return this._isEventAttached()&&(this._wfClick.detach(this._elLayer,"click"),this._bIsEventAttached=!1),this},_onClick:function(t){var e=this.option("sClassPrefix");this._getClosest("."+e+"close",t.element)?this.fireEvent("close")&&this.hide():this._getClosest("."+e+"confirm",t.element)?this.fireEvent("confirm")&&this.hide():this._getClosest("."+e+"cancel",t.element)&&this.fireEvent("cancel")&&this.hide()},_getClosest:function(t,e){return jindo.$$.test(e,t)?e:jindo.$$.getSingle("! "+t,e)}}).extend(jindo.Component),jindo.Rolling=jindo.$Class({_oTransition:null,$init:function(t,e){this._el=jindo.$(t),this._elList=jindo.$$.test(this._el,"ul, ol")?this._el:jindo.$$.getSingle("> ul, > ol",t),this.option({nFPS:50,nDuration:800,sDirection:"horizontal",fEffect:jindo.Effect.linear}),this.option(e||{}),this._oKeys="horizontal"==this.option("sDirection")?{offsetWidth:"offsetWidth",marginLeft:"marginLeft",marginRight:"marginRight",clientWidth:"clientWidth",scrollLeft:"scrollLeft"}:{offsetWidth:"offsetHeight",marginLeft:"marginTop",marginRight:"marginBottom",clientWidth:"clientHeight",scrollLeft:"scrollTop"},this._initTransition()},_initTransition:function(){var t=this;this._oTransition=(new jindo.Transition).fps(this.option("nFPS")).attach({end:function(e){t.fireEvent("afterMove",{nIndex:t.getIndex()})}})},getTransition:function(){return this._oTransition},getList:function(){return this._elList},getItems:function(){return jindo.$$("> li",this._elList)},_offsetSize:function(t){var e=jindo.$Element(t),i=this._oKeys,n=parseInt(e.css(i.marginLeft),10)||0,s=parseInt(e.css(i.marginRight),10)||0;return t[i.offsetWidth]+n+s},getIndex:function(){if(this.isMoving())return this._nMoveTo;for(var t=this._el[this._oKeys.scrollLeft],e=this.getItems(),i=0,n=0,s=99999999,o=0;o<e.length;o++){var a=Math.abs(t-i);a<s&&(s=a,n=o),i+=this._offsetSize(e[o])}return n},_getPosition:function(t){for(var e=this._el,i=this._oKeys,n=this.getItems(),s=0,o=this._getSize(),a=0;a<t;a++)s+=this._offsetSize(n[a]);return s+e[i.clientWidth]>o&&(s=o-e[i.clientWidth]),s},_getSize:function(){for(var t=this.getItems(),e=0,i=0;i<t.length;i++)e+=this._offsetSize(t[i]);return this._nSize=e},_move:function(t){var e=this._el,i=this._oKeys,n=(this.getItems(),this._getPosition(t)),s=(this._getSize(),{element:e,nIndex:t,nScroll:n});if(this.fireEvent("beforeMove",s)&&e[i.scrollLeft]!=s.nScroll){var o={};return o[i.scrollLeft]=this.option("fEffect")(s.nScroll),this._nMoveTo=t,this.getTransition().abort().start(this.option("nDuration"),s.element,o),!0}return!1},moveTo:function(t){return t=Math.min(t,this.getItems().length-1),t=Math.max(t,0),this._move(t)},moveLastTo:function(t){return this.moveTo(this.getItems().length-1-t)},moveBy:function(t){return this.moveTo(this.getIndex()+t)},isMoving:function(){return this._oTransition.isPlaying()},isOverflowed:function(){return this._getSize()>this._el[this._oKeys.clientWidth]},getDisplayedItemCount:function(){for(var t=0,e=this.getItems(),i=0,n=0;n<e.length&&(i+=this._offsetSize(e[n]))<=this._el[this._oKeys.clientWidth];n++)t++;return t}}).extend(jindo.Component),jindo.ScrollBar=new jindo.$Class({_bMouseEnter:!1,_bIsEventAttachedForCommon:!1,_bIsEventAttachedForVertical:!1,_bIsEventAttachedForHorizontal:!1,$init:function(t,e){this.option({sClassPrefix:"scrollbar-",nDelta:16,sClassNameForRollover:"rollover",bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._oTimer=new jindo.Timer,this._oTransition=(new jindo.Transition).fps(30),this._wfOnMouseEnter=jindo.$Fn(this._onMouseEnter,this),this._wfOnMouseLeave=jindo.$Fn(this._onMouseLeave,this),this._wfOnWheel=jindo.$Fn(this._onWheel,this),this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this),this._assignHTMLElements(),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){var t=this._el,e=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+e+"box",t),this._elContent=jindo.$$.getSingle("."+e+"content",t);var i=jindo.$Element(this._elBox),n=jindo.$Element(this._elContent);this._oBoxSize={nWidth:i.width(),nHeight:i.height()},this._oContentSize={nWidth:n.width(),nHeight:n.height()},this._oHorizontal={elScrollBar:jindo.$$.getSingle("."+e+"h",t)};var s=this._oHorizontal;s.elScrollBar&&(s.elTrack=jindo.$$.getSingle("."+e+"track",s.elScrollBar),s.elThumb=jindo.$$.getSingle("."+e+"thumb",s.elTrack),s.elThumbHead=jindo.$$.getSingle("."+e+"thumb-head",s.elThumb),s.elThumbBody=jindo.$$.getSingle("."+e+"thumb-body",s.elThumb),s.elThumbFoot=jindo.$$.getSingle("."+e+"thumb-foot",s.elThumb),s.elButtonLeft=jindo.$$.getSingle("."+e+"button-left",s.elScrollBar),s.elButtonRight=jindo.$$.getSingle("."+e+"button-right",s.elScrollBar)),this._oVertical={elScrollBar:jindo.$$.getSingle("."+e+"v",t)};var o=this._oVertical;o.elScrollBar&&(o.elTrack=jindo.$$.getSingle("."+e+"track",o.elScrollBar),o.elThumb=jindo.$$.getSingle("."+e+"thumb",o.elTrack),o.elThumbHead=jindo.$$.getSingle("."+e+"thumb-head",o.elThumb),o.elThumbBody=jindo.$$.getSingle("."+e+"thumb-body",o.elThumb),o.elThumbFoot=jindo.$$.getSingle("."+e+"thumb-foot",o.elThumb),o.elButtonUp=jindo.$$.getSingle("."+e+"button-up",o.elScrollBar),o.elButtonDown=jindo.$$.getSingle("."+e+"button-down",o.elScrollBar))},getBox:function(){return this._elBox},getContent:function(){return this._elContent},getDefaultBoxSize:function(){return this._oBoxSize},getDefaultContentSize:function(){return this._oContentSize},getScrollBarHorizontal:function(){return this._oHorizontal},getScrollBarVertical:function(){return this._oVertical},getSliderHorizontal:function(){return this._oSliderHorizontal||null},getSliderVertical:function(){return this._oSliderVertical||null},getRolloverArea:function(){return this._oRolloverArea},_attachEvent:function(t){var e=this.option("sClassPrefix"),i=this,n=this.getScrollBarHorizontal(),s=this.getScrollBarVertical();function o(t){if(t.elScrollBar){var e=i.option("sClassNameForRollover");jindo.$Element(t.elTrack).addClass(e),jindo.$Element(t.elThumb).addClass(e),t.elButtonLeft&&jindo.$Element(t.elButtonLeft).addClass(e),t.elButtonRight&&jindo.$Element(t.elButtonRight).addClass(e),t.elButtonUp&&jindo.$Element(t.elButtonUp).addClass(e),t.elButtonDown&&jindo.$Element(t.elButtonDown).addClass(e)}}function a(){i._bIsEventAttachedForHorizontal||o(n),i._bIsEventAttachedForHorizontal=!0}function h(){i._bIsEventAttachedForVertical||o(s),i._bIsEventAttachedForVertical=!0}this._bIsEventAttachedForCommon||(this._initSliders(),this._initRolloverArea(),this._wfOnMouseEnter.attach(this._el,"mouseenter"),this._wfOnMouseLeave.attach(this._el,"mouseleave"),this._wfOnWheel.attach(document,"mousewheel"),this._wfOnMouseUp.attach(document,"mouseup"),this._bIsEventAttachedForCommon=!0,jindo.$Element(this._el).removeClass(e+"noscript")),t||(a(),h()),"horizontal"==t&&a(),"vertical"==t&&h()},_detachEvent:function(t){var e=this.option("sClassPrefix"),i=this,n=this.getScrollBarHorizontal(),s=this.getScrollBarVertical();function o(t){if(t.elScrollBar){var e=i.option("sClassNameForRollover");jindo.$Element(t.elTrack).removeClass(e),jindo.$Element(t.elThumb).removeClass(e),t.elButtonLeft&&jindo.$Element(t.elButtonLeft).removeClass(e),t.elButtonRight&&jindo.$Element(t.elButtonRight).removeClass(e),t.elButtonUp&&jindo.$Element(t.elButtonUp).removeClass(e),t.elButtonDown&&jindo.$Element(t.elButtonDown).removeClass(e)}}function a(){i._bIsEventAttachedForHorizontal&&o(n),i._bIsEventAttachedForHorizontal=!1}function h(){i._bIsEventAttachedForVertical&&o(s),i._bIsEventAttachedForVertical=!1}t?"horizontal"==t?a():"vertical"==t&&h():(a(),h()),!this._bIsEventAttachedForCommon||this._bIsEventAttachedForHorizontal||this._bIsEventAttachedForVertical||(this._wfOnMouseEnter.detach(this._el,"mouseenter"),this._wfOnMouseLeave.detach(this._el,"mouseleave"),this._wfOnWheel.detach(document,"mousewheel"),this._wfOnMouseUp.detach(document,"mouseup"),this._bMouseEnter=!1,this._bIsEventAttachedForCommon=!1,this.getRolloverArea().deactivate(),jindo.$Element(this._el).addClass(e+"noscript"))},_activateH:function(){var t=this.getSliderHorizontal();t&&(t.activate(),this.getBox().scrollLeft=0,this.setScrollLeft(0))},_activateV:function(){var t=this.getSliderVertical();t&&(t.activate(),this.getBox().scrollTop=0,this.setScrollTop(0))},_onActivate:function(t){if(this._attachEvent(t||null),!t)return this._activateH(),this._activateV(),void jindo.$Element(this._el).removeClass(this.option("sClassPrefix")+"noscript");"horizontal"!=t?"vertical"!=t||this._activateV():this._activateH()},_deactivateH:function(){var t=this.getSliderHorizontal();t&&(t.deactivate(),this.getContent().style.left="0px",this.getBox().scrollLeft=0)},_deactivateV:function(){var t=this.getSliderVertical();t&&(t.deactivate(),this.getContent().style.top="0px",this.getBox().scrollTop=0)},_onDeactivate:function(t){if(this._detachEvent(t||null),!t)return this._deactivateH(),this._deactivateV(),void jindo.$Element(this._el).addClass(this.option("sClassPrefix")+"noscript");"horizontal"!=t?"vertical"!=t||this._deactivateV():this._deactivateH()},_initSliders:function(){var t=this,e=this.option("sClassPrefix"),i=this.getScrollBarHorizontal(),n=this.getScrollBarVertical();i.elScrollBar&&(this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width(),this._oSliderHorizontal=new jindo.Slider(i.elTrack,{sClassPrefix:e,bVertical:!1,nMinValue:0,nMaxValue:this._nScrollWidth}),this._oSliderHorizontal._oTransition=(new jindo.Transition).fps(30),this._oSliderHorizontal.attach({beforeChange:function(e){var i=jindo.$Element(this.getTrack()).width()-jindo.$Element(this.getThumb(e.nIndex)).width();e.nPos=Math.min(e.nPos,i),e.nPos=Math.max(e.nPos,0),e.bJump?(e.stop(),this._oTransition.abort().start(200,this.getThumb(e.nIndex),{"@left":jindo.Effect.easeOut(e.nPos+"px")}).attach({playing:function(e){t.setScrollLeft(t._oSliderHorizontal._getValue(0,parseInt(e.sValue,10)))}})):t.setScrollLeft(this._getValue(0,e.nPos))}})),n.elScrollBar&&(this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height(),this._oSliderVertical=new jindo.Slider(n.elTrack,{sClassPrefix:e,bVertical:!0,nMinValue:0,nMaxValue:this._nScrollHeight}),this._oSliderVertical._oTransition=(new jindo.Transition).fps(30),this._oSliderVertical.attach({beforeChange:function(e){var i=jindo.$Element(this.getTrack()).height()-jindo.$Element(this.getThumb(e.nIndex)).height();e.nPos=Math.min(e.nPos,i),e.nPos=Math.max(e.nPos,0),e.bJump?(e.stop(),this._oTransition.abort().start(200,this.getThumb(e.nIndex),{"@top":jindo.Effect.easeOut(e.nPos+"px")}).attach({playing:function(e){t.setScrollTop(t._oSliderVertical.values(0))}})):t.setScrollTop(this._getValue(0,e.nPos))}}))},_initRolloverArea:function(){var t=this,e=this.option("sClassPrefix"),i=this.option("sClassNameForRollover");this._oRolloverArea=new jindo.RolloverArea(this._el,{sClassName:i,sClassPrefix:e}).attach({over:function(e){e.stop(),t._onRollover("over",e.element)},down:function(e){e.stop(),t._onMouseDown(e.element),t._onRollover("down",e.element)},up:function(e){e.stop(),t._onMouseUp(e.element),t._onRollover("up",e.element)},out:function(e){e.stop(),t._onRollover("out",e.element)}})},reset:function(){var t=this.getSliderHorizontal(),e=this.getSliderVertical();t&&(this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width(),t.option("nMaxValue",this._nScrollWidth),this.setScrollLeft(0)),e&&(this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height(),e.option("nMaxValue",this._nScrollHeight),this.setScrollTop(0)),this._elBox.scrollLeft=0,this._elBox.scrollTop=0},hasScrollBarHorizontal:function(){var t=this.option("sClassPrefix"),e=this.getScrollBarHorizontal();if(e.elScrollBar){var i=jindo.$Element(e.elScrollBar);return i.visible()||i.hasClass(t+"show")}return!1},hasScrollBarVertical:function(){var t=this.option("sClassPrefix"),e=this.getScrollBarVertical();if(e.elScrollBar){var i=jindo.$Element(e.elScrollBar);return i.visible()||i.hasClass(t+"show")}return!1},setScrollTop:function(t){t=Math.min(t,this._nScrollHeight),t=Math.max(t,0);var e={sDirection:"top",nPosition:t=Math.round(t)};jindo.$Element(this._elContent).css("top",-1*e.nPosition+"px");var i=this.getSliderVertical();i&&i.values(0,e.nPosition,!1),this._fireScrollEvent(e)},setScrollLeft:function(t){t=Math.min(t,this._nScrollWidth),t=Math.max(t,0);var e={sDirection:"left",nPosition:t=Math.round(t)};jindo.$Element(this._elContent).css("left",-1*e.nPosition+"px");var i=this.getSliderHorizontal();i&&i.values(0,e.nPosition,!1),this._fireScrollEvent(e)},setScrollTopBy:function(t){this.setScrollTop(this.getScrollTop()+t)},setScrollLeftBy:function(t){this.setScrollLeft(this.getScrollLeft()+t)},getScrollTop:function(t){return-1*parseInt(jindo.$Element(this._elContent).css("top"),10)},getScrollLeft:function(t){return-1*parseInt(jindo.$Element(this._elContent).css("left"),10)},_getElementType:function(t){var e=this.option("sClassPrefix");return t.hasClass(e+"track")?"track":t.hasClass(e+"thumb")?"thumb":t.hasClass(e+"button-up")?"button-up":t.hasClass(e+"button-up")?"button-up":t.hasClass(e+"button-down")?"button-down":t.hasClass(e+"button-left")?"button-left":!!t.hasClass(e+"button-right")&&"button-right"},_fireScrollEvent:function(t){this.fireEvent("scroll",t)},_onWheel:function(t){if(this._bMouseEnter){t.stop(jindo.$Event.CANCEL_DEFAULT);var e=t.mouse().delta,i=e/Math.abs(e)*-1,n=Math.ceil(Math.abs(e))*i*this.option("nDelta"),s=this.hasScrollBarHorizontal(),o=this.hasScrollBarVertical();(s||o)&&(this.hasScrollBarVertical()&&this._bIsEventAttachedForVertical?this.setScrollTop(this.getScrollTop()+n):this.setScrollLeft(this.getScrollLeft()+n))}},_onMouseDown:function(t){var e,i=jindo.$Element(t),n=this;switch(this._getElementType(i)){case"button-up":e=function(t){n.setScrollTopBy(~~(-1*t))};break;case"button-down":e=function(t){n.setScrollTopBy(t)};break;case"button-left":e=function(t){n.setScrollLeftBy(~~(-1*t))};break;case"button-right":e=function(t){n.setScrollLeftBy(t)};break;default:return}this._oTimer.start((function(){return e(16),!0}),100)},_onMouseUp:function(t){this._oTimer.abort()},_onMouseEnter:function(t){this._bMouseEnter=!0},_onMouseLeave:function(t){this._bMouseEnter=!1},_onRollover:function(t,e){var i=jindo.$Element(e),n=this.option("sClassPrefix"),s=this._getElementType(i);switch(t){case"over":i.addClass(n+s+"-over");break;case"down":i.addClass(n+s+"-hold");break;case"up":i.removeClass(n+s+"-hold");break;case"out":i.removeClass(n+s+"-over")}}}).extend(jindo.UIComponent),jindo.Tree=jindo.$Class({_bIsActivating:!1,_sTemplate:null,_htNodeData:null,_el:null,_elSelectedNode:null,$init:function(t,e){this.option({sClassPrefix:"tree-",sEventSelect:"click",sEventExpand:"dblclick",bExpandOnSelect:!0,bActivateOnload:!0}),this.option(e||{});var i=this.option("sClassPrefix");this.htClassName={sNode:i+"node",sLastNode:i+"last-node",sHasChild:i+"has-child",sButton:i+"button",sLabel:i+"label",sSelected:i+"selected",sCollapsed:i+"collapsed"},this.setNodeTemplate('<li class="{=sNodeClass}{if bLastNode} {=sLastNodeClass}{/if}"><div{if bHasChild} class="{=sHasChildClass}"{/if}><button class="{=sButtonClass}">+</button><span class="{=sLabelClass}" unselectable="on">{=sText}</span></div></li>'),this._htNodeData={},t=jindo.$(t),this._setRootList(t),this._wfSelectHandler=jindo.$Fn(this._onSelectEvent,this),this._wfExpandHandler=jindo.$Fn(this._onExpandEvent,this),this._makeNodeDataKeyFromHTML(),this.paintAllNodes();var n=jindo.$$.getSingle("."+this.htClassName.sNode+" > ."+this.htClassName.sSelected,this.getRootList());n&&this._setSelectedNode(this.getNode(n)),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){var t=this.getRootList();this._wfSelectHandler.attach(t,this.option("sEventSelect")),this._wfExpandHandler.attach(t,this.option("sEventExpand"))},_onDeactivate:function(){var t=this.getRootList();this._wfSelectHandler.detach(t,this.option("sEventSelect")),this._wfExpandHandler.detach(t,this.option("sEventExpand"))},_onSelectEvent:function(t){var e=t.element,i=this.getNode(e);i&&((jindo.$$.test(e,"."+this.htClassName.sButton)?e:jindo.$$.getSingle("! ."+this.htClassName.sButton,e))?this.isCollapsed(i)?this.expandNode(i):this.collapseNode(i):(jindo.$$.test(e,"."+this.htClassName.sLabel)?e:jindo.$$.getSingle("! ."+this.htClassName.sLabel,e))&&this.getPartsOfNode(i).elItem&&this.fireEvent(t.type,{element:i,weEvent:t})&&this.selectNode(i))},_onExpandEvent:function(t){var e=t.element,i=this.getNode(e);if(i&&this.hasChild(i)&&(jindo.$$.test(e,"."+this.htClassName.sLabel)?e:jindo.$$.getSingle("! ."+this.htClassName.sLabel,e))){var n={element:i,weEvent:t},s=this.getPartsOfNode(i);s.elItem&&jindo.$Element(s.elItem).visible()&&(this.isCollapsed(i)?this.fireEvent(t.type,n)&&this.expandNode(i):this._bExpandOnSelect||this.fireEvent(t.type,n)&&this.collapseNode(i))}},paintNode:function(t,e){if(void 0===e&&(e=!0),this._paintNode(t),e)for(var i=this.getChildNodes(t),n=0;n<i.length;n++)this.paintNode(i[n]);return this},paintAllNodes:function(t){return this.paintNode(t||this.getRootNode()),this},_paintNode:function(t){var e=this.getPartsOfNode(t),i=this.getChildNodes(t),n=this.getNodeData(t),s=jindo.$Element(t),o=jindo.$Element(e.elItem);if(delete n._aChildren,i.length>0){o.addClass(this.htClassName.sHasChild),n._aChildren=[];var a=this;jindo.$A(i).forEach((function(t,e){n._aChildren.push(a.getNodeData(t))}))}else o.removeClass(this.htClassName.sHasChild),e.elChild&&e.elChild.parentNode.removeChild(e.elChild);n.bLastNode=!jindo.$$.getSingle("~ ."+this.htClassName.sNode,t),n.bLastNode?s.addClass(this.htClassName.sLastNode):s.removeClass(this.htClassName.sLastNode),t.parentNode.style.zoom=1},getNodeTemplate:function(){return this._sTemplate},setNodeTemplate:function(t){return this._sTemplate=t,this},getChildListOfNode:function(t){return jindo.$$.getSingle("ul",t)},getRootList:function(){return this._el},_setRootList:function(t){this._el=t},getNode:function(t){var e=jindo.$$.test(t,"."+this.htClassName.sNode)?t:jindo.$$.getSingle("! ."+this.htClassName.sNode,t);return e&&jindo.$Element(e).isChildOf(this.getRootList())?e:null},getPartsOfNode:function(t){var e=jindo.$$("> *",t);return{elItem:e[0],elChild:e[1]}},getNodeType:function(t){return t===this.getRootNode()?"root":this.getChildNodes(t).length>0?"internal":"leaf"},getRootNode:function(){return this._elRootNode?this._elRootNode:(this._elRootNode=jindo.$$.getSingle("."+this.htClassName.sNode,this.getRootList()),this._elRootNode)},getAllNodes:function(){return jindo.$$("."+this.htClassName.sNode,this.getRootList())},getChildNodes:function(t){var e=this.getChildListOfNode(t);return e?jindo.$$("> ."+this.htClassName.sNode,e):[]},hasChild:function(t){var e=this.getPartsOfNode(t);return!(!e.elChild||!e.elChild.getElementsByTagName("li")[0])},getParentNode:function(t){return t===this.getRootNode()?null:this.getNode(t.parentNode)},getPreviousNode:function(t){var e=jindo.$$.getSingle("!~ ."+this.htClassName.sNode,t);return e?this.getNode(e):null},getNextNode:function(t){var e=jindo.$$.getSingle("~ ."+this.htClassName.sNode,t);return e?this.getNode(e):null},getSelectedNode:function(){return this._elSelectedNode},_setSelectedNode:function(t){this._elSelectedNode=t},isCollapsed:function(t){return jindo.$Element(t).hasClass(this.htClassName.sCollapsed)},getNodeDepth:function(t){for(var e=-1;t&&t!=this.getRootList();t=t.parentNode)jindo.$$.test(t,"."+this.htClassName.sNode)&&e++;return e},setNodeData:function(t,e){var i=this._getNodeDataKey(t);for(var n in delete e._aChildren,delete e.sLabel,e)this._htNodeData[i][n]=e[n];return this},getNodeLabelElement:function(t){return jindo.$$.getSingle("."+this.htClassName.sLabel,t)},getNodeLabel:function(t){return jindo.$Element(this.getNodeLabelElement(t)).html()},setNodeLabel:function(t,e){var i=this._getNodeDataKey(t);return this._htNodeData[i].sLabel=e,jindo.$Element(this.getNodeLabelElement(t)).html(e),this},_makeNodeDataKeyFromHTML:function(){for(var t=this.getAllNodes(),e=0;e<t.length;e++){var i=t[e];this._makeNodeDataKey(i),this._makeNodeData(i)}},_makeNodeDataKey:function(t){var e=jindo.$Element(t);if(this._getNodeDataKey(t))return!1;var i=this.option("sClassPrefix")+("data-"+(new Date).getTime()+parseInt(1e7*Math.random(),10)).toString();e.addClass(i);var n=this._getNodeDataKey(t);return this._htNodeData[n]={},n},_makeNodeData:function(t){var e=this.getNodeData(t);e.element=t,e.sLabel=jindo.$Element(this.getNodeLabelElement(t)).text(),e.bLastNode=!jindo.$$.getSingle("~ ."+this.htClassName.sNode,t)},_getNodeDataKey:function(t){var e=t.className,i=this.option("sClassPrefix");return new RegExp("("+i+"data-[0-9]+)").test(e)?RegExp.$1:null},getNodeData:function(t){return t?this._htNodeData[this._getNodeDataKey(t)]:this._htNodeData},_clearNodeData:function(t){var e=this.getParentNode(t),i=this.getNodeData(t),n=this._getNodeDataKey(t);if(e){var s=this.getNodeData(e);if(s){var o=jindo.$A(s._aChildren).indexOf(i);s._aChildren.splice(o,1)}}var a=this;this.hasChild(t)&&jindo.$A(this.getChildNodes(t)).forEach((function(t){a._clearNodeData(t)})),delete this._htNodeData[n]},expandNode:function(t,e){if(this.fireEvent("beforeExpand",{element:t})){var i=this.getPartsOfNode(t),n=[];jindo.$$.test(i.elItem,"."+this.htClassName.sHasChild)&&n.push(t),e&&(n=n.concat(jindo.$$("."+this.htClassName.sHasChild,t)));for(var s,o=0;s=n[o];o++){var a=this.getNode(s);jindo.$Element(a).removeClass(this.htClassName.sCollapsed),this.fireEvent("expand",{element:a})}return this}},collapseNode:function(t,e){if(this.fireEvent("beforeCollapse",{element:t})){var i=this.getPartsOfNode(t),n=[];jindo.$$.test(i.elItem,"."+this.htClassName.sHasChild)&&n.push(t),e&&(n=n.concat(jindo.$$("."+this.htClassName.sHasChild,t)));for(var s,o=0;s=n[o];o++){var a=this.getNode(s);jindo.$Element(a).addClass(this.htClassName.sCollapsed),this.fireEvent("collapse",{element:a})}return this}},selectNode:function(t){var e=this.getPartsOfNode(t),i=this.getSelectedNode(),n=e.elItem;if(!this.fireEvent("beforeSelect",{element:t}))return!1;if(i!=t&&(this.deselectNode(),jindo.$Element(n).addClass(this.htClassName.sSelected),this._setSelectedNode(t)),this.fireEvent("select",{element:t}),this.option("bExpandOnSelect")&&i!=t&&this.isCollapsed(t)){var s=this;this._bExpandOnSelect=!0,setTimeout((function(){s._bExpandOnSelect=!1}),500),this.expandNode(t)}return!0},deselectNode:function(){var t=this.getSelectedNode();return t&&jindo.$Element(this.getPartsOfNode(t).elItem).removeClass(this.htClassName.sSelected),this._setSelectedNode(null),this},_createChild:function(t){var e=this.getChildListOfNode(t);e||(e=jindo.$("<ul>"),t.appendChild(e));try{return e}finally{e=null}},removeNode:function(t){if(!t||t===this.getRootNode())return this.clearNode(t),this;var e=this.getParentNode(t);return this._clearNodeData(t),t.parentNode.removeChild(t),this.selectNode(e),this._paintNode(e),this},clearNode:function(t){var e=this.getChildListOfNode(t);if(e){for(var i,n=e.getElementsByTagName("li"),s=0;i=n[s];s++)this._clearNodeData(i);return e.parentNode.removeChild(e),this._paintNode(t),!0}return!1},clearTree:function(){return this.clearNode(this.getRootNode()),this},_moveNodes:function(t,e,i){for(var n,s=0;n=e[s];s++)i(n)},appendNode:function(t,e){if(!(e instanceof Array))return arguments.callee.call(this,t,[e]);var i=this,n=this._createChild(t);return this._moveNodes(t,e,(function(t){var e;e=i.getParentNode(t),n.appendChild(t),e&&(i.paintNode(e,!1),jindo.$A(i.getChildNodes(e)).forEach((function(t){i.paintNode(t,!1)})))})),this.paintNode(t,!1),jindo.$A(this.getChildNodes(t)).forEach((function(t){i.paintNode(t,!1)})),this},insertNodeBefore:function(t,e){if(t!=this.getRootNode()){if(!(e instanceof Array))return arguments.callee.call(this,t,[e]);var i=this,n=t.parentNode;return this._moveNodes(t,e,(function(e){var s;s=i.getNode(n),n.insertBefore(e,t),s&&jindo.$A(i.getChildNodes(s)).forEach((function(t){i.paintNode(t,!1)}))})),this}},insertNodeAfter:function(t,e){if(t!=this.getRootNode()){if(!(e instanceof Array))return arguments.callee.call(this,t,[e]);var i=this,n=t.parentNode,s=t;return this._moveNodes(t,e,(function(t){var e;e=i.getNode(n),n.insertBefore(t,s.nextSibling),s=t,e&&jindo.$A(i.getChildNodes(e)).forEach((function(t){i.paintNode(t,!1)}))})),this}},_getCode:function(t){if(t instanceof Array){for(var e=[],i=this.getNodeTemplate(),n=0;n<t.length;n++){var s=t[n],o={sTemplate:i,htData:s};this.fireEvent("beforeProcessData",o);var a={sNodeClass:this.htClassName.sNode,bLastNode:n==t.length-1,sLastNodeClass:this.htClassName.sLastNode,bHasChild:void 0!==s._aChildren&&s._aChildren.length>0,sHasChildClass:this.htClassName.sHasChild,sCollapsedClass:this.htClassName.sCollapsed,sButtonClass:this.htClassName.sButton,sLabelClass:this.htClassName.sLabel,sText:s.sLabel},h=jindo.$Template(o.sTemplate).process(a);h=this._getChildCode(s._aChildren,h),e.push(h)}return e.join("\n")}},_getChildCode:function(t,e){var i=t?this._getCode(t):"";if(i){var n=!1;e=e.replace(/(<ul(\s[^>]*)*>)(<\/ul>)/i,(function(t,e,s,o){return n=!0,e+i+o})),n||(e=e.replace(/<\/li>/i,(function(t){return"\n<ul>"+i+"</ul>\n"+t})))}return e},_setData:function(t,e){for(var i=jindo.$$("> ."+this.htClassName.sNode,t),n=0;n<i.length;n++){var s=i[n],o=e[n],a=this._makeNodeDataKey(s);this._htNodeData[a]=e[n],void 0!==o._aChildren&&this._setData(this.getChildListOfNode(s),o._aChildren)}},createNode:function(t){var e=jindo.$("<ul>");e.innerHTML=this._getCode(t);var i=jindo.$$("> ."+this.htClassName.sNode,e);return this._setData(e,t),i},getNodeRawData:function(t){return this.getNodeData(t)},getSelectCount:function(){return this}}).extend(jindo.UIComponent),jindo.TextRange=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._bFocused=!1,this._wfFocus=jindo.$Fn((function(){this._bFocused=!0}),this),this._wfBlur=jindo.$Fn((function(){this._bFocused=!1}),this),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){this._wfFocus.attach(this._el,"focus").attach(this._el,"keydown"),this._wfBlur.attach(this._el,"blur")},_onDeactivate:function(){this._wfFocus.detach(this._el,"focus").detach(this._el,"keydown"),this._wfBlur.detach(this._el,"blur")},hasFocus:function(){return this._bFocused},getSelection:function(){var t=this._el;this._bFocused||this._el.focus();var e=[-1,-1];if(isNaN(this._el.selectionStart)){for(var i=document.selection.createRange().duplicate(),n=t.value.length,s=i.text.length,o=0;o<n&&i.parentElement()===t;o++)i.moveStart("character",-1);e[1]=i.text.length,e[0]=e[1]-s}else e[0]=t.selectionStart,e[1]=t.selectionEnd;return this.setSelection(e[0],e[1]),e},setSelection:function(t,e){var i=this._el;if(void 0===e&&(e=t),i.setSelectionRange)i.setSelectionRange(t,e);else if(i.createTextRange){var n=i.createTextRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",e-t),n.select()}},copy:function(){this._bFocused||this._el.focus();var t=this.getSelection();return this._el.value.substring(t[0],t[1])},paste:function(t){this._bFocused||this._el.focus();var e=this._el,i=this.getSelection(),n=e.value,s=n.substr(0,i[0]),o=n.substr(i[1]);n=s+t+o,e.value=n,this.setSelection(i[0]+t.length)},cut:function(){var t=this.copy();return this.paste(""),t}}).extend(jindo.UIComponent),jindo.WatchInput=jindo.$Class({_bTimerRunning:!1,_bFocused:!1,_sPrevValue:"",$init:function(t,e){this.option({nInterval:100,bUseTimerOnIE:!1,sKeyEvent:"keyup",bPermanent:!1,bActivateOnload:!0}),this.option(e||{}),this._elInput=jindo.$(t),this._oTimer=new jindo.Timer,this._bIE=jindo.$Agent().navigator().ie,this._wfFocus=jindo.$Fn(this._onFocus,this),this._wfBlur=jindo.$Fn(this._onBlur,this),this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this),this._wfStartTimer=jindo.$Fn(this._startTimer,this),this._wfStopTimer=jindo.$Fn(this._stopTimer,this),this.option("bActivateOnload")&&this.activate(!0)},getInput:function(){return this._elInput},setInputValue:function(t){return this.getInput().value=t,this.setCompareValue(t),this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(t){return this._sPrevValue=t,this},fireChangeEvent:function(){var t=this.getInput(),e=t.value;return this.setCompareValue(e),this.fireEvent("change",{elInput:t,sText:e}),this},start:function(t){return this.activate(t||!1)},stop:function(){return this.deactivate()},_onActivate:function(t){this.setCompareValue("");var e=this.getInput();if(this._wfFocus.attach(e,"focus"),this._bIE&&!this.option("bUseTimerOnIE"))this.fireEvent("start"),this._wfKeyEvent.attach(e,this.option("sKeyEvent"));else{if(this._isTimerRunning())return;this.fireEvent("start"),this.option("bPermanent")?this._startTimer():(this._wfStartTimer.attach(e,"focus"),this._wfStopTimer.attach(e,"blur"))}this._wfBlur.attach(e,"blur"),t&&this.compare()},_onDeactivate:function(){var t=this.getInput();this._wfFocus.detach(t,"focus"),this._wfKeyEvent.detach(t,this.option("sKeyEvent")),this._stopTimer(),this._wfStartTimer.detach(t,"focus"),this._wfStopTimer.detach(t,"blur"),this._wfBlur.detach(t,"blur"),this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(t){return this.option("nInterval",t),this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(!this._isTimerRunning()){this._bTimerRunning=!0,this.fireEvent("timerStart"),this.compare();var t=this;this._oTimer.start((function(){return t.compare(),!0}),this.getInterval())}},_stopTimer:function(){this._isTimerRunning()&&(this._oTimer.abort(),this._bTimerRunning=!1,this.compare(),this.fireEvent("timerStop"))},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=!0,this.fireEvent("focus")},_onBlur:function(){this._bFocused=!1,this.fireEvent("blur")},compare:function(){return this.getInput().value!=this.getCompareValue()&&this.fireChangeEvent(),this}}).extend(jindo.UIComponent),jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null,this._nLatest=null,this._nRemained=0,this._nDelay=null,this._fRun=null,this._bIsRunning=!1},start:function(t,e){return this.abort(),this._nRemained=0,this._nDelay=e,this._fRun=t,this._bIsRunning=!0,this._nLatest=this._getTime(),this.fireEvent("wait"),this._excute(this._nDelay,!1),!0},isRunning:function(){return this._bIsRunning},_getTime:function(){return(new Date).getTime()},_clearTimer:function(){var t=!1;return this._nTimer&&(clearInterval(this._nTimer),this._bIsRunning=!1,t=!0),this._nTimer=null,t},abort:function(){var t=this._clearTimer();return t&&(this.fireEvent("abort"),this._fRun=null),t},pause:function(){var t=this._getTime()-this._nLatest;return this._nRemained=Math.max(this._nDelay-t,0),this._clearTimer()},_excute:function(t,e){var i=this;this._clearTimer(),this._bIsRunning=!0,this._nTimer=setInterval((function(){if(i._nTimer){i.fireEvent("run");var t=i._fRun();if(i._nLatest=i._getTime(),!t)return clearInterval(i._nTimer),i._nTimer=null,i._bIsRunning=!1,void i.fireEvent("end");i.fireEvent("wait"),e&&i._excute(i._nDelay,!1)}}),t)},resume:function(){return!(!this._fRun||this.isRunning())&&(this._bIsRunning=!0,this.fireEvent("wait"),this._excute(this._nRemained,!0),this._nRemained=0,!0)}}).extend(jindo.Component),jindo.LayerPosition=jindo.$Class({$init:function(t,e,i){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:!1}),this.option(i||{}),this.setElement(t),e&&this.setLayer(e),t&&e&&this.setPosition(),this._wfSetPosition=jindo.$Fn((function(){var t=this._elLayer;t&&this._welLayer.visible()&&this.fireEvent("beforeAdjust",{elLayer:t,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})&&(this.setPosition(),this.fireEvent("adjust",{elLayer:t,htCurrentPosition:this.getCurrentPosition()}))}),this),this.option("bAuto")&&this._wfSetPosition.attach(window,"scroll").attach(window,"resize")},getElement:function(){return this._el},setElement:function(t){return this._el=jindo.$(t),this._wel=jindo.$Element(t),this},getLayer:function(){return this._elLayer},setLayer:function(t){return this._elLayer=jindo.$(t),this._welLayer=jindo.$Element(t),document.body.appendChild(this._elLayer),this},_isPosition:function(t,e){return t.sPosition.indexOf(e)>-1},_setLeftRight:function(t,e){var i=this.getElement(),n=this.getLayer(),s=i.offsetWidth,o=n.offsetWidth;i==document.body&&(s=jindo.$Document().clientSize().width);var a=this._isPosition(t,"left"),h=this._isPosition(t,"right"),l=this._isPosition(t,"inside");return a?l?e.nLeft+=t.nLeft:(e.nLeft-=o,e.nLeft-=t.nLeft):h?(e.nLeft+=s,l?(e.nLeft-=o,e.nLeft-=t.nLeft):e.nLeft+=t.nLeft):("left"==t.sAlign&&(e.nLeft+=t.nLeft),"center"==t.sAlign&&(e.nLeft+=(s-o)/2),"right"==t.sAlign&&(e.nLeft+=s-o,e.nLeft-=t.nLeft)),e},_setVerticalAlign:function(t,e){var i=this.getElement(),n=this.getLayer(),s=i.offsetHeight,o=n.offsetHeight;switch(i==document.body&&(s=jindo.$Document().clientSize().height),t.sValign){case"top":e.nTop+=t.nTop;break;case"middle":e.nTop+=(s-o)/2;break;case"bottom":e.nTop+=s-o-t.nTop}return e},_adjustScrollPosition:function(t){if(this.getElement()==document.body){var e=jindo.$Document().scrollPosition();t.nTop+=e.top,t.nLeft+=e.left}return t},getPosition:function(t){"object"!=typeof t&&(t=this.option()),void 0===t.nTop&&(t.nTop=0),void 0===t.nLeft&&(t.nLeft=0);var e,i=this._isPosition(t,"center"),n=this._isPosition(t,"inside"),s=this._isPosition(t,"top"),o=this._isPosition(t,"bottom");this._isPosition(t,"left")&&(e="left"),this._isPosition(t,"right")&&(e="right"),s&&(e="top"),o&&(e="bottom"),i&&(e="center");var a,h=this.getElement(),l=jindo.$Element(h),r=this.getLayer(),c=jindo.$Element(r),u=l.offset(),d=h.offsetWidth,f=h.offsetHeight,_=r.offsetWidth,p=r.offsetHeight,g={nTop:u.top,nLeft:u.left};switch(h==document.body&&(d=(a=jindo.$Document().clientSize()).width,f=a.height),_+=parseInt(c.css("marginLeft"),10)+parseInt(c.css("marginRight"),10)||0,p+=parseInt(c.css("marginTop"),10)+parseInt(c.css("marginBottom"),10)||0,e){case"center":g.nTop+=(f-p)/2,g.nTop+=t.nTop,g.nLeft+=(d-_)/2,g.nLeft+=t.nLeft;break;case"top":n?g.nTop+=t.nTop:g.nTop-=t.nTop+p,g=this._setLeftRight(t,g);break;case"bottom":g.nTop+=f,n?g.nTop-=t.nTop+p:g.nTop+=t.nTop,g=this._setLeftRight(t,g);break;case"left":n?g.nLeft+=t.nLeft:g.nLeft-=t.nLeft+_,g=this._setVerticalAlign(t,g);break;case"right":g.nLeft+=d,n?g.nLeft-=t.nLeft+_:g.nLeft+=t.nLeft,g=this._setVerticalAlign(t,g)}return g=this._adjustScrollPosition(g)},setPosition:function(t){var e=jindo.$Element(this.getLayer()),i=e.visible();return i||e.show(),e.css("left","-9999px").css("top","0px"),void 0===t&&(t=this.getPosition()),this.option("bAuto")&&(t=this._adjustPosition(t)),e.css("left",t.nLeft+"px").css("top",t.nTop+"px"),i||e.hide(),this},getCurrentPosition:function(){var t=jindo.$Element(this.getLayer());return{nTop:parseInt(t.css("top"),10),nLeft:parseInt(t.css("left"),10)}},_isFullyVisible:function(t){var e=this.getLayer(),i=jindo.$Element(e),n=jindo.$Document().scrollPosition(),s=n.top,o=n.left,a=jindo.$Document().clientSize(),h=e.offsetWidth+(parseInt(i.css("marginLeft"),10)+parseInt(i.css("marginRight"),10)||0),l=e.offsetHeight+(parseInt(i.css("marginTop"),10)+parseInt(i.css("marginBottom"),10)||0);return t.nLeft>=0&&t.nTop>=0&&a.width>=t.nLeft-o+h&&a.height>=t.nTop-s+l},_mirrorHorizontal:function(t){if("center"==t.sAlign||"inside-center"==t.sPosition)return t;var e={};for(var i in t)e[i]=t[i];return this._isPosition(e,"right")?e.sPosition=e.sPosition.replace(/right/,"left"):this._isPosition(e,"left")?e.sPosition=e.sPosition.replace(/left/,"right"):"right"==e.sAlign?e.sAlign="left":"left"==e.sAlign&&(e.sAlign="right"),e},_mirrorVertical:function(t){if("middle"==t.sValign||"inside-center"==t.sPosition)return t;var e={};for(var i in t)e[i]=t[i];return this._isPosition(e,"top")?e.sPosition=e.sPosition.replace(/top/,"bottom"):this._isPosition(e,"bottom")?e.sPosition=e.sPosition.replace(/bottom/,"top"):"top"==e.sValign?e.sValign="bottom":"bottom"==e.sValign&&(e.sValign="top"),e},_adjustPosition:function(t){var e=this.option(),i=[];i.push(t),i.push(this.getPosition(this._mirrorHorizontal(e))),i.push(this.getPosition(this._mirrorVertical(e))),i.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(e))));for(var n,s=0;n=i[s];s++)if(this._isFullyVisible(n)){t=n;break}return t}}).extend(jindo.Component),jindo.Foggy=jindo.$Class({_elFog:null,_bFogAppended:!1,_oExcept:null,_bFogVisible:!1,_oTransition:null,$init:function(t){this.option({sClassName:"fog",nShowDuration:200,nShowOpacity:.5,nHideDuration:200,nHideOpacity:0,fShowEffect:jindo.Effect.linear,fHideEffect:jindo.Effect.linear,nFPS:15}),this.option(t||{}),this._elFog=jindo.$('<div class="'+this.option("sClassName")+'">'),this._welFog=jindo.$Element(this._elFog),document.body.insertBefore(this._elFog,document.body.firstChild),this._welFog.opacity(this.option("nHideOpacity")),this._welFog.hide(),this._oExcept={},this._oTransition=(new jindo.Transition).fps(this.option("nFPS")),this._fOnResize=jindo.$Fn(this._fitFogToDocument,this),this._fOnScroll=jindo.$Fn(this._fitFogToDocumentScrollSize,this)},_getScroll:function(t){return{top:window.pageYOffset||document[t._docKey].scrollTop,left:window.pageXOffset||document[t._docKey].scrollLeft}},_fitFogToDocument:function(){var t=jindo.$Document();this._elFog.style.left=this._getScroll(t).left+"px",this._elFog.style.width="100%";var e=this;clearTimeout(this._nTimer),this._nTimer=null,this._nTimer=setTimeout((function(){var i=t.clientSize();e._elFog.style.top=e._getScroll(t).top+"px",e._elFog.style.height=i.height+"px",e._elFog.style.left=e._getScroll(t).left+"px"}),100)},_fitFogToDocumentScrollSize:function(){var t=jindo.$Document().scrollSize();this._elFog.style.left="0",this._elFog.style.top="0",this._elFog.style.width=t.width+"px",this._elFog.style.height=t.height+"px"},getFog:function(){return this._elFog},isShown:function(){return this._bFogVisible},show:function(t){if(!this._bFogVisible&&this.fireEvent("beforeShow")){if(t)this._oExcept.element=t,"static"==jindo.$Element(t).css("position")&&(t.style.position="relative"),this._oExcept.position=t.style.position,this._oExcept.zIndex=t.style.zIndex,t.style.zIndex=32001;this._elFog.style.zIndex=32e3,this._elFog.style.display="none",this._fitFogToDocument(),this._fOnResize.attach(window,"resize"),this._fOnScroll.attach(window,"scroll"),this._elFog.style.display="block";var e=this;this._oTransition.abort().start(this.option("nShowDuration"),this._elFog,{"@opacity":this.option("fShowEffect")(this.option("nShowOpacity"))}).start((function(){e._bFogVisible=!0,e.fireEvent("show")}))}},hide:function(){if(this._bFogVisible&&this.fireEvent("beforeHide")){var t=this;this._oTransition.abort().start(this.option("nHideDuration"),this._elFog,{"@opacity":this.option("fHideEffect")(this.option("nHideOpacity"))}).start((function(){t._elFog.style.display="none";var e=t._oExcept.element;e&&(e.style.position=t._oExcept.position,e.style.zIndex=t._oExcept.zIndex),t._oExcept={},t._fOnResize.detach(window,"resize"),t._fOnScroll.detach(window,"scroll"),t._bFogVisible=!1,t.fireEvent("hide")}))}}}).extend(jindo.Component),jindo.Effect=function(t){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var e=/^(\-?[0-9\.]+)(%|px|pt|em)?$/,i=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,n=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,s=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,o=function(t){var o,a=t;return e.test(t)?(a=parseFloat(t),o=RegExp.$2||""):i.test(t)?(a=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],o="color"):n.test(t=t.replace(s,"#$1$1$2$2$3$3"))&&(a=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],o="color"),{nValue:a,sUnit:o}};return function(e,i){var n;if(arguments.length>1?(e=o(e),i=o(i),n=i.sUnit):(i=o(e),e=null,n=i.sUnit),e&&i&&e.sUnit!=i.sUnit)throw new Error("unit error");e=e&&e.nValue,i=i&&i.nValue;var s=function(s){var o=t(s),a=function(t,e){return(e-t)*o+t+n};if("color"==n){var h=Math.max(0,Math.min(255,parseInt(a(e[0],i[0]),10)))<<16;h|=Math.max(0,Math.min(255,parseInt(a(e[1],i[1]),10)))<<8,h=(h|=Math.max(0,Math.min(255,parseInt(a(e[2],i[2]),10)))).toString(16).toUpperCase();for(var l=0;6-h.length;l++)h="0"+h;return"#"+h}return a(e,i)};return null===e&&(s.setStart=function(t){if((t=o(t)).sUnit!=n)throw new Error("unit eror");e=t.nValue}),s}},jindo.Effect.linear=jindo.Effect((function(t){return t})),jindo.Effect.easeInSine=jindo.Effect((function(t){return 1==t?1:1-Math.cos(t*(Math.PI/2))})),jindo.Effect.easeOutSine=jindo.Effect((function(t){return Math.sin(t*(Math.PI/2))})),jindo.Effect.easeInOutSine=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInSine(0,1)(2*t):.5*jindo.Effect.easeOutSine(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInSine=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutSine(0,1)(2*t):.5*jindo.Effect.easeInSine(0,1)(2*t-1)+.5})),jindo.Effect.easeInQuad=jindo.Effect((function(t){return t*t})),jindo.Effect.easeOutQuad=jindo.Effect((function(t){return-t*(t-2)})),jindo.Effect.easeInOutQuad=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInQuad(0,1)(2*t):.5*jindo.Effect.easeOutQuad(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInQuad=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutQuad(0,1)(2*t):.5*jindo.Effect.easeInQuad(0,1)(2*t-1)+.5})),jindo.Effect.easeInCubic=jindo.Effect((function(t){return Math.pow(t,3)})),jindo.Effect.easeOutCubic=jindo.Effect((function(t){return Math.pow(t-1,3)+1})),jindo.Effect.easeInOutCubic=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeIn(0,1)(2*t):.5*jindo.Effect.easeOut(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInCubic=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOut(0,1)(2*t):.5*jindo.Effect.easeIn(0,1)(2*t-1)+.5})),jindo.Effect.easeInQuart=jindo.Effect((function(t){return Math.pow(t,4)})),jindo.Effect.easeOutQuart=jindo.Effect((function(t){return-(Math.pow(t-1,4)-1)})),jindo.Effect.easeInOutQuart=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInQuart(0,1)(2*t):.5*jindo.Effect.easeOutQuart(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInQuart=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutQuart(0,1)(2*t):.5*jindo.Effect.easeInQuart(0,1)(2*t-1)+.5})),jindo.Effect.easeInQuint=jindo.Effect((function(t){return Math.pow(t,5)})),jindo.Effect.easeOutQuint=jindo.Effect((function(t){return Math.pow(t-1,5)+1})),jindo.Effect.easeInOutQuint=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInQuint(0,1)(2*t):.5*jindo.Effect.easeOutQuint(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInQuint=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutQuint(0,1)(2*t):.5*jindo.Effect.easeInQuint(0,1)(2*t-1)+.5})),jindo.Effect.easeInCircle=jindo.Effect((function(t){return-(Math.sqrt(1-t*t)-1)})),jindo.Effect.easeOutCircle=jindo.Effect((function(t){return Math.sqrt(1-(t-1)*(t-1))})),jindo.Effect.easeInOutCircle=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInCircle(0,1)(2*t):.5*jindo.Effect.easeOutCircle(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInCircle=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutCircle(0,1)(2*t):.5*jindo.Effect.easeInCircle(0,1)(2*t-1)+.5})),jindo.Effect.easeInBack=jindo.Effect((function(t){var e=1.70158;return 1==t?1:t/1*(t/1)*((1+e)*t-e)})),jindo.Effect.easeOutBack=jindo.Effect((function(t){var e=1.70158;return 0===t?0:(t=t/1-1)*t*((e+1)*t+e)+1})),jindo.Effect.easeInOutBack=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInBack(0,1)(2*t):.5*jindo.Effect.easeOutBack(0,1)(2*t-1)+.5})),jindo.Effect.easeInElastic=jindo.Effect((function(t){var e=0,i=0;return 0===t?0:1==(t/=1)?1:(e||(e=.3),!i||i<1?(i=1,e/4):e/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t-1)*(2*Math.PI)/e))})),jindo.Effect.easeOutElastic=jindo.Effect((function(t){var e,i=0,n=0;return 0===t?0:1==(t/=1)?1:(i||(i=.3),!n||n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)})),jindo.Effect.easeInOutElastic=jindo.Effect((function(t){var e,i=0,n=0;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),!n||n<1?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)})),jindo.Effect.easeOutBounce=jindo.Effect((function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),jindo.Effect.easeInBounce=jindo.Effect((function(t){return 1-jindo.Effect.easeOutBounce(0,1)(1-t)})),jindo.Effect.easeInOutBounce=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInBounce(0,1)(2*t):.5*jindo.Effect.easeOutBounce(0,1)(2*t-1)+.5})),jindo.Effect.easeInExpo=jindo.Effect((function(t){return 0===t?0:Math.pow(2,10*(t-1))})),jindo.Effect.easeOutExpo=jindo.Effect((function(t){return 1==t?1:1-Math.pow(2,-10*t/1)})),jindo.Effect.easeInOutExpo=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeInExpo(0,1)(2*t):.5*jindo.Effect.easeOutExpo(0,1)(2*t-1)+.5})),jindo.Effect.easeOutInExpo=jindo.Effect((function(t){return t<.5?.5*jindo.Effect.easeOutExpo(0,1)(2*t):.5*jindo.Effect.easeInExpo(0,1)(2*t-1)+.5})),jindo.Effect._cubicBezier=function(t,e,i,n){return function(s){var o=3*t,a=3*(i-t)-o,h=1-o-a,l=3*e,r=3*(n-e)-l,c=1-l-r;function u(t){return((h*t+a)*t+o)*t}function d(t){return(3*h*t+2*a)*t+o}return function(t){return((c*t+r)*t+l)*t}(function(t,e){var i,n,s,o,a,h;for(s=t,h=0;h<8;h++){if(o=u(s)-t,Math.abs(o)<e)return s;if(a=d(s),Math.abs(a)<1e-6)break;s-=o/a}if((s=t)<(i=0))return i;if(s>(n=1))return n;for(;i<n;){if(o=u(s),Math.abs(o-t)<e)return s;t>o?i=s:n=s,s=.5*(n-i)+i}return s}(s,.005))}},jindo.Effect.cubicBezier=function(t,e,i,n){return jindo.Effect(jindo.Effect._cubicBezier(t,e,i,n))},jindo.Effect.cubicEase=jindo.Effect.cubicBezier(.25,.1,.25,1),jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(.42,0,1,1),jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,.58,1),jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(.42,0,.58,1),jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,.42,1,.58),jindo.Effect.overphase=jindo.Effect((function(t){return t/=.652785,(Math.sqrt((2-t)*t)+.1*t).toFixed(5)})),jindo.Effect.sinusoidal=jindo.Effect((function(t){return-Math.cos(t*Math.PI)/2+.5})),jindo.Effect.mirror=jindo.Effect((function(t){return t<.5?jindo.Effect.sinusoidal(0,1)(2*t):jindo.Effect.sinusoidal(0,1)(1-2*(t-.5))})),jindo.Effect.pulse=function(t){return jindo.Effect((function(e){return-Math.cos(e*(t-.5)*2*Math.PI)/2+.5}))},jindo.Effect.wave=function(t,e){return jindo.Effect((function(i){return(e||1)*Math.sin(t*(360*i)*Math.PI/180).toFixed(5)}))},jindo.Effect.easeIn=jindo.Effect.easeInCubic,jindo.Effect.easeOut=jindo.Effect.easeOutCubic,jindo.Effect.easeInOut=jindo.Effect.easeInOutCubic,jindo.Effect.easeOutIn=jindo.Effect.easeOutInCubic,jindo.Effect.bounce=jindo.Effect.easeOutBounce,jindo.Effect.elastic=jindo.Effect.easeInElastic,jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:!0,_bIsPlaying:!1,$init:function(t){this._aTaskQueue=[],this._oTimer=new jindo.Timer,this._oSleepTimer=new jindo.Timer,this.option({fEffect:jindo.Effect.linear,bCorrection:!1}),this.option(t||{})},fps:function(t){return arguments.length>0?(this._nFPS=t,this):this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){return this._aTaskQueue=[],this._oTimer.abort(),this._oSleepTimer.abort(),this._bIsPlaying&&this.fireEvent("abort"),this._bIsWaiting=!0,this._bIsPlaying=!1,this._htTaskToDo=null,this},start:function(t,e,i){return arguments.length>0&&this.queue.apply(this,arguments),this._prepareNextTask(),this},queue:function(t,e){var i;if("function"==typeof arguments[0])i={sType:"function",fTask:arguments[0]};else{var n=[];if(arguments[1]instanceof Array)n=arguments[1];else{var s=[];jindo.$A(arguments).forEach((function(t,e){e>0&&(s.push(t),e%2==0&&(n.push(s.concat()),s=[]))}))}i={sType:"task",nDuration:t,aList:[]};for(var o=0,a=n.length;o<a;o++){var h,l=[],r=n[o][1];for(var c in r)h=r[c],/^(@|style\.)(\w+)/i.test(c)?l.push(["style",RegExp.$2,h]):l.push(["attr",c,h]);i.aList.push({elTarget:n[o][0],aValue:l})}}return this._queueTask(i),this},pause:function(){return this._oTimer.abort()&&this.fireEvent("pause"),this},resume:function(){if(this._htTaskToDo){!1===this._bIsWaiting&&!0===this._bIsPlaying&&this.fireEvent("resume"),this._doTask(),this._bIsWaiting=!1,this._bIsPlaying=!0;var t=this;this._oTimer.start((function(){var e=!t._doTask();return e&&(t._bIsWaiting=!0,setTimeout((function(){t._prepareNextTask()}),0)),!e}),this._htTaskToDo.nInterval)}return this},precede:function(t,e,i){return this.start.apply(this,arguments),this},sleep:function(t,e){return void 0===e&&(e=function(){}),this._queueTask({sType:"sleep",nDuration:t,fCallback:e}),this._prepareNextTask(),this},_queueTask:function(t){this._aTaskQueue.push(t)},_dequeueTask:function(){var t=this._aTaskQueue.shift();if(t){if("task"==t.sType)for(var e=t.aList,i=0,n=e.length;i<n;i++)for(var s=e[i].elTarget,o=jindo.$Element(s),a=0,h=e[i].aValue,l=h.length;a<l;a++){var r=h[a][0],c=h[a][1],u=h[a][2];if("function"!=typeof u){var d=this.option("fEffect");u=u instanceof Array?d(u[0],u[1]):d(u),h[a][2]=u}if(u.setStart)if(this._isHTMLElement(s))switch(r){case"style":u.setStart(o.css(c));break;case"attr":u.setStart(o.$value()[c])}else u.setStart(s.getter(c))}return t}return null},_prepareNextTask:function(){if(this._bIsWaiting){var t=this._dequeueTask();if(t)switch(t.sType){case"task":this._bIsPlaying||this.fireEvent("start");var e=1e3/this._nFPS,i=e/t.nDuration;this._htTaskToDo={aList:t.aList,nRatio:0,nInterval:e,nGap:i,nStep:0,nTotalStep:Math.ceil(t.nDuration/e)},this.resume();break;case"function":this._bIsPlaying||this.fireEvent("start"),t.fTask(),this._prepareNextTask();break;case"sleep":this._bIsPlaying&&(this.fireEvent("sleep",{nDuration:t.nDuration}),t.fCallback());var n=this;this._oSleepTimer.start((function(){n.fireEvent("awake"),n._prepareNextTask()}),t.nDuration)}else this._bIsPlaying&&(this._bIsPlaying=!1,this.abort(),this.fireEvent("end"))}},_isHTMLElement:function(t){return"tagName"in t},_doTask:function(){for(var t=this._htTaskToDo,e=parseFloat(t.nRatio.toFixed(5),1),i=t.nStep,n=t.nTotalStep,s=t.aList,o={},a=this.option("bCorrection"),h=0,l=s.length;h<l;h++)for(var r=s[h].elTarget,c=jindo.$Element(r),u=0,d=s[h].aValue,f=d.length;u<f;u++){var _=d[u][0],p=d[u][1],g=d[u][2](e);if(this._isHTMLElement(r)){if(a){var m=/^\-?[0-9\.]+(%|px|pt|em)?$/.test(g)&&RegExp.$1||"";if(m){var v=parseFloat(g);v+=o[p]||0,v=parseFloat(v.toFixed(5)),h==l-1?g=Math.round(v)+m:(o[p]=v-Math.floor(v),g=parseInt(v,10)+m)}}switch(_){case"style":c.css(p,g);break;case"attr":c.$value()[p]=g}}else r.setter(p,g);this._bIsPlaying&&this.fireEvent("playing",{element:r,sKey:p,sValue:g,nStep:i,nTotalStep:n})}return t.nRatio=Math.min(t.nRatio+t.nGap,1),t.nStep+=1,1!=e}}).extend(jindo.Component),i=jindo.$Element.prototype.css,jindo.$Element.prototype.css=function(t,e){return"opacity"==t?void 0!==e?this.opacity(parseFloat(e)):this.opacity():void 0!==e?i.call(this,t,e):i.call(this,t)},jindo.DragArea=jindo.$Class({$init:function(t,e){this.option({sClassName:"draggable",bFlowOut:!0,bSetCapture:!0,nThreshold:0}),this.option(e||{}),this._el=t,this._bIE=jindo.$Agent().navigator().ie,this._htDragInfo={bPrepare:!1},this._bHandleDown=!1,this._bIsDragging=!1,this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this),this._wfOnDragStart=jindo.$Fn(this._onDragStart,this),this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this),this.activate()},_findDraggableElement:function(t){if(jindo.$$.test(t,"input[type=text], textarea, select"))return null;var e=this,i="."+this.option("sClassName"),n=jindo.$$.test(t,i)?t:jindo.$$.getSingle("! "+i,t);return function(t){return null!==t&&(e._el===document||e._el===t||jindo.$Element(e._el).isParentOf(t))}(n)||(n=null),n},isDragging:function(){return this._bIsDragging&&!this._htDragInfo.bPrepare},stopDragging:function(){return this._stopDragging(!0),this},_stopDragging:function(t){this._wfOnMouseMove.detach(document,"mousemove"),this._wfOnMouseUp.detach(document,"mouseup");var e=this._htDragInfo;if(this.isDragging()){var i=jindo.$Element(e.elDrag);this.fireEvent("dragEnd",{elArea:this._el,elHandle:e.elHandle,elDrag:e.elDrag,nX:parseInt(i.css("left"),10)||0,nY:parseInt(i.css("top"),10)||0,bInterupted:t})}this._bIsDragging=!1,this._bForceDrag=!1,e.bPrepare=!1,this._bIE&&this._elSetCapture&&(this._elSetCapture.releaseCapture(),this._elSetCapture=null)},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown"),this._wfOnDragStart.attach(this._el,"dragstart"),this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown"),this._wfOnDragStart.detach(this._el,"dragstart"),this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(t){return!!(t=this._findDraggableElement(t))&&(this._bForceDrag=!0,this._htDragInfo={bPrepare:!0,elHandle:t,elDrag:t},this._wfOnMouseMove.attach(document,"mousemove"),this._wfOnMouseUp.attach(document,"mouseup"),!0)},_onMouseDown:function(t){if(t.mouse().left&&!t.mouse().right){var e=this._findDraggableElement(t.element);if(e){var i=t.pos();this._htDragInfo={bPrepare:!0,nButton:t._event.button,elHandle:e,elDrag:e,nPageX:i.pageX,nPageY:i.pageY},this._bHandleDown=!0,this.fireEvent("handleDown",{elHandle:e,elDrag:e,weEvent:t})&&this._wfOnMouseMove.attach(document,"mousemove"),this._wfOnMouseUp.attach(document,"mouseup"),t.stop(jindo.$Event.CANCEL_DEFAULT)}}else this._stopDragging(!0)},_onMouseMove:function(t){this._bIsDragging=!0;var e,i,n=this._htDragInfo,s=t.pos();if(n.bPrepare){var o=this.option("nThreshold"),a={};if(!this._bForceDrag&&o)if(a.nPageX=s.pageX-n.nPageX,a.nPageY=s.pageY-n.nPageY,o>Math.sqrt(a.nPageX*a.nPageX+a.nPageY*a.nPageY))return;if(this._bIE&&this.option("bSetCapture")&&(this._elSetCapture=this._el===document?document.body:this._findDraggableElement(t.element),this._elSetCapture&&this._elSetCapture.setCapture(!1)),e={elArea:this._el,elHandle:n.elHandle,elDrag:n.elDrag,htDiff:a,weEvent:t},!this.fireEvent("dragStart",e))return void(this._bIsDragging=!1);var h=jindo.$Element(e.elDrag);n.bPrepare=!1,n.elHandle=e.elHandle,n.elDrag=e.elDrag,n.nX=parseInt(h.css("left"),10)||0,n.nY=parseInt(h.css("top"),10)||0;var l=h.offset();n.nClientX=l.left+h.width()/2,n.nClientY=l.top+h.height()/2}var r={nX:s.pageX-n.nPageX,nY:s.pageY-n.nPageY};if(this._bForceDrag&&(r.nX=s.clientX-n.nClientX,r.nY=s.clientY-n.nClientY),e={elArea:this._el,elFlowOut:n.elDrag.parentNode,elHandle:n.elHandle,elDrag:n.elDrag,weEvent:t,nX:n.nX+r.nX,nY:n.nY+r.nY,nGapX:r.nX,nGapY:r.nY},this.fireEvent("beforeDrag",e)){var c=n.elDrag;if(!1===this.option("bFlowOut")){var u=e.elFlowOut,d=[c.offsetWidth,c.offsetHeight],f=0,_=0;if(u==document.body&&(u=null),u&&d[0]<=u.scrollWidth&&d[1]<=u.scrollHeight)i={nWidth:u.clientWidth,nHeight:u.clientHeight},f=u.scrollLeft,_=u.scrollTop;else{var p=jindo.$Document().clientSize();i={nWidth:p.width,nHeight:p.height}}null!==e.nX&&(e.nX=Math.max(e.nX,f),e.nX=Math.min(e.nX,i.nWidth-d[0]+f)),null!==e.nY&&(e.nY=Math.max(e.nY,_),e.nY=Math.min(e.nY,i.nHeight-d[1]+_))}null!==e.nX&&(c.style.left=e.nX+"px"),null!==e.nY&&(c.style.top=e.nY+"px"),this.fireEvent("drag",e)}},_onMouseUp:function(t){this._stopDragging(!1);var e=this._htDragInfo;this._bHandleDown&&(this._bHandleDown=!1,this.fireEvent("handleUp",{weEvent:t,elHandle:e.elHandle,elDrag:e.elDrag}))},_onDragStart:function(t){this._findDraggableElement(t.element)&&t.stop(jindo.$Event.CANCEL_DEFAULT)},_onSelectStart:function(t){(this._bIsDragging||this._findDraggableElement(t.element))&&t.stop(jindo.$Event.CANCEL_DEFAULT)}}).extend(jindo.UIComponent),jindo.RolloverArea=jindo.$Class({$init:function(t,e){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!0,bActivateOnload:!0,htStatus:{sOver:"over",sDown:"down"}}),this.option(e||{}),this._elArea=jindo.$(t),this._aOveredElements=[],this._aDownedElements=[],this._wfMouseOver=jindo.$Fn(this._onMouseOver,this),this._wfMouseOut=jindo.$Fn(this._onMouseOut,this),this._wfMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfMouseUp=jindo.$Fn(this._onMouseUp,this),this.option("bActivateOnload")&&this.activate()},_addOvered:function(t){this._aOveredElements.push(t)},_removeOvered:function(t){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(t),1)},_addStatus:function(t,e){jindo.$Element(t).addClass(this.option("sClassPrefix")+e)},_removeStatus:function(t,e){jindo.$Element(t).removeClass(this.option("sClassPrefix")+e)},_isInnerElement:function(t,e){return t===e||jindo.$Element(t).isParentOf(e)},_onActivate:function(){this._wfMouseOver.attach(this._elArea,"mouseover"),this._wfMouseOut.attach(this._elArea,"mouseout"),this.option("bCheckMouseDown")&&(this._wfMouseDown.attach(this._elArea,"mousedown"),this._wfMouseUp.attach(document,"mouseup"))},_onDeactivate:function(){this._wfMouseOver.detach(this._elArea,"mouseover"),this._wfMouseOut.detach(this._elArea,"mouseout"),this._wfMouseDown.detach(this._elArea,"mousedown"),this._wfMouseUp.detach(document,"mouseup"),this._aOveredElements.length=0,this._aDownedElements.length=0},_findRollover:function(t){var e=this.option("sClassName");return jindo.$$.test(t,"."+e)?t:jindo.$$.getSingle("! ."+e,t)},_onMouseOver:function(t){for(var e,i=t.element,n=t.relatedElement;i=this._findRollover(i);i=i.parentNode)n&&this._isInnerElement(i,n)||(this._addOvered(i),e={element:i,htStatus:this.option("htStatus"),weEvent:t},this.fireEvent("over",e)&&this._addStatus(e.element,e.htStatus.sOver))},_onMouseOut:function(t){for(var e,i=t.element,n=t.relatedElement;i=this._findRollover(i);i=i.parentNode)n&&this._isInnerElement(i,n)||(this._removeOvered(i),e={element:i,htStatus:this.option("htStatus"),weEvent:t},this.fireEvent("out",e)&&this._removeStatus(e.element,e.htStatus.sOver))},_onMouseDown:function(t){for(var e,i=t.element;i=this._findRollover(i);)e={element:i,htStatus:this.option("htStatus"),weEvent:t},this._aDownedElements.push(i),this.fireEvent("down",e)&&this._addStatus(e.element,e.htStatus.sDown),i=i.parentNode},_onMouseUp:function(t){var e,i,n,s=t.element,o=[],a=this._aDownedElements;for(n=0;i=a[n];n++)o.push({element:i,htStatus:this.option("htStatus"),weEvent:t});for(;s=this._findRollover(s);s=s.parentNode)jindo.$A(a).indexOf(s)>-1||o.push({element:s,htStatus:this.option("htStatus"),weEvent:t});for(n=0;e=o[n];n++)this.fireEvent("up",e)&&this._removeStatus(e.element,e.htStatus.sDown);this._aDownedElements=[]}}).extend(jindo.UIComponent),jindo.Calendar=jindo.$Class({$init:function(t,e){this._htToday=this.constructor.getDateHashTable(new Date),this._elLayer=jindo.$(t),this.htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:!0},this.option(this.htDefaultOption),this.option(e||{}),this._assignHTMLElements(),this.activate(),this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate")),this.option("bDrawOnload")&&this.draw()},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(t){var e=jindo.$A(this._aDateContainerElement).indexOf(t);return e>-1?this._aMetaData[e]:null},getToday:function(){return this._htToday},setDate:function(t,e,i){this._htDate={nYear:t,nMonth:1*e,nDate:1*i}},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(t,e){this.htShownDate={nYear:t,nMonth:1*e,nDate:1}},_assignHTMLElements:function(){var t=this.option("sClassPrefix"),e=this.getBaseElement();(this.elBtnPrevYear=jindo.$$.getSingle("."+t+"btn-prev-year",e))&&(this.wfPrevYear=jindo.$Fn((function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(-1,0,!0)}),this)),(this.elBtnPrevMonth=jindo.$$.getSingle("."+t+"btn-prev-mon",e))&&(this.wfPrevMonth=jindo.$Fn((function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(0,-1,!0)}),this)),(this.elBtnNextMonth=jindo.$$.getSingle("."+t+"btn-next-mon",e))&&(this.wfNextMonth=jindo.$Fn((function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(0,1,!0)}),this)),(this.elBtnNextYear=jindo.$$.getSingle("."+t+"btn-next-year",e))&&(this.wfNextYear=jindo.$Fn((function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(1,0,!0)}),this)),this.elTitle=jindo.$$.getSingle("."+t+"title",e),this.elTitleYear=jindo.$$.getSingle("."+t+"title-year",e),this.elTitleMonth=jindo.$$.getSingle("."+t+"title-month",e);var i=jindo.$$.getSingle("."+t+"week",e);this.elWeekTemplate=i.cloneNode(!0),this.elWeekAppendTarget=i.parentNode},_setCalendarTitle:function(t,e,i){e<10&&(e=("0"+1*e).toString());var n,s=this.elTitle,o=this.option("sTitleFormat");if(void 0!==i)switch(i){case"year":s=this.elTitleYear,n=(o=this.option("sYearTitleFormat")).replace(/yyyy/g,t).replace(/y/g,t.toString().substr(2,2));break;case"month":s=this.elTitleMonth,n=(o=this.option("sMonthTitleFormat")).replace(/mm/g,e).replace(/m/g,1*e).replace(/M/g,this.option("aMonthTitle")[e-1])}else n=o.replace(/yyyy/g,t).replace(/y/g,t.toString().substr(2,2)).replace(/mm/g,e).replace(/m/g,1*e).replace(/M/g,this.option("aMonthTitle")[e-1]);jindo.$Element(s).text(n)},draw:function(t,e,i){var n=this.option("sClassPrefix"),s=this.getDate(),o=this._getShownDate();if(o&&void 0!==i&&i){var a=this.constructor.getRelativeDate(t,e,0,o);t=a.nYear,e=a.nMonth}else void 0===t&&void 0===e&&void 0===i?(t=s.nYear,e=s.nMonth):(t=t||o.nYear,e=e||o.nMonth);if(this.fireEvent("beforeDraw",{nYear:t,nMonth:e})){this.elTitle&&this._setCalendarTitle(t,e),this.elTitleYear&&this._setCalendarTitle(t,e,"year"),this.elTitleMonth&&this._setCalendarTitle(t,e,"month"),this._clear(jindo.Calendar.getWeeks(t,e)),this._setShownDate(t,e);var h,l,r,c,u,d,f,_,p,g=this.getToday(),m=this.constructor.getFirstDay(t,e),v=this.constructor.getLastDay(t,e),E=this.constructor.getLastDate(t,e),b=0,C=this.constructor.getRelativeDate(0,-1,0,{nYear:t,nMonth:e,nDate:1}),w=this.constructor.getRelativeDate(0,1,0,{nYear:t,nMonth:e,nDate:1}),S=this.constructor.getLastDate(C.nYear,C.nMonth),j=[],y=this.constructor.getWeeks(t,e);for(p=0;p<y;p++)_=this.elWeekTemplate.cloneNode(!0),jindo.$Element(_).appendTo(this.elWeekAppendTarget),this._aWeekElement.push(_);if(this._aDateElement=jindo.$$("."+n+"date",this.elWeekAppendTarget),this._aDateContainerElement=jindo.$$("."+n+"week > *",this.elWeekAppendTarget),m>0)for(p=S-m;p<S;p++)j.push(p+1);for(p=1;p<E+1;p++)j.push(p);for(f=j.length-1,p=1;p<7-v;p++)j.push(p);for(p=0;p<j.length;p++)h=!1,l=!1,r=jindo.$Element(this._aDateContainerElement[p]),c=t,u=e,p<m?(h=!0,r.addClass(n+"prev-mon"),c=C.nYear,u=C.nMonth):p>f?(l=!0,r.addClass(n+"next-mon"),c=w.nYear,u=w.nMonth):(c=t,u=e),0===b&&r.addClass(n+"sun"),6==b&&r.addClass(n+"sat"),c==g.nYear&&1*u==g.nMonth&&j[p]==g.nDate&&r.addClass(n+"today"),d={elDate:this._aDateElement[p],elDateContainer:r.$value(),nYear:c,nMonth:u,nDate:j[p],bPrevMonth:h,bNextMonth:l,sHTML:j[p]},jindo.$Element(d.elDate).html(d.sHTML.toString()),this._aMetaData.push({nYear:c,nMonth:u,nDate:j[p]}),b=(b+1)%7,this.fireEvent("draw",d);this.fireEvent("afterDraw",{nYear:t,nMonth:e})}},_clear:function(t){this._aMetaData=[],this._aWeekElement=[],jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){this.elBtnPrevYear&&this.wfPrevYear.attach(this.elBtnPrevYear,"click"),this.elBtnPrevMonth&&this.wfPrevMonth.attach(this.elBtnPrevMonth,"click"),this.elBtnNextMonth&&this.wfNextMonth.attach(this.elBtnNextMonth,"click"),this.elBtnNextYear&&this.wfNextYear.attach(this.elBtnNextYear,"click")},_onDeactivate:function(){this.elBtnPrevYear&&this.wfPrevYear.detach(this.elBtnPrevYear,"click"),this.elBtnPrevMonth&&this.wfPrevMonth.detach(this.elBtnPrevMonth,"click"),this.elBtnNextMonth&&this.wfNextMonth.detach(this.elBtnNextMonth,"click"),this.elBtnNextYear&&this.wfNextYear.detach(this.elBtnNextYear,"click")}}).extend(jindo.UIComponent),jindo.Calendar.getDateObject=function(t){return 3==arguments.length?new Date(arguments[0],arguments[1]-1,arguments[2]):new Date(t.nYear,t.nMonth-1,t.nDate)},jindo.Calendar.getDateHashTable=function(t){return 3==arguments.length?{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}:(arguments.length<=1&&(t=t||new Date),{nYear:t.getFullYear(),nMonth:t.getMonth()+1,nDate:t.getDate()})},jindo.Calendar.getTime=function(t){return this.getDateObject(t).getTime()},jindo.Calendar.getFirstDay=function(t,e){return new Date(t,e-1,1).getDay()},jindo.Calendar.getLastDay=function(t,e){return new Date(t,e,0).getDay()},jindo.Calendar.getLastDate=function(t,e){return new Date(t,e,0).getDate()},jindo.Calendar.getWeeks=function(t,e){var i=this.getFirstDay(t,e),n=this.getLastDate(t,e);return Math.ceil((i+n)/7)},jindo.Calendar.getRelativeDate=function(t,e,i,n){return this.getDateHashTable(new Date(n.nYear+t,n.nMonth+e-1,n.nDate+i))},jindo.Calendar.isValidDate=function(t,e,i){return e<=12&&i<=this.getLastDate(t,e)},jindo.Calendar.isPast=function(t,e){return this.getTime(t)<this.getTime(e)},jindo.Calendar.isFuture=function(t,e){return this.getTime(t)>this.getTime(e)},jindo.Calendar.isSameDate=function(t,e){return this.getTime(t)==this.getTime(e)},jindo.Calendar.isBetween=function(t,e,i){return!this.isFuture(t,i)&&!this.isPast(t,e)},jindo.LayerManager=jindo.$Class({_bIsActivating:!1,_bIsHiding:!1,_bIsShowing:!1,_aLink:null,$init:function(t,e){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100}),this.option(e||{}),this.setLayer(t),this._aLink=[],this._oShowTimer=new jindo.Timer,this._oHideTimer=new jindo.Timer,this._oEventTimer=new jindo.Timer,this._wfOnEvent=jindo.$Fn(this._onEvent,this),this.getVisible(),this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._wel.visible()},_check:function(t){for(var e,i,n=jindo.$Element(t),s=0;e=this._aLink[s];s++)if((i=jindo.$Element(e))&&(e=i.$value())&&(t==e||n.isChildOf(e)))return!0;return!1},_find:function(t){for(var e,i=0;e=this._aLink[i];i++)if(e==t)return i;return-1},getLayer:function(){return this._el},setLayer:function(t){return this._el=jindo.$(t),this._wel=jindo.$Element(t),this},getLinks:function(){return this._aLink},setLinks:function(t){return this._aLink=jindo.$A(t).unique().$value(),this},link:function(t){if(arguments.length>1){for(var e=0,i=arguments.length;e<i;e++)this.link(arguments[e]);return this}return-1!=this._find(t)?this:(this._aLink.push(t),this)},unlink:function(t){if(arguments.length>1){for(var e=0,i=arguments.length;e<i;e++)this.unlink(arguments[e]);return this}var n=this._find(t);return n>-1&&this._aLink.splice(n,1),this},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this._bIsShowing=!1,this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(){return this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventHide:function(){this._bIsHiding=!1,this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_show:function(t,e){this._oEventTimer.abort(),this._bIsShowing=!0,this._bIsHiding=!1,e>0?this._oShowTimer.start(t,e):(this._oHideTimer.abort(),t())},_hide:function(t,e){this._bIsShowing=!1,this._bIsHiding=!0,e>0?this._oHideTimer.start(t,e):(this._oShowTimer.abort(),t())},show:function(t){void 0===t&&(t=this.option("nShowDelay"));var e=this;return this._show((function(){e.getVisible()||e._fireEventBeforeShow()&&(e._wel.show(),e._fireEventShow())}),t),this},hide:function(t){void 0===t&&(t=this.option("nHideDelay"));var e=this;return this._hide((function(){e.getVisible()&&e._fireEventBeforeHide()&&(e._wel.hide(),e._fireEventHide())}),t),this},toggle:function(t){return!this.getVisible()||this._bIsHiding?this.show(t||this.option("nShowDelay")):this.hide(t||this.option("nHideDelay")),this},_onEvent:function(t){var e=t.element,i=this;this._oEventTimer.start((function(){!i._bIsHiding&&i.getVisible()&&(i._check(e)?i._bIsShowing||(i.fireEvent("ignore",{sCheckEvent:i.option("sCheckEvent")}),i._oHideTimer.abort(),i._bIsHiding=!1):void 0!==e.tagName&&i.hide())}),this.option("nCheckDelay"))}}).extend(jindo.UIComponent),jindo.Slider=jindo.$Class({_elTrack:null,_aThumbs:null,_aPoses:null,_htSwap:null,$init:function(t,e){this.option({sClassPrefix:"slider-",bVertical:!1,bJump:!0,bDragOnTrack:!0,fAdjustValue:null,nMinValue:0,nMaxValue:1,bActivateOnload:!0}),this.option(e||{}),this.option("bVertical")?this._htSwap={y:"nX",x:"nY",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}:this._htSwap={y:"nY",x:"nX",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"},this._elTrack=jindo.$(t),this._aThumbs=jindo.$$("."+this.option("sClassPrefix")+"thumb",this._elTrack),this._sRand="S"+parseInt(1e8*Math.random(),10),jindo.$ElementList(this._aThumbs).addClass(this._sRand),this._aPoses=this.positions(),this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this),this._initDragArea(),this.option("bActivateOnload")&&this.activate()},getTrack:function(){return this._elTrack},getThumb:function(t){return this._aThumbs[t]},_initDragArea:function(){var t=this,e=this._htSwap;this._oDragArea=new jindo.DragArea(this._elTrack,{sClassName:this._sRand,bFlowOut:!1}).attach({beforeDrag:function(i){var n=t._getThumbIndex(i.elHandle),s={nIndex:n,nPos:i[e.x],bJump:!1};if(!t.fireEvent("beforeChange",s))return i.stop(),!1;i[e.x]=t._getAdjustedPos(n,s.nPos),i[e.y]=null},drag:function(i){var n=t._getThumbIndex(i.elHandle),s=i[e.x];s!=t._aPoses[n]&&(t._aPoses[n]=s,t._fireChangeEvent(n))}})},getDragArea:function(){return this._oDragArea},_fireChangeEvent:function(t){var e=this._getPosition(t);this.fireEvent("change",{nIndex:t,nPos:e,nValue:this._getValue(t,e)})},_onActivate:function(){this.getDragArea().activate(),this._onTrackMouseDownFn.attach(this._elTrack,"mousedown")},_onDeactivate:function(){this.getDragArea().deactivate(),this._onTrackMouseDownFn.detach(this._elTrack,"mousedown")},_onTrackMouseDown:function(t){if(this.option("bJump")){t.stop(jindo.$Event.CANCEL_DEFAULT);var e=0,i=this._htSwap,n=t.element,s="."+this.option("sClassPrefix")+"thumb";if(!(jindo.$$.test(n,s)||jindo.$$.getSingle("! "+s,n))){var o=t.pos()[i.pageX];o-=jindo.$Element(this._elTrack).offset()[i.left];for(var a,h=9999999,l=0;a=this._aThumbs[l];l++){var r=parseInt(jindo.$Element(a).css(i.left),10)||0;r+=parseInt(a[i.offsetWidth]/2,10);var c=Math.abs(o-r);c<h&&(h=c,e=l)}o-=parseInt(this._aThumbs[e][i.offsetWidth]/2,10),this.positions(e,o),this.option("bDragOnTrack")&&this.getDragArea().startDragging(this._aThumbs[e])}}},_getTrackInfo:function(t){var e=this._htSwap,i=this._aThumbs[t][e.offsetWidth];return{maxPos:this._elTrack[e.offsetWidth]-i,max:this.option("nMaxValue"),min:this.option("nMinValue")}},_getValue:function(t,e){void 0===e&&(e=this._getPosition(t));var i=this._getTrackInfo(t),n=Math.min(Math.max(e*(i.max-i.min)/i.maxPos+i.min,i.min),i.max),s=this.option("fAdjustValue");return s&&(n=s.call(this,n)),n},_getAdjustedPos:function(t,e){var i=e,n=this._getTrackInfo(t),s=this.option("fAdjustValue");if(s){var o=Math.min(Math.max(i*(n.max-n.min)/n.maxPos+n.min,n.min),n.max),a=s.call(this,o);o!=a&&(i=n.maxPos*(a-n.min)/(n.max-n.min))}return i=Math.max(i,0),i=Math.min(i,n.maxPos)},_getThumbIndex:function(t){for(var e=0,i=this._aThumbs.length;e<i;e++)if(this._aThumbs[e]==t)return e;return-1},_getPosition:function(t){var e=jindo.$Element(this._aThumbs[t]).css(this._htSwap.left);return"auto"==e?0:parseInt(e,10)},_setPosition:function(t,e){this._aPoses[t]=e,jindo.$Element(this._aThumbs[t]).css(this._htSwap.left,e+"px")},positions:function(t,e,i){switch(void 0===i&&(i=!0),arguments.length){case 0:var n=[];return jindo.$A(this._aThumbs).forEach((function(t,e){n[e]=this._getPosition(e)}),this),n;case 1:return this._getPosition(t);default:if(i){var s={nIndex:t,nPos:e,bJump:!0};if(this.fireEvent("beforeChange",s)){var o=this._getAdjustedPos(t,s.nPos),a=o!=this._aPoses[t];this._setPosition(t,o),a&&this._fireChangeEvent(t)}return this}return this._setPosition(t,this._getAdjustedPos(t,e)),this}},values:function(t,e,i){switch(void 0===i&&(i=!0),arguments.length){case 0:for(var n=[],s=0,o=this._aThumbs.length;s<o;s++)n[s]=this._getValue(s);return n;case 1:return this._getValue(t,this.positions(t));default:var a=this._getTrackInfo(t);return this.positions(t,(e-a.min)*a.maxPos/(a.max-a.min),i),this}}}).extend(jindo.UIComponent),jindo.RolloverClick=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sCheckEvent:"click",bCheckDblClick:!1,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!1,bActivateOnload:!1,htStatus:{sOver:"over",sDown:"down"}}}),this.option(e||{});var i=this;this._oRolloverArea=new jindo.RolloverArea(t,this.option("RolloverArea")).attach({over:function(t){i.fireEvent("over",t)||t.stop()},out:function(t){i.fireEvent("out",t)||t.stop()}}),this._wfClick=jindo.$Fn(this._onClick,this),this._wfDblClick=jindo.$Fn(this._onClick,this),this.option("bActivateOnload")&&this.activate()},_onClick:function(t){var e=t.element,i="click";for("dblclick"==t.type&&(i=t.type);e=this._oRolloverArea._findRollover(e);)this.fireEvent(i,{element:e,htStatus:this._oRolloverArea.option("htStatus"),weEvent:t}),e=e.parentNode},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this.option("bCheckDblClick")&&this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent),jindo.NumberFormatter=jindo.$Class({$init:function(t,e){this.option({nDecimalPoint:0}),this.option(e||{}),this.attach("beforeChange",(function(t){var e=t.sText,i="",n=this.option("nDecimalPoint");e=0===n?(e=(e=e.replace(new RegExp("[^0-9"+t.sStartMark+t.sEndMark+"]","g"),"")).replace(/^0+/,"")).replace(new RegExp("^0*"+t.sStartMark+"0*"+t.sEndMark+"0*"),t.startMark+t.endMark):(e=(e=(e=(e=(e=(e=e.replace(new RegExp("[^0-9."+t.sStartMark+t.sEndMark+"]","g"),"")).replace(/\.{2,}/g,".")).replace(/^\.+/,"")).replace(/(\.[^.]*?)(\.)/g,(function(){return arguments[1]}))).replace(/^0+/,"")).replace(new RegExp("^0*"+t.sStartMark+"0*"+t.sEndMark+"0*"),t.startMark+t.endMark)).replace(new RegExp("^0([^."+t.sStartMark+t.sEndMark+"]+?)","g"),(function(){return arguments[1]})),i=this._convertCurrency(e),n>0&&(i=this._limitDecimalPoint(i,n)),t.sText=i}))},getValue:function(){return this._el.value.replace(new RegExp("[,"+this._aMarks[0]+this._aMarks[1]+"]+?","g"),"")},_convertCurrency:function(t){var e=0,i="",n=t.indexOf("."),s=t.length;n>-1&&(s=n-1);for(var o=t.length;o>=0;o--){var a=t.charAt(o);o>s?i=a+i:/[0-9]/.test(a)?(e>=3&&(i=","+i,e=0),e++,i=a+i):a!=this._aMarks[0]&&a!=this._aMarks[1]||(i=a+i)}return i},_limitDecimalPoint:function(t,e){var i="",n=t.indexOf(".");t.length;if(n>-1&&n-1,(n=t.indexOf("."))>-1&&e>0)for(var s=0,o=0;o<t.length;o++){var a=t.charAt(o);if(/[0-9]/.test(a)){if(s==e)continue;o>n&&s++}i+=a}else i=t;return i}}).extend(jindo.Formatter),jindo.InlineTextEdit=jindo.$Class({_bIsEditing:!1,$init:function(t){var e={elInput:jindo.$('<input type="text">'),bHandleBlur:!0,bHandleKeyDown:!0};this.option(e),this.option(t||{}),this._wfBlur=jindo.$Fn(this._onBlur,this),this._wfKeyDown=jindo.$Fn(this._onKeyDown,this)},getTextInput:function(){return this._getTextInput().$value()},_getTextInput:function(){return this._welInput?this._welInput:this._welInput=jindo.$Element(this.option("elInput"))},_resize:function(t,e){var i=jindo.$Element(t);jindo.$Element(e).width(i.width()).height(i.height())},isEditing:function(){return this._bIsEditing},edit:function(t,e){var i=jindo.$Element(t),n=this._getTextInput().$value();return this._welHidden=i,i.after(n),this._resize(e||t,n),i.hide(),n.value=i.text(),n.focus(),this._bIsEditing=!0,this.option("bHandleBlur")&&this._wfBlur.attach(n,"blur"),this.option("bHandleKeyDown")&&this._wfKeyDown.attach(n,"keydown"),this},apply:function(){if(this.isEditing()){var t=this._getTextInput(),e=t.$value(),i=e.value,n={sText:i,elInput:e,elText:this._welHidden.$value()};t.leave(),this._welHidden.text()!=i&&this.fireEvent("beforeChange",n)?(this._welHidden.text(n.sText).show(),this._bIsEditing=!1,this.fireEvent("change",n)):this._welHidden.show(),this._wfBlur.detach(e,"blur").detach(e,"keydown")}return this},cancel:function(){if(this.isEditing()){var t=this._getTextInput(),e=t.$value();t.leave(),this._welHidden.show(),this._bIsEditing=!1,this._wfBlur.detach(e,"blur").detach(e,"keydown")}return this},_onBlur:function(t){this.apply()},_onKeyDown:function(t){switch(t.key().keyCode){case 27:this.cancel();break;case 13:"input"==this.getTextInput().tagName.toLowerCase()&&this.apply()}}}).extend(jindo.Component),jindo.BrowseButton=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"browse-"}),this.option(e||{}),this._el=jindo.$(t),this._assignHTMLElement(),this._attachEvents()},_assignHTMLElement:function(){var t=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+t+"box",this._el),this._elFileSelect=jindo.$$.getSingle("."+t+"file-input",this._el),this._elBrowseButton=jindo.$$.getSingle("."+t+"button",this._el),this._elFileSelect.style.cssText="top:-.5em !important; height:500px !important;",jindo.$Element(this._elBrowseButton).addClass(t+"applied")},_adjustFileSelectPos:function(t){this.getFileSelect().style.right=jindo.$Element(this.getBox()).offset().left-t+"px"},_attachEvents:function(){var t=this.getBrowseButton(),e=jindo.$Element(t),i=this.getBox(),n=this.getFileSelect(),s=jindo.$Fn((function(t){e.addClass(this.option("sClassPrefix")+"over"),this.fireEvent("over"),this._adjustFileSelectPos(t.pos().pageX)}),this),o=jindo.$Fn((function(t){e.removeClass(this.option("sClassPrefix")+"over"),n.style.right="0px",this.fireEvent("out")}),this),a=jindo.$Fn((function(t){this._adjustFileSelectPos(t.pos().pageX)}),this);jindo.$Fn((function(t){this.fireEvent("sourceChange")}),this).attach(this.getFileSelect(),"change"),s.attach(i,"mouseover"),a.attach(i,"mousemove"),o.attach(i,"mouseout")},getBox:function(){return this._elBox},getFileSelect:function(){return this._elFileSelect},getBrowseButton:function(){return this._elBrowseButton}}).extend(jindo.Component),jindo.FileUploader=jindo.$Class({_bIsActivating:!1,_aHiddenInput:[],$init:function(t,e){this.option({sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:!1,bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._wel=jindo.$Element(this._el),this._elForm=this._el.form,this._aHiddenInput=[],this.constructor._oCallback={},this._wfChange=jindo.$Fn(this._onFileSelectChange,this),this.option("bActivateOnload")&&this.activate()},_appendIframe:function(){var t="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+t+'" src="'+this.option("sCallback")+'?blank">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"}),document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){this._welIframe.leave()},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var t=this.getFormElement(),e=jindo.$Element(t),i=this._welIframe.attr("name"),n=i+"_func",s=this.option("sUrl");for(var o in e.attr({target:i,action:s}),this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")})),this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:n})),this.option("htData"))this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:o,value:this.option("htData")[o]}));for(var a=0;a<this._aHiddenInput.length;a++)t.appendChild(this._aHiddenInput[a]);this.constructor._oCallback[n+"_success"]=jindo.$Fn((function(t){this.fireEvent("success",{htResult:t}),delete this.constructor._oCallback[t.callback_func+"_success"],delete this.constructor._oCallback[t.callback_func+"_error"];for(var e=0;e<this._aHiddenInput.length;e++)jindo.$Element(this._aHiddenInput[e]).leave();this._aHiddenInput.length=0,this._removeIframe()}),this).bind(),this.constructor._oCallback[n+"_error"]=jindo.$Fn((function(t){this.fireEvent("error",{htResult:t}),delete this.constructor._oCallback[t.callback_func+"_success"],delete this.constructor._oCallback[t.callback_func+"_error"];for(var e=0;e<this._aHiddenInput.length;e++)jindo.$Element(this._aHiddenInput[e]).leave();this._aHiddenInput.length=0,this._removeIframe()}),this).bind(),t.submit()},reset:function(){var t=$("<form>");return this._wel.wrap(t),t.reset(),jindo.$Element(t).replace(this._el),this},_onActivate:function(){this._el.value="",this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return(new Date).getMilliseconds()+Math.floor(1e5*Math.random())},_createElement:function(t,e){var i=jindo.$("<"+t+">"),n=jindo.$Element(i);for(var s in e)n.attr(s,e[s]);return i},_checkExtension:function(t){for(var e,i=this.option("sFiletype").split(";"),n=0;n<i.length;n++)if(e=(e=(e=(e="*.*"==i[n]?"*":i[n]).replace(/^\s+|\s+$/,"")).replace(/\./g,"\\.")).replace(/\*/g,"[^\\/]+"),new RegExp(e+"$","gi").test(t))return!0;return!1},_onFileSelectChange:function(t){var e=t.element.value,i=this._checkExtension(e),n={sValue:e,bAllowed:i,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};e.length&&this.fireEvent("select",n)&&(i?this.option("bAutoUpload")&&this.upload():alert(n.sMsgNotAllowedExt))}}).extend(jindo.UIComponent),jindo.Clipboard=jindo.$Class({_aElement:null,_aData:null,_elOvered:null,_bFailed:!0,$init:function(t){this._sFlashURL=t;var e=jindo.Clipboard;this._sUnique="S"+(new Date).getTime()+parseInt(1e9*Math.random(),10);void 0===e._callbacks&&(e._callbacks={}),e._callbacks[this._sUnique]={click:jindo.$Fn(this._onFlashClick,this).bind(),mouseover:jindo.$Fn(this._onFlashMouseOver,this).bind(),mouseout:jindo.$Fn(this._onFlashMouseOut,this).bind(),mousedown:jindo.$Fn(this._onFlashMouseDown,this).bind(),mouseup:jindo.$Fn(this._onFlashMouseUp,this).bind(),load:jindo.$Fn(this._onFlashLoad,this).bind()},this._aElement=[],this._aData=[],this._initFlash(),this._wfHandler=jindo.$Fn((function(t){this._initFlash();var e=t.element,i=jindo.$Element(e).offset();this._setFlashPosSize(i.left,i.top,e.offsetWidth,e.offsetHeight),this._setClipboard(e,this._getData(e)),this._elOvered=e}),this)},_initFlash:function(){if(!this._elDummy){var t=this._elDummy=jindo.$("<div>"),e=this._sUnique;t.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important; z-index:32000 !important;",document.body.insertBefore(t,document.body.firstChild);var i=nhn.FlashObject.generateTag(this._sFlashURL,"CLIPBOARD"+e,1,1,{flashVars:{sUniq:e},wmode:"transparent"});i=i.replace(/style="position:relative !important;"/gi,'style="position:absolute !important; left:0 !important; top:0 !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important;"'),t.innerHTML=i,jindo.$Fn(this._checkFailed,this).attach(t,"click")}},_getFlash:function(){return nhn.FlashObject.find("CLIPBOARD"+this._sUnique)},_setFlashPosSize:function(t,e,i,n){var s=this._elDummy;s.style.left=t+"px",s.style.top=e+"px";var o=this._getFlash();o.width=i,o.height=n,o.style.width=i+"px",o.style.height=n+"px"},setData:function(t,e){t=jindo.$(t);var i=jindo.$A(this._aElement).indexOf(t),n=-1!=i;if(n&&(!e||void 0===e))return this._wfHandler.detach(t,"mousemove"),this._aElement.splice(i,1),this._aData.splice(i,1),void this._setFlashPosSize(0,0,1,1);n?this._aData[i]=e:(this._wfHandler.attach(t,"mousemove"),this._aElement.push(t),this._aData.push(e)),this._setClipboard(t,e)},_getData:function(t){var e=jindo.$A(this._aElement).indexOf(t);return this._aData[e]},_setClipboard:function(t,e){var i=this._getFlash(),n=(jindo.$Element(t).css("cursor")||"").toUpperCase(),s="POINTER"==n||"HAND"==n;try{i.setClipboardData(e),i.setClipboardOptions({cursor:s?"pointer":"default"}),this._sAppliedData=e,this._bFailed=!1}catch(t){this._bFailed=!0}},_checkFailed:function(){this._bFailed&&this.fireEvent("failure",{element:this._elOvered,data:this._lastestData})},_onFlashClick:function(t){this.fireEvent("copy",{element:this._elOvered,data:t})},_onFlashMouseOver:function(){this.fireEvent("over",{element:this._elOvered})},_onFlashMouseOut:function(){this.fireEvent("out",{element:this._elOvered})},_onFlashMouseDown:function(){this.fireEvent("down",{element:this._elOvered})},_onFlashMouseUp:function(){this.fireEvent("up",{element:this._elOvered})},_onFlashLoad:function(){this.fireEvent("load")}}).extend(jindo.Component),jindo.DataBridge=jindo.$Class({_htEvent:{},$static:{log:function(t,e){t&&e?this.getComponentInstance(t)._onLog(e):alert("Parameter is wrong!!")},onReceive:function(t,e,i){t&&e&&i?this.getComponentInstance(t)._onReceiveData(e,i):alert("Parameter is wrong!!")},getComponentInstance:function(t){for(var e=this.getInstance(),i=0;i<e.length;i++)if(t==e[i].getFlashObjectId())return e[i]}},$init:function(t){this.option({sSwfPath:"data_bridge.swf",nRetryLimit:3}),this.option(t),this._attachEvent(),this._createFlashObject()},_attachEvent:function(){this._htEvent.beforeunload=jindo.$Fn(this.destroy,this).attach(window,"beforeunload")},_createFlashObject:function(){this._sFlashId="data_bridge_"+(new Date).getMilliseconds()+Math.floor(1e5*Math.random());var t=jindo.$Element('<div style="position:absolute;top:-1000px;left:0px">'),e="serviceId="+this.option("sServiceId")+"&logHandler=jindo.DataBridge.log&onReceiveHandler=jindo.DataBridge.onReceive&flashId="+this._sFlashId+"&retryLimit="+this.option("nRetryLimit");t.appendTo(document.body).html('<object tabIndex="-1" id="'+this._sFlashId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"><param name="flashvars" value="'+e+'"><param name="movie" value="'+this.option("sSwfPath")+'"><param name = "allowScriptAccess" value = "always" /><embed tabIndex="-1" name="'+this._sFlashId+'" src="'+this.option("sSwfPath")+'" flashvars="'+e+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object>')},_getFlashObject:function(){return document[this._sFlashId]||jindo.$(this._sFlashId)},getFlashObjectId:function(){return this._sFlashId},getClientId:function(){return this.option("sServiceId")+"_"+this._sFlashId},send:function(t){if(t)try{this._getFlashObject().send(t)}catch(t){alert("Flash object is not ready!!")}else alert("vData parameter is null!!");return this},_onReceiveData:function(t,e){this.fireEvent("receive",{sSenderId:t,vData:e})},_onLog:function(t){this.fireEvent("log",{sMessage:t})},_close:function(){this._getFlashObject().close()},_detachEvent:function(){this._htEvent.beforeunload.detach(window,"beforeunload")},getLocalData:function(){},setLocalData:function(){},resetLocalData:function(){},destroy:function(){this._close(),this._detachEvent(),this._htEvent={},jindo.$Element(this._getFlashObject()).leave()}}).extend(jindo.Component),jindo.AjaxHistory=jindo.$Class({_htEventHandler:{},_htHistoryData:{},_oAgent:null,_welIFrame:null,_nIntervalId:0,_sCheckType:"",_sComponentId:"",$static:{checkIFrameChange:function(t){var e=jindo.$S(t.search.substring(1)).parseString();this.getInstance()[0]._checkLocationChange(encodeURIComponent(e.hash))}},$init:function(t){this._oAgent=jindo.$Agent().navigator(),this._sComponentId="AjaxHistory"+(new Date).getTime(),this.option({sIFrameUrl:"history.html",nCheckInterval:100}),this.option(t||{})},initialize:function(){var t=this._getLocationHash();return this._oAgent.ie&&this._oAgent.version>=8&&"Standards"==jindo.$Document().renderingMode()||this._oAgent.firefox&&this._oAgent.version>=3.6||this._oAgent.chrome&&this._oAgent.version>3||this._oAgent.safari&&this._oAgent.version>=5||this._oAgent.opera&&this._oAgent.version>=10.6?(this._htEventHandler.hashchange=jindo.$Fn(this._checkLocationChange,this).attach(window,"hashchange"),this._sCheckType="hashchangeevent"):this._oAgent.ie?(this._welIFrame=jindo.$Element("<IFRAME>"),this._welIFrame.hide(),this._welIFrame.appendTo(document.body),this._sCheckType="iframe"):(this._nIntervalId=setInterval(jindo.$Fn(this._checkLocationChange,this).bind(),this.option("nCheckInterval")),this._sCheckType="setinterval"),t?"iframe"==this._sCheckType?this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+t:(this._htHistoryData=this._getDecodedData(t),this.fireEvent("change",{htHistoryData:this._htHistoryData})):this.fireEvent("load"),this},getComponentId:function(){return this._sComponentId},_getLocationHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_setLocationHash:function(t){location.hash=t},addHistory:function(t){if(t&&"object"==typeof t&&$H(t).length()>0){this._htHistoryData=jindo.$Json(jindo.$Json(t).toString()).toObject();var e=this._getEncodedData(t);return this._getLocationHash()!=e&&(this._setLocationHash(e),"iframe"==this._sCheckType&&(this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+e),!0)}return!1},_checkLocationChange:function(t){t=t&&"string"==typeof t?t:this._getLocationHash();var e=this._getDecodedData(t);this._compareData(this._htHistoryData,e)||(this._htHistoryData=e,"iframe"==this._sCheckType&&this._setLocationHash(t),this.fireEvent("change",{htHistoryData:this._htHistoryData}))},_getEncodedData:function(t){return t?"object"==typeof JSON&&"function"==typeof JSON.stringify?encodeURIComponent(JSON.stringify(t)):encodeURIComponent(jindo.$Json(t).toString()):""},_getDecodedData:function(t){try{if(t){var e=decodeURIComponent(t);return"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):jindo.$Json(e).toObject()}}catch(t){}return{}},_compareData:function(t,e){if(t&&e){if(jindo.$H(t).length()==jindo.$H(e).length()){for(var i in t)if("object"==typeof t[i]){if(!arguments.callee(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}return!1}return!1},destroy:function(){"hashchangeevent"==this._sCheckType?this._htEventHandler.hashchange.detach(window,"hashchange"):"iframe"==this._sCheckType?this._welIFrame.leave():clearInterval(this._nIntervalId),this._htEventHandler=null,this._htHistoryData=null,this._oAgent=null,this._welIFrame=null,this._nIntervalId=null,this._sCheckType=null,this._sComponentId=null}}).extend(jindo.Component),jindo.Cache=jindo.$Class({$init:function(t){this._htCacheData={},this._htExpireTime={},this._waKeyList=jindo.$A(),this.option({nCacheLimit:50,nExpireTime:0}),this.option(t)},add:function(t,e,i){if(t&&e){this._checkCacheExpire(),this._checkCacheLimit();var n=this._makeKey(t);if(n)return this._htCacheData[n]=e,this._htExpireTime[n]=this._getExpireTime(i),this._waKeyList.push(n),!0}return!1},remove:function(t){if(t){var e=this._makeKey(t);if(this._htCacheData[e])return this._waKeyList=this._waKeyList.refuse(e),delete this._htExpireTime[e],delete this._htCacheData[e],!0}return!1},clear:function(){this._htCacheData={},this._htExpireTime={},this._waKeyList=jindo.$A()},get:function(t){if(t){var e=this._makeKey(t);if(this.check(t))return this._htCacheData[e]}return null},check:function(t){if(t){var e=this._makeKey(t);if(this._htCacheData[e]&&this._checkCacheExpire(e))return!0}return!1},_checkCacheLimit:function(){this._waKeyList.length()==this.option("nCacheLimit")&&this.remove(this._waKeyList.get(0))},_checkCacheExpire:function(t){if(t){var e=this._getTime();return 0===this._htExpireTime[t]||e<this._htExpireTime[t]||(this.remove(jindo.$S(t).parseString()),!1)}for(var i=0,n=this._waKeyList.length();i<n;i++)return this._checkCacheExpire(this._waKeyList.get(i))},_getExpireTime:function(t){return t?this._getTime()+1e3*t:this.option("nExpireTime")?this._getTime()+1e3*this.option("nExpireTime"):0},_makeKey:function(t){return t?"string"==typeof t?t:jindo.$H(t).toQueryString():""},_getTime:function(){return+new Date},destroy:function(){this._waKeyList=null,this._htCacheData=null,this._htExpireTime=null}}).extend(jindo.Component),jindo.ModalDialog=jindo.$Class({$init:function(t){this.option({Foggy:{nShowDuration:150,nShowOpacity:.8,nHideDuration:150,nHideOpacity:0,sEffect:"linear",nFPS:30}}),this.option(t||{}),this._initFoggy()},_initFoggy:function(){var t=this;this._oFoggy=new jindo.Foggy(this.option("Foggy")).attach({show:function(e){t.fireEvent("show",{elLayer:t._elLayer})},hide:function(){t.detachAll("close").detachAll("confirm").detachAll("cancel"),t._detachEvents(),t._welLayer.hide(),t._welLayer.leave(),t._bIsShown=!1,t.fireEvent("hide",{elLayer:t._elLayer})}}),this._oFoggy.getFog().className=this.option("sClassPrefix")+"fog"},getFoggy:function(){return this._oFoggy},show:function(t,e){if(!this.isShown()){this.attach(e),document.body.appendChild(this._elLayer),this._welLayer.html(this._template.process(t));var i={elLayer:this._elLayer};this.fireEvent("beforeShow",i)&&(this._welLayer.show(),this._attachEvents(),this.getLayerPosition().setPosition(),this._bIsShown=!0,this._oFoggy.show(this._elLayer))}},hide:function(){this.fireEvent("beforeHide",{elLayer:this._elLayer})&&this._oFoggy.hide()}}).extend(jindo.Dialog),jindo.DropArea=jindo.$Class({$init:function(t,e){this._el=jindo.$(t),this._wel=jindo.$Element(this._el),this.option({sClassName:"droppable",oDragInstance:null}),this.option(e||{}),this._waOveredDroppableElement=jindo.$A([]),this._elHandle=null,this._elDragging=null,this._wfMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfMouseOver=jindo.$Fn(this._onMouseOver,this),this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);var i=this.option("oDragInstance");if(i){var n=this;i.attach({handleDown:function(t){n._elHandle=t.elHandle,n._waOveredDroppableElement.empty()},dragStart:function(t){n._reCalculate(),n.fireEvent(t.sType,t),n._wfMouseMove.attach(document,"mousemove"),n._wfMouseOver.attach(n._el,"mouseover"),n._wfMouseOut.attach(n._el,"mouseout")},drag:function(t){n._elDragging=t.elDrag},dragEnd:function(t){var e={};for(var i in t)e[i]=t[i];e.aDrop=n.getOveredLists().concat(),n._clearOveredDroppableElement(t.weEvent,t.bInterupted),n.fireEvent(t.sType,e),n._wfMouseMove.detach(document,"mousemove"),n._wfMouseOver.detach(n._el,"mouseover"),n._wfMouseOut.detach(n._el,"mouseout")},handleUp:function(t){n._elDragging=null,n._elHandle=null}})}},_addOveredDroppableElement:function(t){-1==this._waOveredDroppableElement.indexOf(t)&&(this._waOveredDroppableElement.push(t),this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t}))},_fireMoveEvent:function(t,e,i,n){var s=(i.pageX-e.nLeft)/(e.nRight-e.nLeft),o=(i.pageY-e.nTop)/(e.nBottom-e.nTop);this.fireEvent("move",{weEvent:n,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t,nRatioX:s,nRatioY:o})},_removeOveredDroppableElement:function(t){var e=this._waOveredDroppableElement.indexOf(t);-1!=e&&(this._waOveredDroppableElement.splice(e,1),this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t}))},_clearOveredDroppableElement:function(t,e){if(e)this._waOveredDroppableElement.empty();else for(var i;i=this._waOveredDroppableElement.$value()[0];)this._waOveredDroppableElement.splice(0,1),this.fireEvent("drop",{weEvent:t,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:i})},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_isChildOfDropArea:function(t){return this._el===document||this._el===t||this._wel.isParentOf(t)},_findDroppableElement:function(t){var e="."+this.option("sClassName"),i=jindo.$$.test(t,e)?t:jindo.$$.getSingle("! "+e,t);return this._isChildOfDropArea(t)||(i=null),i},_onMouseMove:function(t){var e=this.option("oDragInstance");if(e&&e.isDragging()){var i=t.pos();if(t.element==this._elDragging||jindo.$Element(this._elDragging).isParentOf(t.element))for(var n,s,o=this._aItem,a=this._aItemRect,h=0;(n=a[h])&&(s=o[h]);h++)n.nLeft<=i.pageX&&i.pageX<=n.nRight&&n.nTop<=i.pageY&&i.pageY<=n.nBottom?(this._addOveredDroppableElement(s),this._fireMoveEvent(s,n,i,t)):this._removeOveredDroppableElement(s);else{var l=this._findDroppableElement(t.element);if(!l)return;this._addOveredDroppableElement(l);var r=jindo.$Element(l).offset(),c={nLeft:r.left,nTop:r.top,nRight:r.left+l.offsetWidth,nBottom:r.top+l.offsetHeight};c.nLeft<=i.pageX&&i.pageX<=c.nRight&&c.nTop<=i.pageY&&i.pageY<=c.nBottom&&this._fireMoveEvent(l,c,i,t)}}},_onMouseOver:function(t){var e=this._findDroppableElement(t.element);e&&this._addOveredDroppableElement(e)},_onMouseOut:function(t){var e=this._findDroppableElement(t.element);e&&t.relatedElement&&!jindo.$Element(t.relatedElement).isChildOf(t.element)&&this._removeOveredDroppableElement(e)},_getRectInfo:function(t){var e=jindo.$Element(t).offset();return{nLeft:e.left,nTop:e.top,nRight:e.left+t.offsetWidth,nBottom:e.top+t.offsetHeight}},_reCalculate:function(){var t=jindo.$$("."+this.option("sClassName"),this._el);this._el.tagName&&jindo.$$.test(this._el,"."+this.option("sClassName"))&&t.push(this._el),this._aItem=t,this._aItemRect=[];for(var e,i=0;e=t[i];i++)this._aItemRect.push(this._getRectInfo(e))}}).extend(jindo.Component),jindo.LayerEffect=jindo.$Class({$init:function(t){this.setLayer(t);var e=this;this._htTransitionGetterSetter={getter:function(t){return jindo.$Element(e._el)[t]()},setter:function(t,i){jindo.$Element(e._el)[t](parseFloat(i))}}},getLayer:function(){return this._el},setLayer:function(t){this._el=jindo.$(t),this._wel=jindo.$Element(t);var e=this._el.cloneNode(!0),i=jindo.$Element(e);i.opacity(0),this._wel.after(i),i.show(),this._sLayerCSSPosition=i.css("position");var n=i.offset();i.css({position:"absolute",top:"0px",left:"0px"});var s=i.offset();return this._sLayerCSSLeft=n.left-s.left+"px",this._sLayerCSSTop=n.top-s.top+"px",this._sLayerBGColor=i.css("backgroundColor"),this._nLayerWidth=i.width(),this._nLayerHeight=i.height(),i.width(this._nLayerWidth),i.height(this._nLayerHeight),this._sLayerCSSWidth=i.css("width"),this._sLayerCSSHeight=i.css("height"),this._sLayerCSSOverflowX=this._wel.css("overflowX"),this._sLayerCSSOverflowY=this._wel.css("overflowY"),this._sLayerCSSFontSize=this._wel.css("fontSize"),this._sLayerCSSFontSizeUnit=this._sLayerCSSFontSize.match(/^\-?[0-9\.]+(%|px|pt|em)?$/i)[1],i.css({overflow:"hidden",width:0,height:0}),this._nSlideMinWidth=i.width()+1,this._nSlideMinHeight=i.height()+1,i.leave(),this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({position:this._sLayerCSSPosition,overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},_fireEventBefore:function(t){return t&&this._transform(),this.fireEvent("before",{elLayer:this.getLayer()})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer()})},_fireEventEnd:function(){this._restore(),this.fireEvent("end",{elLayer:this.getLayer()})},_getTransition:function(){return this._oTransition?this._oTransition:this._oTransition=new jindo.Transition({bCorrection:!0})},_afterHide:function(){this._wel.hide().opacity(1),this._wel.css({top:this._sLayerCSSTop,left:this._sLayerCSSLeft,width:this._sLayerCSSWidth,height:this._sLayerCSSHeight,fontSize:this._sLayerCSSFontSize})},_onShowTransitionEnd:function(t){this._getTransition().detach("end",arguments.callee),this._fireEventEnd()},_onHideTransitionEnd:function(t){this._getTransition().detach("end",arguments.callee),this._afterHide(),this._fireEventEnd()},_getOption:function(t,e){for(var i in e)t[i]=e[i];return t},fadeIn:function(t){t=this._getOption({nFPS:30,nDuration:500},t||{});var e=this._wel.visible()&&this._wel.opacity()>0;if(e?t.nDuration*=(1-this._wel.opacity())/1:(this._wel.opacity(0),this._wel.show()),t.nDuration>0){this._fireEventBefore(!0);var i=this,n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),e||i._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(t.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(1)}),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},fadeOut:function(t){if(t=this._getOption({nFPS:30,nDuration:500},t||{}),this._wel.visible()&&this._wel.opacity()>0){this._fireEventBefore(),t.nDuration*=this._wel.opacity()/1;var e=this._getTransition().fps(t.nFPS).abort().detachAll();e.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(t.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(0)}),t.fCallback&&e.queue(jindo.$Fn(t.fCallback,this).bind(this)),e.start()}return this},slideDown:function(t){t=this._getOption({nFPS:30,nDuration:500},t||{});var e=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight&&this._fireEventBefore(!0)){e?t.nDuration=Math.ceil(t.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight))):this._wel.css("height",0).show().height(this._nSlideMinHeight);var i=this,n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),e||i._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)}),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},slideUp:function(t){if(t=this._getOption({nFPS:30,nDuration:500},t||{}),this._wel.visible()&&this._fireEventBefore(!0)){t.nDuration=Math.ceil(t.nDuration*(this._wel.height()/this._nLayerHeight));var e=this._getTransition().fps(t.nFPS).abort().detachAll();e.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)}),t.fCallback&&e.queue(jindo.$Fn(t.fCallback,this).bind(this)),e.start()}return this},grow:function(t){t=this._getOption({nFPS:30,nDuration:500},t||{});var e=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight&&this._fireEventBefore(!0)){e?t.nDuration=Math.ceil(t.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight))):this._wel.css({width:0,height:0}).show().width(this._nSlideMinWidth).height(this._nSlideMinHeight);var i=this,n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),e||i._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)}),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},shrink:function(t){if(t=this._getOption({nFPS:30,nDuration:500},t||{}),this._wel.visible()&&this._fireEventBefore(!0)){t.nDuration=Math.ceil(t.nDuration*(this._wel.height()/this._nLayerHeight));var e=this._getTransition().fps(t.nFPS).abort().detachAll();e.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nSlideMinWidth),height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)}),t.fCallback&&e.queue(jindo.$Fn(t.fCallback,this).bind(this)),e.start()}return this},unfold:function(t){t=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},t||{});var e,i,n=this._wel.visible();if(n?(e=t.nDuration/2*(this._nLayerWidth-this._wel.width())/this._nLayerWidth,i=t.nDuration/2*(this._nLayerHeight-this._wel.height())/this._nLayerHeight):(this._wel.css({width:0,height:0}).show().width(Math.max(t.nWidth,this._nSlideMinWidth)).height(Math.max(t.nHeight,this._nSlideMinHeight)),i=e=t.nDuration/2),i>0){var s=this;if(this._fireEventBefore(!0)){var o=this._getTransition().fps(t.nFPS).abort().detachAll();o.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),n||s._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(e,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth)}).queue(i,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)}),t.fCallback&&o.queue(jindo.$Fn(t.fCallback,this).bind(this)),o.start()}}return this},fold:function(t){var e,i;if(t=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},t||{}),this._wel.visible()&&(i=t.nDuration/2*this._wel.height()/this._nLayerHeight,(e=t.nDuration/2*this._wel.width()/this._nLayerWidth)>0&&this._fireEventBefore(!0))){var n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(i,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(Math.max(t.nHeight,this._nSlideMinHeight))}).queue(e,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(Math.max(t.nWidth,this._nSlideMinWidth))}),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},pullUp:function(t){t=this._getOption({nFPS:30,nDuration:500},t||{});var e=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight&&this._fireEventBefore(!0)){this._wel.css("position","absolute"),e?t.nDuration=Math.ceil(t.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight))):this._wel.css({height:0,top:parseInt(this._sLayerCSSTop,10)+this._nLayerHeight-this._nSlideMinHeight+"px"}).show().height(this._nSlideMinHeight);var i=this,n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),e||i._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).attach({playing:function(t){i._wel.css("top",parseInt(i._sLayerCSSTop,10)+i._nLayerHeight-i._wel.height()+"px")}}).queue(t.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)}),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},pushDown:function(t){if(t=this._getOption({nFPS:30,nDuration:500},t||{}),this._wel.visible()&&this._fireEventBefore(!0)){this._wel.css("position","absolute"),t.nDuration=Math.ceil(t.nDuration*(this._wel.height()/this._nLayerHeight));var e=this,i=this._getTransition().fps(t.nFPS).abort().detachAll();i.attach({playing:function(t){e._wel.css("top",parseInt(e._sLayerCSSTop,10)+e._nLayerHeight-e._wel.height()+"px")},end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)}),t.fCallback&&i.queue(jindo.$Fn(t.fCallback,this).bind(this)),i.start()}return this},condense:function(t){t=this._getOption({nFPS:30,nDuration:500,nScale:2},t||{});var e=this._wel.visible()&&this._wel.opacity()>0;if(e?t.nDuration*=(1-this._wel.opacity())/1:(this._wel.opacity(0),this._wel.show(),this._wel.css({left:parseInt(this._sLayerCSSLeft,10)-this._nLayerWidth/2+"px",top:parseInt(this._sLayerCSSTop,10)-this._nLayerHeight/2+"px",width:parseInt(this._sLayerCSSWidth,10)*t.nScale+"px",height:parseInt(this._sLayerCSSHeight,10)*t.nScale+"px",fontSize:parseInt(this._sLayerCSSFontSize,10)*t.nScale+this._sLayerCSSFontSizeUnit})),t.nDuration>0&&this._fireEventBefore(!0)){this._wel.css("position","absolute");var i=this,n=i.getLayer(),s=this._getTransition().fps(t.nFPS).abort().detachAll();s.attach({playing:function(t){1===t.nStep&&(this.detach("playing",arguments.callee),e||i._fireEventAppear())},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)},n,{"@left":jindo.Effect.cubicEaseOut(this._sLayerCSSLeft),"@top":jindo.Effect.cubicEaseOut(this._sLayerCSSTop),"@fontSize":jindo.Effect.cubicEaseOut(this._sLayerCSSFontSize),"@opacity":jindo.Effect.linear(1)}),t.fCallback&&s.queue(jindo.$Fn(t.fCallback,this).bind(this)),s.start()}return this},expand:function(t){if(t=this._getOption({nFPS:30,nDuration:500,nScale:2},t||{}),this._wel.visible()&&this._wel.opacity()>0&&this._fireEventBefore(!0)){t.nDuration*=this._wel.opacity()/1,this._wel.css("position","absolute"),"auto"==this._wel.css("left")&&this._wel.css("left",this._sLayerCSSLeft),"auto"==this._wel.css("top")&&this._wel.css("top",this._sLayerCSSTop);var e=this._getTransition().fps(t.nFPS).abort().detachAll();e.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(t.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth*t.nScale),height:jindo.Effect.cubicEaseOut(this._nLayerHeight*t.nScale)},this.getLayer(),{"@left":jindo.Effect.cubicEaseOut(parseInt(this._sLayerCSSLeft,10)-parseInt(this._sLayerCSSWidth,10)/2+"px"),"@top":jindo.Effect.cubicEaseOut(parseInt(this._sLayerCSSTop,10)-parseInt(this._sLayerCSSHeight,10)/2+"px"),"@fontSize":jindo.Effect.cubicEaseOut(parseInt(this._sLayerCSSFontSize,10)+this._sLayerCSSFontSizeUnit,2*parseInt(this._sLayerCSSFontSize,10)+this._sLayerCSSFontSizeUnit),"@opacity":jindo.Effect.linear(0)}),t.fCallback&&e.queue(jindo.$Fn(t.fCallback,this).bind(this)),e.start()}return this},shake:function(t){if(t=this._getOption({nFPS:30,nDuration:500,nWidth:20,nCount:3},t||{}),this._wel.visible()&&this._fireEventBefore()){this._wel.css("position","absolute");var e=this,i=this._getTransition().fps(t.nFPS).abort().detachAll();i.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){e._wel.css("left",this._sLayerCSSLeft)}}).queue(t.nDuration,this.getLayer(),{"@left":jindo.Effect.wave(t.nCount)(this._sLayerCSSLeft,t.nWidth+"px")}),t.fCallback&&i.queue(jindo.$Fn(t.fCallback,this).bind(this)),i.start()}return this},blink:function(t){if(t=this._getOption({nFPS:30,nDuration:500,nOpacity:0,nCount:1},t||{}),this._wel.visible()&&this._fireEventBefore()){var e=this,i=this._getTransition().fps(t.nFPS).abort().detachAll();i.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){e._wel.opacity(1)}}).queue(t.nDuration,this.getLayer(),{"@opacity":jindo.Effect.wave(t.nCount)(1,t.nOpacity)}),t.fCallback&&i.queue(jindo.$Fn(t.fCallback,this).bind(this)),i.start()}return this},flicker:function(t){t=this._getOption({nFPS:30,nDuration:500,sBackgroundColor:"#ffff00"},t||{});var e="transparent"==this._sLayerBGColor||"rgba(0, 0, 0, 0)"==this._sLayerBGColor?"#ffffff":this._sLayerBGColor;if(this._wel.visible()&&this._fireEventBefore()){var i=this,n=this._getTransition().fps(t.nFPS).abort().detachAll();n.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){i._wel.css("backgroundColor",i._sLayerBGColor)}}).queue(t.nDuration,this.getLayer(),{"@backgroundColor":jindo.Effect.cubicEaseIn(t.sBackgroundColor,e)}).queue((function(){i._wel.css("backgroundColor",i._sLayerBGColor)})),t.fCallback&&n.queue(jindo.$Fn(t.fCallback,this).bind(this)),n.start()}return this},bounce:function(t){if(t=this._getOption({nFPS:30,nDuration:500,nHeight:50},t||{}),this._wel.visible()&&this._fireEventBefore()){this._wel.css("position","absolute");var e=this,i=this._getTransition().fps(t.nFPS).abort().detachAll();i.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){e._wel.css("top",e._sLayerCSSTop)}}).queue(t.nDuration/5,this.getLayer(),{"@top":jindo.Effect.easeOut(this._sLayerCSSTop,parseInt(this._sLayerCSSTop,10)-t.nHeight+"px")}).queue(t.nDuration/5*4,this.getLayer(),{"@top":jindo.Effect.bounce(this._sLayerCSSTop)}),t.fCallback&&i.queue(jindo.$Fn(t.fCallback,this).bind(this)),i.start()}return this}}).extend(jindo.Component),jindo.LazyLoading={_bIE:jindo.$Agent().navigator().ie,_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})},jindo.LazyLoading.load=function(t,e,i){if("function"!=typeof e&&(e=function(){}),this._queueCallback(t,e),this._checkIsLoading(t))return!1;if(this._checkAlreadyLoaded(t))return this._doCallback(t),!0;this._waLoading.push(t);var n=this,s=document.getElementsByTagName("head")[0],o=document.createElement("script");return o.type="text/javascript",o.charset=i||"utf-8",o.src=t,this._whtScript.add(t,o),this._bIE?o.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(n._waLoaded.push(t),n._waLoading=n._waLoading.refuse(t),n._doCallback(t),this.onreadystatechange=null)}:o.onload=function(){n._waLoaded.push(t),n._waLoading=n._waLoading.refuse(t),n._doCallback(t)},s.appendChild(o),!0},jindo.LazyLoading._queueCallback=function(t,e){var i=this._whtCallback.$(t);i?i.push(e):this._whtCallback.$(t,[e])},jindo.LazyLoading._doCallback=function(t){for(var e=this._whtCallback.$(t).concat(),i=0;i<e.length;i++)this._whtCallback.$(t).splice(i,1),e[i]()},jindo.LazyLoading.abort=function(t){if(this._checkIsLoading(t)){var e=this.getScriptElement(t);return this._waLoading=this._waLoading.refuse(t),this._bIE?e.onreadystatechange=null:e.onload=null,jindo.$Element(e).leave(),this._whtScript.remove(t),this._whtCallback.remove(t),!0}return!1},jindo.LazyLoading._checkAlreadyLoaded=function(t){return this._waLoaded.has(t)},jindo.LazyLoading._checkIsLoading=function(t){return this._waLoading.has(t)},jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()},jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()},jindo.LazyLoading.getScriptElement=function(t){return this._whtScript.$(t)||null},jindo.MouseGesture=jindo.$Class({_elCanvas:null,_oDC:null,_htEventHandler:{},_aPointList:[],_nPointCount:0,_sDrawingType:"",_bMobileSafari:!1,$init:function(t){this.option({sLineColor:"#FF0000",nLineThickness:5,nFilteringDistance:10,elTargetWindow:window}),this.option(t);var e=window.navigator.userAgent.toLowerCase();this._bMobileSafari=/mobile/.test(e)&&/safari/.test(e)||/iphone/.test(e),this._htEventHandler.mouse_down=jindo.$Fn(this._onMouseDown,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchstart":"mousedown",!0),this._createCanvas()},_createCanvas:function(){jindo.$Agent().navigator().ie?(this.option("elTargetWindow").document.namespaces.vml_nhn||this.option("elTargetWindow").document.namespaces.add("vml_nhn","urn:schemas-microsoft-com:vml"),this.option("elTargetWindow").document.createStyleSheet().cssText="vml_nhn\\:shape, vml_nhn\\:stroke {behavior:url(#default#VML); display:inline-block; position:absolute;width:1px;height:1px;};",this._elCanvas=jindo.$("<div>"),this._sDrawingType="vml"):(this._elCanvas=jindo.$("<canvas>"),this._oDC=this._elCanvas.getContext("2d"),this._sDrawingType="canvas",this._oDC.globalCompositeOperation="destination-over");jindo.$Element(this._elCanvas).css({position:"absolute",top:"0px",left:"0px"}).hide().appendTo(this.option("elTargetWindow").document.body)},_showCanvas:function(){var t=jindo.$Document(this.option("elTargetWindow").document).clientSize(),e=jindo.$Document(this.option("elTargetWindow").document).scrollPosition();"canvas"==this._sDrawingType&&(this._elCanvas.width=t.width,this._elCanvas.height=t.height),jindo.$Element(this._elCanvas).css({top:e.top+"px",width:t.width+"px",height:t.height+"px",zIndex:999999}).show()},_hideCanvas:function(){this._elCanvas&&("vml"==this._sDrawingType?this._elCanvas.innerHTML="":"canvas"==this._sDrawingType&&(this._oDC.beginPath(),this._oDC.clearRect(0,0,this._elCanvas.offsetWidth,this._elCanvas.offsetHeight),this._oDC.closePath()),jindo.$Element(this._elCanvas).hide())},_drawLine:function(t,e){if("vml"==this._sDrawingType){var i=" m "+(1*t.nX-5)+","+(1*t.nY-5)+" l "+(1*e.nX-5)+","+(1*e.nY-5),n='<vml_nhn:shape coordsize="1 1" strokeweight="'+this.option("nLineThickness")+'pt" strokecolor="'+this.option("sLineColor")+'" path="'+i+'"><vml_nhn:stroke endcap="round" /></vml_nhn:shape>';this._elCanvas.insertAdjacentHTML("BeforeEnd",n)}else"canvas"==this._sDrawingType&&(this._oDC.save(),this._oDC.beginPath(),this._oDC.lineCap="round",this._oDC.lineWidth=this.option("nLineThickness")+2,this._oDC.strokeStyle=this.option("sLineColor"),this._oDC.moveTo(t.nX,t.nY),this._oDC.lineTo(e.nX,e.nY),this._oDC.stroke(),this._oDC.closePath(),this._oDC.restore())},_addPointList:function(t){var e,i={nX:(e=this._bMobileSafari?{pageX:t._event.targetTouches[0].clientX,pageY:t._event.targetTouches[0].clientY}:t.pos()).clientX,nY:e.clientY};return this._aPointList.push(i),this._nPointCount++,i},_onMouseDown:function(t){(t.mouse().right||this._bMobileSafari)&&(t.stop(),this._addPointList(t),this._htEventHandler.mouse_move=jindo.$Fn(this._onMouseMove,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove"),this._htEventHandler.mouse_up=jindo.$Fn(this._onMouseUp,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup"),"vml"==this._sDrawingType&&this.option("elTargetWindow").document.body.setCapture())},_onMouseMove:function(t){var e=this._addPointList(t);2===this._nPointCount&&this._showCanvas(),this._nPointCount%2&&this._drawLine({nX:this._aPointList[this._nPointCount-3].nX,nY:this._aPointList[this._nPointCount-3].nY},e)},_recognitionGesture:function(){for(var t,e,i,n,s,o,a,h=[],l=[],r=Math.tan(22.5*Math.PI/180),c=Math.tan(67.5*Math.PI/180),u=1;u<this._aPointList.length;u++)t=this._aPointList[u].nX,e=this._aPointList[u].nY,i=this._aPointList[u-1].nX,n=this._aPointList[u-1].nY,Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))>this.option("nFilteringDistance")&&(s=-(e-n)/(t-i),(o=Math.abs(s))>=c?a=e<n?8:4:o<r?a=t<i?6:2:o>=r&&o<c&&(a=s>0?1:3,t<i&&(a+=4)),h.push(a));for(u=1;u<h.length;u++)0===l.length?l.push(h[u]):l[l.length-1]!=h[u]&&l.push(h[u]);return{aCodeList:l,sCode:l.join("")}},_onMouseUp:function(t){if(t.mouse().right||this._bMobileSafari){t.stop(),this._htEventHandler.mouse_move&&this._htEventHandler.mouse_move.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove"),this._htEventHandler.mouse_up&&this._htEventHandler.mouse_up.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup"),this._aPointList.length&&!this._bMobileSafari&&(this._htEventHandler.setted_context_menu=this.option("elTargetWindow").document.oncontextmenu,this.option("elTargetWindow").document.oncontextmenu=function(){return!1},setTimeout(jindo.$Fn((function(){this.option("elTargetWindow").document.oncontextmenu=this._htEventHandler.setted_context_menu}),this).bind(),1)),"vml"==this._sDrawingType&&this.option("elTargetWindow").document.body.releaseCapture();var e=this._recognitionGesture();e.sCode&&this.fireEvent("gesture",e),this._nPointCount=0,this._aPointList=[],this._hideCanvas()}},destroy:function(){jindo.$Element(this._elCanvas).leave(),this._elCanvas=null,this._oDC=null,this._htEventHandler=null,this._nPointcount=null,this._aPointList=null,this._sDrawingType=null,this._bMobileSafari=null}}).extend(jindo.Component),jindo.CircularRolling=jindo.$Class({$init:function(){this.refresh()},refresh:function(){return this.getTransition().abort(),this._el[this._oKeys.scrollLeft]=0,this._nDuplicateCount=0,this._nItemCount=this.getItems().length,this._nDisplayedCount=this.getDisplayedItemCount(),this.isOverflowed()&&(this._nDuplicateCount=this._nDisplayedCount<=this._nItemCount/2?1:2,this._duplicate(this._nDuplicateCount)),this},_duplicate:function(t){for(var e,i=this._elList,n=jindo.$("<ul>"),s=i.innerHTML,o=0;o<t;o++){n.innerHTML=s,e=jindo.$$("> li",n);for(var a=0;a<e.length;a++)i.appendChild(e[a])}},_setStartPosition:function(t,e){var i=this._oKeys,n=t%this._nItemCount||0;if(e<0){var s=this._nDuplicateCount;n+this._nDisplayedCount>this._nItemCount&&(s-=1),n+=this._nItemCount*s}this._el[i.scrollLeft]=this._getPosition(n)},moveBy:function(t){if(this.isMoving())return!1;Math.abs(t)>this._nDisplayedCount&&(t=t>0?this._nDisplayedCount:-this._nDisplayedCount),this._setStartPosition(this.getIndex(),t);var e=this.getIndex()+t;return!!this._move(e)}}).extend(jindo.Rolling),jindo.SelectArea=jindo.$Class({_waToggleCandidate:null,_waSelected:null,_aSizeInfo:null,$init:function(t,e){this._el=jindo.$(t),this._wel=jindo.$Element(this._el);this.option({bActivateOnload:!0,sClassName:"selectable",htStatus:{sSelected:"selected"},bMultiSelection:!0,bDragSelect:!0,nThreshold:5,bDeselectAllOutside:!0,bRemainOne:!1,bToggleSelected:!1}),this.option(e||{}),this._waToggleCandidate=jindo.$A([]),this._waSelected=jindo.$A([]),this._sCtrl=jindo.$Agent().os().mac?"meta":"ctrl",this._welRectIndicator=null,this._wfDragStart=jindo.$Fn(this._onDragSelectStart,this),this._wfSelectStart=jindo.$Fn(this._onDragSelectStart,this),this._wfMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfMouseUp=jindo.$Fn(this._onMouseUp,this),this._wfMouseUpWithinSelected=jindo.$Fn(this._onMouseUpWithinSelected,this),this._wfCompute=jindo.$Fn(this._computeSizeAndPos,this),this.option("bActivateOnload")&&this.activate()},getSelectableElement:function(){return jindo.$$("."+this.option("sClassName"),this._el)},isSelectable:function(t){return jindo.$Element(t).isChildOf(this._el)&&jindo.$$.test(t,"."+this.option("sClassName"))},getIndex:function(t){return jindo.$A(this.getSelectableElement()).indexOf(t)},select:function(t,e,i){t=this._convertArray(t),void 0===e&&(e=!1),void 0===i&&(i=!0),e&&this.option("bMultiSelection")||this.deselectAll(!1);for(var n=this._convertArray(this.getSelected()).concat(),s=this.option("htStatus"),o=0;o<t.length;o++){var a,h=t[o],l=jindo.$Element(h);this.isSelectable(h)&&!this.isSelected(h)&&this.fireEvent("beforeSelect",a)&&(a={elSelectable:h,nIndex:this.getIndex(h),bSelectedAgain:1===t.length&&this._vLastSelected===t[0]},l.addClass(s.sSelected),this._waSelected.push(h),this.fireEvent("select",a))}return i&&this._fireChangeEvent(n),this},deselect:function(t,e){t=this._convertArray(t),void 0===e&&(e=!0);for(var i=this._convertArray(this.getSelected()).concat(),n=this.option("htStatus"),s=0;s<t.length;s++){var o=t[s],a=jindo.$Element(o),h={elSelectable:o,nIndex:this.getIndex(o)};this.isSelectable(o)&&this.isSelected(o)&&this.fireEvent("beforeDeselect",h)&&(a.removeClass(n.sSelected),this._waSelected=this._waSelected.refuse(o),this.fireEvent("deselect",h))}return e&&this._fireChangeEvent(i),this},deselectAll:function(t){return void 0===t&&(t=!0),this.deselect(this.getSelectableElement(),t),this},toggle:function(t,e){t=this._convertArray(t),void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var n=t[i];this.isSelected(n)?this.deselect(n,e):this.select(n,!0,e)}return this},getSelected:function(){return this._waSelected.length()>0?1===this._waSelected.length()?this._waSelected.get(0):this._waSelected.$value():null},isSelected:function(t){return this._waSelected.has(t)},_getSelectableUntil:function(t){var e=t,i=this._elStartPoint;if(i&&this.isSelected(i)){var n=jindo.$A(this.getSelectableElement()),s=n.indexOf(i),o=n.indexOf(t);e=n.slice(Math.min(s,o),Math.min(s,o)+Math.abs(s-o)+1).$value()}return e},_findSelectableElement:function(t){var e=this.option("sClassName");return jindo.$$.test(t,"."+e)?t:jindo.$$.getSingle("! ."+e,t)},_isChanged:function(t){var e=jindo.$A(t),i=this._convertArray(this.getSelected());if(t.length!=i.length)return!0;for(var n=0;n<i.length;n++)if(!e.has(i[n]))return!0;return!1},_fireChangeEvent:function(t){this._isChanged(t)&&this.fireEvent("change")},_convertArray:function(t){return t instanceof Array||(t=t?[t]:[]),t},_onMouseDown:function(t){var e=t.key(),i=this._findSelectableElement(t.element),n=this._convertArray(this.getSelected()).concat();if(this._vLastSelected=this.getSelected(),this._waSelectable=jindo.$A(this.getSelectableElement()),this._waLastSelected=jindo.$A(this._convertArray(this._vLastSelected)),i){var s=jindo.$A(this._convertArray(this._vLastSelected)).has(i);if(this.fireEvent("selectStart",{vLastSelected:this._vLastSelected,elSelectable:i,bWithinSelected:s,weEvent:t}))if(!s||e.shift||e[this._sCtrl]){var o=!1;if(this.option("bMultiSelection"))if(e.shift){e[this._sCtrl]&&(o=!0);var a=this._getSelectableUntil(i);a==i&&(this._elStartPoint=i),this.select(a,o,!1)}else this._elStartPoint=i,e[this._sCtrl]?this.toggle(i,!1):this.select(i,o,!1);else!this.option("bRemainOne")&&this.option("bToggleSelected")&&this.getSelected()==i?this.deselect(i,!1):this.select(i,o,!1);this._fireChangeEvent(n),this.fireEvent("selectEnd",{vSelected:this.getSelected()})}else this._elWaitMouseUp=i,this._wfMouseUpWithinSelected.attach(this._elWaitMouseUp,"mouseup")}else this._wfMouseUp.attach(document,"mouseup"),this._wfCompute.attach(window,"resize").attach(this._el,"scroll"),this.option("bMultiSelection")&&this.option("bDragSelect")&&(this._bOverThreshold=null,this._htDragStartPos=t.pos(),this._htDragStartPos.scrollTop=this._el.scrollTop,this._htDragStartPos.scrollLeft=this._el.scrollLeft,this._wfMouseMove.attach(document,"mousemove"))},_onDragSelectStart:function(t){t.stop(jindo.$Event.STOP_DEFAULT)},_getRectangleElement:function(){return!this._welRectIndicator&&this.option("bMultiSelection")&&this.option("bDragSelect")&&(this._welRectIndicator=jindo.$Element(jindo.$('<div style="position:absolute;left:-10px;top:-10px;width:1px;height:1px;margin:0;padding:0;border:1px dotted black;z-index:99999;">')),this._welRectIndicator.appendTo(this._el)),this._welRectIndicator},getRectangleElement:function(){return this._getRectangleElement().$value()},_computeSizeAndPos:function(){var t=this._aSizeInfo=[];jindo.$A(this.getSelectableElement()).forEach((function(e){t.push([e,e.offsetLeft,e.offsetTop,e.offsetLeft+e.offsetWidth,e.offsetTop+e.offsetHeight])}))},_onMouseMove:function(t){this._htDragEndPos=t.pos();var e=this._getRectangleElement(),i=e.$value(),n=this._htDragEndPos.pageX-this._htDragStartPos.pageX,s=this._htDragEndPos.pageY-this._htDragStartPos.pageY,o=this._htDragStartPos.layerX,a=this._htDragStartPos.layerY,h=this.option("nThreshold");if(h&&!this._bOverThreshold){if(h>Math.sqrt(n*n+s*s))return;this.fireEvent("dragStart"),this._bOverThreshold=!0,this._computeSizeAndPos(),this._nRectX=o,this._nRectY=a,this._nDragDirectionX=1,this._nDragDirectionY=1,e.offset(a,o),t.key()[this._sCtrl]||this.deselectAll(!1)}var l=n,r=s;this._placeRect(o,a,l,r),this._setToggleCandidate(this._getSelectableByRect([i,i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth,i.offsetTop+i.offsetHeight]))},_placeRect:function(t,e,i,n){var s=this._getRectangleElement();s.show(),this._nDragDirectionX=t>this._nRectX?1:-1,this._nDragDirectionY=e>this._nRectY?1:-1,i-=(this._el.scrollLeft-this._htDragStartPos.scrollLeft)*this._nDragDirectionX,n-=(this._el.scrollTop-this._htDragStartPos.scrollTop)*this._nDragDirectionY,s.width(Math.max(Math.abs(i),2)).height(Math.max(Math.abs(n),2)),t+=Math.min(i,0),e+=Math.min(n,0),s.css("left",t+"px").css("top",e+"px")},_getSelectableByRect:function(t){var e=[];return jindo.$A(this._aSizeInfo).forEach((function(i){i[1]<t[3]&&i[3]>t[1]&&i[2]<t[4]&&i[4]>t[2]&&(e.push(i[0]),jindo.$A.Continue())})),e},_setToggleCandidate:function(t){t=this._convertArray(t);var e=!1;this._waToggleCandidate.length()!=t.length&&(e=!0);var i=this.option("htStatus"),n=jindo.$A(t),s=jindo.$A([]);this._waToggleCandidate.forEach((function(t,i){n.has(t)||(s.push(t),e=!0)})),e&&(s.forEach((function(t){this._waToggleCandidate=this._waToggleCandidate.refuse(t),jindo.$Element(t).toggleClass(i.sSelected)}),this),n.forEach((function(t){this.isSelected(t)?jindo.$Element(t).removeClass(i.sSelected):jindo.$Element(t).addClass(i.sSelected)}),this),this._waToggleCandidate=jindo.$A(this._waToggleCandidate.$value().concat(t)).unique(),this.fireEvent("dragSelecting",{aSelectable:this._waToggleCandidate.$value()}))},_onMouseUp:function(t){var e=!this.isDragging()&&!t.key()[this._sCtrl]&&!this.option("bRemainOne")&&this.option("bDeselectAllOutside"),i=this._waToggleCandidate.length(),n=this._convertArray(this.getSelected()).concat();e&&this.deselectAll(!1),i&&(this._elStartPoint=this._waToggleCandidate.$value()[0],this.toggle(this._waToggleCandidate.$value())),this._fireChangeEvent(n),this._stopDragging()},stopSelecting:function(){return this._wfMouseUpWithinSelected.detach(this._elWaitMouseUp,"mouseup"),this},isDragging:function(){return this._bOverThreshold},_restore:function(){jindo.$ElementList(this._waToggleCandidate.$value()).removeClass(this.option("htStatus").sSelected),this.deselectAll(!1),this._waLastSelected.$value().length&&this.select(this._waLastSelected.$value(),!1,!1)},_stopDragging:function(){this._waToggleCandidate.empty(),this._htDragStartPos=null,this._htDragEndPos=null,this._wfMouseMove.detach(document,"mousemove"),this._wfMouseUp.detach(document,"mouseup"),this._wfCompute.detach(window,"resize").detach(this._el,"scroll"),this.isDragging()&&(this._bOverThreshold=null,this._getRectangleElement().hide(),this.fireEvent("dragEnd"))},stopDragging:function(){return this.isDragging()&&(this._restore(),this._stopDragging()),this},_onMouseUpWithinSelected:function(t){this.stopSelecting();var e=this._findSelectableElement(t.element);e&&e==t.currentElement&&(this.deselectAll(!1),this.select(e,!1,!0))},_onActivate:function(){this._sMozUserSelect=this._wel.css("MozUserSelect"),this._wel.css("MozUserSelect","none"),this._wfMouseDown.attach(this._el,"mousedown"),this._wfDragStart.attach(this._el,"dragstart"),this._wfSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wel.css("MozUserSelect",this._sMozUserSelect),this._wfMouseDown.detach(this._el,"mousedown"),this._wfDragStart.detach(this._el,"dragstart"),this._wfSelectStart.detach(this._el,"selectstart")}}).extend(jindo.UIComponent),jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:!1,$init:function(t){this.option({sMode:"parallel"}),this.option(t)},isRequesting:function(){return this._bIsRequesting},request:function(t,e){if(this.isRequesting())return!1;switch(t instanceof Array||(t=[t]),void 0===e&&(e={}),this._htMetaData=e,this.option("sMode")){case"parallel":this._parallelRequest(t);break;case"serial":this._serialRequest(t);break;default:return!1}return!0},_fireEventStart:function(){return this._bIsRequesting=!0,!!this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})||(this.abort(),!1)},_fireEventBeforeEachRequest:function(t){return!!this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[t],nIndex:t})||(this.abort(),!1)},_fireEventAfterEachResponse:function(t){return!!this.fireEvent("afterEachResponse",{oAjax:this._aAjax[t],nIndex:t})||(this.abort(),!1)},_parallelRequest:function(t){if(this._aAjaxData=t,this._aAjax=[],this._aStatus=[],this._aStatus.length=t.length,this._aResponse=[],this._fireEventStart()){var e=this;jindo.$A(this._aAjaxData).forEach((function(t,i){var n=function(t){t._constructor=e._aAjax[i];var n=e._findAjaxObjectIndexOfResponse(t._constructor);e._aResponse[n]=t,e._aStatus[n]=!0,e._fireEventAfterEachResponse(n)&&e._hasCompletedGotResponsesOfParallelResponses()&&e._complete()};e._aAjax.push(jindo.$Ajax(t.sUrl,t.htOption)),t.htOption.onload=n,t.htOption.onerror=n,t.htOption.ontimeout=n,e._aAjax[i].option(t.htOption),e._fireEventBeforeEachRequest(i)?e._aAjax[i].request(t.htParameter):jindo.$A.Break()}))}},_findAjaxObjectIndexOfResponse:function(t){return jindo.$A(this._aAjax).indexOf(t)},_hasCompletedGotResponsesOfParallelResponses:function(){var t=!0;return jindo.$A(this._aStatus).forEach((function(e){e||(t=!1,jindo.$A.Break())})),t},_serialRequest:function(t){this._aAjaxData=t,this._aAjax=[],this._aStatus=[],this._aStatus.length=t.length,this._aResponse=[];var e=this;jindo.$A(this._aAjaxData).forEach((function(t,i){var n=function(t){t._constructor=e._aAjax[i],e._aResponse.push(t),e._serialRequestNext()};e._aAjax.push(jindo.$Ajax(t.sUrl,t.htOption)),t.htOption.onload=n,t.htOption.onerror=n,t.htOption.ontimeout=n,e._aAjax[i].option(t.htOption)})),this._fireEventStart()&&this._fireEventBeforeEachRequest(0)&&(this._aAjax[0].request(this._aAjaxData[0].htParameter),this._aStatus[0]=!0)},_serialRequestNext:function(){for(var t=-1,e=0;e<this._aStatus.length;e++)if(!this._aStatus[e]){this._aStatus[e]=!0,t=e;break}t>0?this._fireEventAfterEachResponse(t-1)&&this._fireEventBeforeEachRequest(t)&&this._aAjax[t].request(this._aAjaxData[t].htParameter):-1==t&&this._fireEventAfterEachResponse(this._aStatus.length-1)&&this._complete()},_reset:function(){this._aAjaxData.length=0,this._aAjax.length=0,this._aStatus.length=0,this._aResponse.length=0,this._htMetaData=null,delete this._aAjaxData,delete this._aAjax,delete this._aStatus,delete this._aResponse,delete this._htMetaData,this._bIsRequesting=!1},abort:function(){jindo.$A(this._aAjax).forEach((function(t){t.abort()})),this._reset()},_complete:function(){var t,e=this._aResponse.concat(),i={};for(t in this._htMetaData)i[t]=this._htMetaData[t];this._reset(),this.fireEvent("complete",{aResponse:e,htMetaData:i})}}).extend(jindo.Component),jindo.Accordion=jindo.$Class({$init:function(t,e){this._el=jindo.$(t),this.option({sClassPrefix:"accordion-",sDirection:"vertical",sExpandEvent:"click",nDefaultIndex:null,bToggle:!1,nDuration:300,nFPS:30,fExpandEffect:jindo.Effect.cubicEaseOut,fContractEffect:jindo.Effect.cubicEaseIn,nExpandDelay:0,nContractDelay:0,bActivateOnload:!0}),this.option(e||{}),this._nExpanded=null,this._oTimer=new jindo.Timer,this._oTransition=new jindo.Transition({bCorrection:!0}).fps(this.option("nFPS")),this._wfOnMouseOver=jindo.$Fn(this._onMouseOver,this),this._wfOnMouseOut=jindo.$Fn(this._onMouseOut,this),this._wfOnExpandEvent=jindo.$Fn(this._onExpandEvent,this),this.option("bActivateOnload")&&this.activate()},getBaseElement:function(){return this._el},_onActivate:function(){this._wfOnExpandEvent.attach(this._el,this.option("sExpandEvent")),this._wfOnMouseOver.attach(this._el,"mouseover"),this._wfOnMouseOut.attach(this._el,"mouseout");var t=this.option("nDefaultIndex");"number"==typeof t&&this.expand(t)},_onDeactivate:function(){this._wfOnExpandEvent.detach(this._el,this.option("sExpandEvent")),this._wfOnMouseOver.detach(this._el,"mouseover"),this._wfOnMouseOut.detach(this._el,"mouseout")},_getBlock:function(t){var e=this.option("sClassPrefix");return jindo.$Element(t).hasClass(e+"block")?t:jindo.$$.getSingle("! ."+e+"block",t)},_onMouseOver:function(t){var e=t.element,i=this._getBlock(e),n=i?jindo.$A(this.getAllBlocks()).indexOf(i):null;if("number"==typeof n){var s=this.getHandler(n);(s===i||e===s||jindo.$Element(e).isChildOf(s))&&this.fireEvent(t.type,{nIndex:n,elBlock:i,elHandler:s,weEvent:t})}},_onExpandEvent:function(t){var e=t.element,i=this._getBlock(e),n=i?jindo.$A(this.getAllBlocks()).indexOf(i):null;if("number"==typeof n){var s=this.getHandler(n);(s===i||e===s||jindo.$Element(e).isChildOf(s))&&(this.option("bToggle")&&this.getExpanded()===n?this.contractAll():this.expand(n))}},_onMouseOut:function(t){var e=t.element,i=this._getBlock(e),n=i?jindo.$Element(i).parent().indexOf(i):null;i&&"number"==typeof n&&this.fireEvent(t.type,{nIndex:n,elBlock:i,elHandler:this.getHandler(n),weEvent:t})},_getHeadSize:function(t){var e=this.getHead(t);return e.style.zoom=1,{width:jindo.$Element(e).width(),height:jindo.$Element(e).height()}},_getBodySize:function(t){var e=this.getBody(t);return e.style.zoom=1,{width:jindo.$Element(e).width(),height:jindo.$Element(e).height()}},getTransition:function(){return this._oTransition},expand:function(t){var e=this.getAllBlocks(),i=this;if(t=Math.max(0,Math.min(e.length,t)),this.getExpanded()===t)return this;var n={nIndex:t,elBlock:e[t],elHandler:this.getHandler(t)};if(this.fireEvent("beforeExpand",n)){var s=i.option("fExpandEffect"),o=[this.option("nDuration")];jindo.$A(e).forEach((function(e,n,a){var h=i._getHeadSize(n),l=i._getBodySize(n);switch(i.option("sDirection")){case"vertical":n==t?o.push(a[n],{"@height":s(l.height+h.height+"px")}):o.push(a[n],{"@height":s(h.height+"px")});break;case"horizontal":n==t?o.push(a[n],{"@width":s(l.width+h.width+"px")}):o.push(a[n],{"@width":s(h.width+"px")})}})),this._oTimer.abort(),this._oTimer.start((function(){i._setExpanded(t),i._oTransition.abort().queue.apply(i._oTransition,o).start((function(){i.fireEvent("expand",n)}))}),this.option("nExpandDelay"))}return this},expandAll:function(){return this},contractAll:function(){var t=this,e=t.option("fContractEffect"),i=[this.option("nDuration")];return jindo.$A(this.getAllBlocks()).forEach((function(n,s,o){var a=t._getHeadSize(s);switch(t.option("sDirection")){case"vertical":i.push(o[s],{"@height":e(a.height+"px")});break;case"horizontal":i.push(o[s],{"@width":e(a.width+"px")})}})),this.fireEvent("beforeContract")&&this._oTimer.start((function(){t._setExpanded(null),t._oTransition.abort().queue.apply(t._oTransition,i).start((function(){t.fireEvent("contract")}))}),this.option("nContractDelay")),this},_setExpanded:function(t){this._nExpanded=t},getExpanded:function(){return this._nExpanded},getBlock:function(t){return this.getAllBlocks()[t]},getAllBlocks:function(){return jindo.$$("."+this.option("sClassPrefix")+"block",this._el)},getHead:function(t){return jindo.$$.getSingle("dt",this.getBlock(t))},getBody:function(t){return jindo.$$.getSingle("dd",this.getBlock(t))},getHandler:function(t){var e=this.getHead(t);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",e)||e}}).extend(jindo.UIComponent),jindo.DatePicker=jindo.$Class({_aDatePickerSet:[],_htSelectedDatePickerSet:null,$init:function(t,e){var i=new Date;this.htDefaultOption={bUseLayerPosition:!0,Calendar:{sClassPrefix:"calendar-",nYear:i.getFullYear(),nMonth:i.getMonth()+1,nDate:i.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:!1}},this.option(this.htDefaultOption),this.option(e),this._elCalendarLayer=jindo.$(t),this._initCalendar(),this._initLayerManager(),this._initLayerPosition(),this._wfFocusInput=jindo.$Fn(this._onFocusInput,this),this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this),this._wfMouseOverDate=jindo.$Fn(this._onMouseOverDate,this),this._wfMouseOutDate=jindo.$Fn(this._onMouseOutDate,this),this._wfClickDate=jindo.$Fn(this._onClickDate,this),this.activate()},addDatePickerSet:function(t){this.option();var e=this.getCalendar().option(),i={nYear:e.nYear,nMonth:e.nMonth,nDate:e.nDate,bDefaultSet:!0,bReadOnly:!0,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};if(void 0!==t.htOption)for(var n in t.htOption)void 0!==i[n]&&(i[n]=t.htOption[n]);t.htOption=i,this._aDatePickerSet.push(t);var s=this.getLayerManager();return void 0!==t.elInput&&(s.link(t.elInput),t.htOption.bReadOnly&&(t.elInput.readOnly=!0),this._wfFocusInput.attach(t.elInput,"focus"),this._wfClickLinkedElement.attach(t.elInput,"click")),void 0!==t.elButton&&(s.link(t.elButton),this._wfClickLinkedElement.attach(t.elButton,"click")),t.htOption.bDefaultSet&&this._setDate(t,t.htOption),this},removeDatePickerSet:function(t){for(var e=-1,i=0,n=this._aDatePickerSet.length;i<n;i++)if(this._aDatePickerSet[i].elInput==t.elInput||this._aDatePickerSet[i].elButton==t.elButton){e=i;break}var s=this._aDatePickerSet[e],o=this.getLayerManager();return void 0!==s.elButton&&(o.unlink(s.elButton),this._wfClickLinkedElement.detach(s.elButton,"click")),void 0!==s.elInput&&(this._wfFocusInput.detach(s.elInput,"focus"),this._wfClickLinkedElement.detach(s.elInput,"click"),s.elInput.readOnly=!1),s==this._htSelectedDatePickerSet&&(this._htSelectedDatePickerSet=null),this._aDatePickerSet.splice(i,1),this},getDatePickerSet:function(t){if(void 0===t)return this._aDatePickerSet;for(var e=0,i=this._aDatePickerSet.length;e<i;e++)if(this._aDatePickerSet[e].elInput==t||this._aDatePickerSet[e].elButton==t)return this._aDatePickerSet[e];return!1},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var t=this;this._oCalendar=new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar")).attach({beforeDraw:function(e){t.fireEvent("beforeDraw",e)||e.stop()},draw:function(e){var i=this.option("sClassPrefix"),n=t._htSelectedDatePickerSet;t.isSelectable(n,e)?(e.bSelectable=!0,jindo.Calendar.isSameDate(e,n)&&jindo.$Element(e.elDateContainer).addClass(i+"selected")):(e.bSelectable=!1,jindo.$Element(e.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")),t.fireEvent("draw",e)||e.stop()},afterDraw:function(e){t.fireEvent("afterDraw",e)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var t=this,e=this.getCalendarLayer();this._oLayerManager=new jindo.LayerManager(e,this.option("LayerManager")).attach({hide:function(e){t._htSelectedDatePickerSet=null}}).link(e)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){this.option("bUseLayerPosition")&&(this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition")))},getLayerPosition:function(){return this._oLayerPosition},getInput:function(t){return void 0!==t?t.elInput||null:this._htSelectedDatePickerSet&&this._htSelectedDatePickerSet.elInput||null},setInput:function(t,e){this._setDate(t,e)},getDate:function(t){return{nYear:t.nYear,nMonth:t.nMonth,nDate:t.nDate}},_setDate:function(t,e){t.nYear=1*e.nYear,t.nMonth=1*e.nMonth,t.nDate=1*e.nDate,void 0!==t.elInput&&(t.elInput.value=this._getDateFormat(t,e))},isSelectable:function(t,e){return jindo.Calendar.isBetween(e,t.htOption.htSelectableDateFrom,t.htOption.htSelectableDateTo)},setDate:function(t,e){if(this.isSelectable(t,e)){var i={sText:this._getDateFormat(t,e),nYear:e.nYear,nMonth:e.nMonth,nDate:e.nDate};return this.fireEvent("beforeSelect",i)&&(this._setDate(t,e),this.getLayerManager().hide(),this.fireEvent("select",i)),!0}return!1},_getDateFormat:function(t,e){var i=e.nYear,n=e.nMonth,s=e.nDate;n<10&&(n=("0"+1*n).toString()),s<10&&(s=("0"+1*s).toString());var o=t.htOption.sDateFormat;return o=o.replace(/yyyy/g,i).replace(/y/g,i.toString().substr(2,2)).replace(/mm/g,n).replace(/m/g,1*n).replace(/M/g,this.getCalendar().option("aMonthTitle")[n-1]).replace(/dd/g,s).replace(/d/g,1*s)},_linkOnly:function(t){var e=this.getLayerManager();e.setLinks([this.getCalendarLayer()]),void 0!==t.elInput&&e.link(t.elInput),void 0!==t.elButton&&e.link(t.elButton)},_onActivate:function(){var t=this.getCalendarLayer();this._wfMouseOverDate.attach(t,"mouseover"),this._wfMouseOutDate.attach(t,"mouseout"),this._wfClickDate.attach(t,"click"),this.getLayerManager().activate(),this.getCalendar().activate()},_onDeactivate:function(){var t=this.getCalendarLayer();this._wfMouseOverDate.detach(t,"mouseover"),this._wfMouseOutDate.detach(t,"mouseout"),this._wfClickDate.detach(t,"click").detach(t,"mouseover").detach(t,"mouseout"),this.getLayerManager().deactivate(),this.getCalendar().deactivate()},attachEvent:function(){return this.activate()},detachEvent:function(){return this.deactivate()},addButton:function(){return this},_onFocusInput:function(t){this.fireEvent("focus",{element:t.element})},_onClickLinkedElement:function(t){if(t.stop(jindo.$Event.CANCEL_DEFAULT),this.fireEvent("click",{element:t.element})){var e=this.getDatePickerSet(t.currentElement);if(e){this._htSelectedDatePickerSet=e,this._linkOnly(e),e.nYear||(e.nYear=e.htOption.nYear),e.nMonth||(e.nMonth=e.htOption.nMonth),e.nDate||(e.nDate=e.htOption.nDate);var i=e.nYear,n=e.nMonth;this.getCalendar().draw(i,n),this.getLayerManager().show(),this.option("bUseLayerPosition")&&(void 0!==e.elLayerPosition?this.getLayerPosition().setElement(e.elLayerPosition).setPosition():this.getLayerPosition().setElement(e.elInput).setPosition())}}},_getTargetDateElement:function(t){var e=this.getCalendar().option("sClassPrefix"),i=jindo.$Element(t).hasClass(e+"date")?t:jindo.$$.getSingle("."+e+"date",t);return!i||i!=t&&1!=i.length?null:i},_getTargetDateContainerElement:function(t){var e=this.getCalendar().option("sClassPrefix");if(jindo.$$.getSingle("! ."+e+"week",t)){for(var i=t;!jindo.$Element(i.parentNode).hasClass(e+"week");)i=i.parentNode;return jindo.$Element(i).hasClass(e+"unselectable")?null:i}return null},_setSelectedAgain:function(){if(this._elSelected){var t=this.getCalendar().option("sClassPrefix");jindo.$Element(this._elSelected).addClass(t+"selected"),this._elSelected=null}},_setAsideSelected:function(){if(!this._elSelected){var t=this.getCalendar().option("sClassPrefix");this._elSelected=jindo.$$.getSingle("."+t+"selected",this.elWeekAppendTarget),this._elSelected&&jindo.$Element(this._elSelected).removeClass(t+"selected")}},_onMouseOverDate:function(t){var e=this.getCalendar().option("sClassPrefix"),i=this._getTargetDateContainerElement(t.element);if(i){var n=this.getCalendar().getDateOfElement(i),s={element:t.element,nYear:n.nYear,nMonth:n.nMonth,nDate:n.nDate,bSelectable:!1};this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,n)&&(this._setAsideSelected(),jindo.$Element(i).addClass(e+"over"),s.bSelectable=!0),this.fireEvent("mouseover",s)}},_onMouseOutDate:function(t){var e=this.getCalendar().option("sClassPrefix"),i=this._getTargetDateContainerElement(t.element);if(i){var n=this.getCalendar().getDateOfElement(i),s={element:t.element,nYear:n.nYear,nMonth:n.nMonth,nDate:n.nDate,bSelectable:!1};this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,n)&&(jindo.$Element(i).removeClass(e+"over"),s.bSelectable=!0,this._setSelectedAgain()),this.fireEvent("mouseout",s)}else this._setSelectedAgain()},_onClickDate:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT);var e=t.element,i=this._getTargetDateElement(e);if(i){var n=this._getTargetDateContainerElement(i);if(n){var s=this.getCalendar().getDateOfElement(n);this.isSelectable(this._htSelectedDatePickerSet,s)&&this.setDate(this._htSelectedDatePickerSet,s)}}}}).extend(jindo.UIComponent),jindo.DefaultTextValue=jindo.$Class({$init:function(t,e){this.option({sValue:"",bActivateOnload:!0}),this.option(e||{}),this._elBaseTarget=jindo.$(t),this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this),this.option("bActivateOnload")&&this.activate()},getBaseElement:function(){return this._elBaseTarget},setDefault:function(){return this.getBaseElement().value=this.option("sValue"),this},setDefaultValue:function(t){var e=this.option("sValue");return this.option("sValue",t),this.getBaseElement().value==e&&this.setDefault(),this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var t=this.getBaseElement();""==t.value&&this.setDefault(),this._wfOnFocusAndBlur.attach(t,"focus").attach(t,"blur")},_onDeactivate:function(){var t=this.getBaseElement();this._wfOnFocusAndBlur.detach(t,"focus").detach(t,"blur")},_onFocusAndBlur:function(t){var e=this._elBaseTarget,i=e.value;switch(t.type){case"focus":i==this.getDefaultValue()&&(e.value="",e.select());break;case"blur":""==jindo.$S(i).trim().$value()&&this.setDefault()}}}).extend(jindo.UIComponent),jindo.FloatingLayer=jindo.$Class({$init:function(t,e){this._el=jindo.$(t),this._wel=jindo.$Element(t),this.option({nDelay:0,nDuration:500,fEffect:jindo.Effect.easeOut,bActivateOnload:!0}),this.option(e||{}),this._htPos=this._getPosition(),this._oTransition=(new jindo.Transition).fps(60),this._oTimer=new jindo.Timer,this._wfScroll=jindo.$Fn(this._onScroll,this),this.option("bActivateOnload")&&this.activate()},getTransition:function(){return this._oTransition},getTimer:function(){return this._oTimer},_onActivate:function(){var t=this;setTimeout((function(){t._onScroll()}),0),this._wfScroll.attach(window,"scroll").attach(window,"resize")},_onDeactivate:function(){this._wfScroll.detach(window,"scroll").detach(window,"resize")},_getPosition:function(){var t=this._el,e=this._wel,i=t.style.left,n=t.style.right,s=t.style.top,o=t.style.bottom,a={sAlignX:i?"left":n?"right":null,sAlignY:s?"top":o?"bottom":null},h=e.offset(),l=jindo.$Document().clientSize();switch(a.sAlignX){case"left":a.nX=h.left;break;case"right":a.nX=Math.max(l.width-h.left-e.width(),parseFloat(n))}switch(a.sAlignY){case"top":a.nY=h.top;break;case"bottom":a.nY=Math.max(l.height-h.top-e.height(),parseFloat(o))}return a},_onScroll:function(){var t=this;this._oTimer.start((function(){t._paint()}),this.option("nDelay"))},_paint:function(){var t,e,i=document.documentElement||document,n=document.body,s=this._el,o=this._wel,a=this._htPos,h={},l=jindo.$Element(s).offset(),r={nX:null,nY:null};if(a.sAlignX){switch(a.sAlignX){case"left":h.x=i.scrollLeft||n.scrollLeft,t=l.left-h.x;break;case"right":h.x=(i.scrollLeft||n.scrollLeft)+jindo.$Document().clientSize().width,t=h.x-(l.left+o.width())}r.nX=parseFloat(o.css(a.sAlignX))+(a.nX-t)}if(a.sAlignY){switch(a.sAlignY){case"top":h.y=i.scrollTop||n.scrollTop,e=l.top-h.y;break;case"bottom":h.y=(i.scrollTop||n.scrollTop)+jindo.$Document().clientSize().height,e=h.y-(l.top+o.height())}r.nY=parseFloat(o.css(a.sAlignY))+(a.nY-e)}this.fireEvent("beforeMove",r);var c={},u=this.option("fEffect");null!==r.nX&&(c["@"+a.sAlignX]=u(r.nX+"px")),null!==r.nY&&(c["@"+a.sAlignY]=u(r.nY+"px"));var d=this;this._oTransition.abort().start(this.option("nDuration"),s,c).start((function(){d.fireEvent("move")}))}}).extend(jindo.UIComponent),jindo.NumericStepper=jindo.$Class({_bIsOnFocus:!1,$init:function(t,e){this._el=jindo.$(t),this.option({sClassPrefix:"ns-",bActivateOnload:!0,bUseMouseWheel:!1,nStep:1,nDecimalPoint:0,nMin:-1/0,nMax:1/0,nDefaultValue:0,bInputReadOnly:!0}),this.option(e||{}),this._assignHTMLElements(),this._wfPlusClick=jindo.$Fn(this._onPlusClick,this),this._wfMinusClick=jindo.$Fn(this._onMinusClick,this),this._wfWheel=jindo.$Fn(this._onWheel,this),this._wfFocus=jindo.$Fn(this._onFocus,this),this._wfBlur=jindo.$Fn(this._onBlur,this),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){var t=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+t+"input",this._el),this._elPlusButton=jindo.$$.getSingle("."+t+"plus",this._el),this._elMinusButton=jindo.$$.getSingle("."+t+"minus",this._el)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(t){if(isNaN(t))this._elInput.value=this.option("nDefaultValue");else{t=t.toFixed(this.option("nDecimalPoint"));var e=this.option("nMin"),i=this.option("nMax"),n={nValue:t,nMin:e,nMax:i};if(t>i||t<e)return this.fireEvent("overLimit",n),void(this._elInput.value=Math.max(e,Math.min(i,t)));this.fireEvent("beforeChange",n)&&(this._elInput.value=n.nValue,this.fireEvent("change",n))}},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var t=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click"),this._wfMinusClick.attach(this.getMinusElement(),"click"),this._wfFocus.attach(t,"focus"),this._wfBlur.attach(t,"blur"),this.option("bUseMouseWheel")&&this._wfWheel.attach(t,"mousewheel"),this._elInput.readOnly=this.option("bInputReadOnly"),this.reset()},_onDeactivate:function(){var t=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click"),this._wfMinusClick.detach(this.getMinusElement(),"click"),this._wfFocus.detach(t,"focus"),this._wfBlur.detach(t,"blur"),this._wfWheel.detach(t,"mousewheel")},_onMinusClick:function(t){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(t){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(t){this.isFocused()&&(t.stop(jindo.$Event.CANCEL_DEFAULT),t.mouse().delta>0?this._onPlusClick():this._onMinusClick())},_onFocus:function(t){this._bIsOnFocus=!0},_onBlur:function(t){this._bIsOnFocus=!1,this.setValue(this.getValue()),this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent),jindo.Pagination=jindo.$Class({$init:function(t,e){this._elPageList=jindo.$(t),this._welPageList=jindo.$Element(this._elPageList),this._waPage=jindo.$A([]),this._fClickPage=jindo.$Fn(this._onClickPageList,this),this.option({bActivateOnload:!0,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:!1,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)}),this.option(e||{}),this.option("bActivateOnload")&&this.activate()},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(t){this.option({nItem:t})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(t){this.option("nItemPerPage",t)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(t){return this.getItemPerPage()*(t-1)+1},getPageOfItem:function(t){return Math.ceil(t/this.getItemPerPage())},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(t){var e=null;if("page"==this.option("sMoveUnit"))switch(t){case"pre":e=this.getCurrentPage()-1;break;case"next":e=this.getCurrentPage()+1}else{var i=this._getPageList(this.getCurrentPage());switch(t){case"pre_end":e=1;break;case"pre":e=(i-1)*this.option("nPagePerPageList");break;case"next":e=i*this.option("nPagePerPageList")+1;break;case"next_end":e=this._getLastPage()}}return e},_getPageList:function(t){if(this.option("bAlignCenter")){var e=t-Math.floor(this.option("nPagePerPageList")/2);return e=Math.max(e,1),e=Math.min(e,this._getLastPage())}return Math.ceil(t/this.option("nPagePerPageList"))},_isIn:function(t,e){return!!e&&(t===e||jindo.$Element(t).isChildOf(e))},_getPageElement:function(t){for(var e=0,i=this._waPage.$value().length;e<i;e++){var n=this._waPage.get(e);if(this._isIn(t,n))return n}return null},_onClickPageList:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT);var e=null,i=this.option(),n=t.element;if(this._isIn(n,i.elFirstPageLinkOn))e=this._getRelativePage("pre_end");else if(this._isIn(n,i.elPrevPageLinkOn))e=this._getRelativePage("pre");else if(this._isIn(n,i.elNextPageLinkOn))e=this._getRelativePage("next");else if(this._isIn(n,i.elLastPageLinkOn))e=this._getRelativePage("next_end");else{var s=this._getPageElement(n);if(!s)return;e=parseInt(jindo.$Element(s).text(),10)}this.movePageTo(e)},_convertToAvailPage:function(t){var e=this._getLastPage();return t=Math.max(t,1),t=Math.min(t,e)},movePageTo:function(t,e){void 0===e&&(e=!0),t=this._convertToAvailPage(t),this._nCurrentPage=t,e&&!this.fireEvent("beforeMove",{nPage:t})||(this._paginate(t),e&&this.fireEvent("move",{nPage:t}))},reset:function(t){void 0===t&&(t=this.option("nItem")),this.setItemCount(t),this.movePageTo(1,!1)},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click"),this.setItemCount(this.option("nItem")),this.movePageTo(this.option("nPage"),!1),this._welPageList.addClass("loaded")},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click"),this._welPageList.removeClass("loaded")},_addTextNode:function(){var t=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(t))},_paginate:function(t){this._empty(),this._addTextNode();var e,i,n,s,o=this.option(),a=o.elFirstPageLinkOn,h=o.elPrevPageLinkOn,l=o.elNextPageLinkOn,r=o.elLastPageLinkOn,c=o.elFirstPageLinkOff,u=o.elPrevPageLinkOff,d=o.elNextPageLinkOff,f=o.elLastPageLinkOff,_=this._getLastPage(),p=this._getPageList(t),g=this._getPageList(_);(0===_?this._welPageList.addClass("no-result"):1==_?this._welPageList.addClass("only-one"):this._welPageList.removeClass("only-one").removeClass("no-result"),o.bAlignCenter)?(e=t-Math.floor(o.nPagePerPageList/2),(i=(e=Math.max(e,1))+o.nPagePerPageList-1)>_&&(e=_-o.nPagePerPageList+1,e=Math.max(e,1),i=_)):(e=(p-1)*o.nPagePerPageList+1,i=p*o.nPagePerPageList,i=Math.min(i,_));"page"==o.sMoveUnit&&(p=t,g=_),t>1?a&&(this._welPageList.append(a),this._addTextNode()):c&&(this._welPageList.append(c),this._addTextNode()),p>1?h&&(this._welPageList.append(h),this._addTextNode()):u&&(this._welPageList.append(u),this._addTextNode());for(var m=e;m<=i;m++)m==t?n=jindo.$(jindo.$Template(o.sCurrentPageTemplate).process({page:m.toString()})):(n=jindo.$(jindo.$Template(o.sPageTemplate).process({page:m.toString()})),this._waPage.push(n)),s=jindo.$Element(n),m==e&&s.addClass(this.option("sClassFirst")),m==i&&s.addClass(this.option("sClassLast")),this._welPageList.append(n),this._addTextNode();p<g?l&&(this._welPageList.append(l),this._addTextNode()):d&&(this._welPageList.append(d),this._addTextNode()),t<_?r&&(this._welPageList.append(r),this._addTextNode()):f&&(this._welPageList.append(f),this._addTextNode())},_empty:function(){var t=this.option(),e=t.elFirstPageLinkOn,i=t.elPrevPageLinkOn,n=t.elNextPageLinkOn,s=t.elLastPageLinkOn,o=t.elFirstPageLinkOff,a=t.elPrevPageLinkOff,h=t.elNextPageLinkOff,l=t.elLastPageLinkOff;e=this._clone(e),i=this._clone(i),s=this._clone(s),n=this._clone(n),o=this._clone(o),a=this._clone(a),l=this._clone(l),h=this._clone(h),this._waPage.empty(),this._welPageList.empty()},_clone:function(t){return t&&"function"==typeof t.cloneNode?t.cloneNode(!0):t}}).extend(jindo.UIComponent),jindo.RollingChart=jindo.$Class({_nIndexOfRolling:0,_bIsRolling:!1,$init:function(t,e){this.option({sClassPrefix:"rollingchart-",sDirection:"down",nFPS:50,nDuration:300,nRollingInterval:100,sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:null,nRequestInterval:1e4,bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._assignHTMLElements(),this._initTimer(),this._initRolling(),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){this._elList=jindo.$$.getSingle("ol",this._el),this._aItems=jindo.$$("> li",this._elList)},getList:function(){return this._elList},getItems:function(){return this._aItems},getListOfItem:function(t){return jindo.$$.getSingle("ul",t)},isRolling:function(){return this._bIsRolling},_initTimer:function(){this._oRequestTimer=new jindo.Timer},getTimer:function(){return this._oRequestTimer},_initRolling:function(){var t=this;this._oRollingEventHandler={end:function(){setTimeout((function(){t.fireEvent("afterRolling",{nIndex:t._nIndexOfRolling}),t._roll(t._nIndexOfRolling+1)}),t.option("nRollingInterval"))}},this._oRolling=new jindo.Rolling(this._el,{nFPS:this.option("nFPS"),nDuration:this.option("nDuration"),sDirection:"vertical",fEffect:jindo.Effect.linear})},getRolling:function(){return this._oRolling},_setItemIndexToRolling:function(t){var e=this.getListOfItem(this.getItems()[t]),i=this.getRolling();i._el=e,i._elList=e},_onActivate:function(){var t=this;this.getTimer().start((function(){return t._stopRequest(),t._request(),!0}),this.option("nRequestInterval"))},_onDeactivate:function(){this.getTimer().abort()},_request:function(t){if(!this.isRolling()){var e=this.option(),i=e.sUrl,n=e.htRequestParameter,s=this;this._oAjax=jindo.$Ajax(i,{type:e.sRequestType,method:e.sRequestMethod,onload:function(t){try{var e={htResponseJSON:t.json()};if(!s.fireEvent("response",e))return;if(!s.fireEvent("beforeUpdate"))return;var i=e.htResponseJSON;s._addItemToRolling(i),s.getRolling().getTransition().attach(s._oRollingEventHandler),s._roll(0)}catch(t){}}}),s.fireEvent("request")&&this._oAjax.request(n)}},_stopRequest:function(){try{this._oAjax.abort(),this._oAjax=null}catch(t){}},_addItemToRolling:function(t){var e=this,i=this.option("sDirection");jindo.$A(this.getItems()).forEach((function(n,s){var o=jindo.$Element(jindo.$("<li>"));o.html(t.items[s]);var a=e.getListOfItem(n);"down"==i?(a.insertBefore(o.$value(),a.firstChild),a.scrollTop=9999):(jindo.$Element(a).append(o.$value()),a.scrollTop=0)}))},_removeItemRolled:function(){var t=this,e=this.option("sDirection");jindo.$A(this.getItems()).forEach((function(i,n){if("down"==e)jindo.$Element(jindo.$$("li",t.getListOfItem(i))[1]).leave();else{var s=t.getListOfItem(i);jindo.$Element(jindo.$$.getSingle("li",s)).leave(),s.scrollTop=0}})),this._nIndexOfRolling=0},_roll:function(t){this._bIsRolling=!0,this._nIndexOfRolling=t,this.fireEvent("beforeRolling",{nIndex:t});var e=t;if(e==this.getItems().length)return this._removeItemRolled(),this._nIndexOfRolling=0,this.getRolling().getTransition().detach(this._oRollingEventHandler),this._bIsRolling=!1,void this.fireEvent("afterUpdate");this._setItemIndexToRolling(e);var i=1;"down"==this.option("sDirection")&&(i=-1),this.getRolling().moveBy(i)}}).extend(jindo.UIComponent),jindo.ScrollBox=new jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"scrollbar-",bActivateOnload:!0,sOverflowX:"auto",sOverflowY:"auto",bAdjustThumbSize:!0,nMinThumbSize:50,nDelta:16}),this.option(e||{}),this._el=jindo.$(t),this.option("bActivateOnload")&&(this.activate(),this.reset())},reset:function(){this._autoToggleScrollBar();var t=this.hasScrollBarHorizontal(),e=this.hasScrollBarVertical();this._adjustBoxSize(),this._adjustContentSize(),this._autoToggleScrollBar(),t==this.hasScrollBarHorizontal()&&e==this.hasScrollBarVertical()||(this._adjustBoxSize(),this._adjustContentSize()),this._autoToggleAvailability(),this._adjustTrackSize(),this._adjustThumbSize(),this.$super.reset()},_onActivate:function(){this.$super._onActivate(),this.reset()},_onDeactivate:function(){this.$super._onDeactivate(),this._adjustBoxSize()},setSize:function(t,e){t&&jindo.$Element(this._el).css("width",t+"px"),e&&jindo.$Element(this._el).css("height",e+"px"),this.setBoxSize(t,e),this._oBoxSize={nWidth:jindo.$Element(this._elBox).width(),nHeight:jindo.$Element(this._elBox).height()},this.reset()},getContentSize:function(){var t=jindo.$Element(this._elContent);return{nWidth:parseInt(t.width(),10),nHeight:parseInt(t.height(),10)}},setContentSize:function(t,e){var i=jindo.$Element(this._elContent);t&&(t==1/0?i.css("width",""):i.css("width",t+"px")),e&&(e==1/0?i.css("height","auto"):i.css("height",e+"px")),this.$super.reset()},getBoxSize:function(){var t=jindo.$Element(this._elBox);return{nWidth:parseInt(t.width(),10),nHeight:parseInt(t.height(),10)}},setBoxSize:function(t,e){var i=jindo.$Element(this._elBox);t&&i.css("width",t+"px"),e&&i.css("height",e+"px"),this.$super.reset()},getTrackSize:function(t){if(!t.elScrollBar)return{nWidth:0,nHeight:0};var e=jindo.$Element(t.elTrack);return{nWidth:parseInt(e.width(),10),nHeight:parseInt(e.height(),10)}},setTrackSize:function(t,e,i){var n=jindo.$Element(t.elTrack);e&&n.css("width",e+"px"),i&&n.css("height",i+"px")},isNeededScrollBarHorizontal:function(){if("scroll"==this.option("sOverflowX"))return!0;var t=this.getContentSize(),e=this.getDefaultBoxSize();if(this.getScrollBarHorizontal().elScrollBar&&"hidden"!=this.option("sOverflowX")){if(this.hasScrollBarVertical()&&t.nWidth>e.nWidth-jindo.$Element(this.getScrollBarVertical().elScrollBar).width())return!0;if(t.nWidth>e.nWidth)return!0}return!1},isNeededScrollBarVertical:function(){if("scroll"==this.option("sOverflowY"))return!0;var t=this.getContentSize(),e=this.getDefaultBoxSize();if(this.getScrollBarVertical().elScrollBar&&"hidden"!=this.option("sOverflowY")){if(this.hasScrollBarHorizontal()&&t.nHeight>e.nHeight-jindo.$Element(this.getScrollBarHorizontal().elScrollBar).height())return!0;if(t.nHeight>e.nHeight)return!0}return!1},_autoToggleScrollBar:function(){if(this.isActivating()){var t,e=this.option("sClassPrefix"),i=this.getScrollBarHorizontal(),n=this.getScrollBarVertical(),s=this.option("bAdjustThumbSize"),o=this.isNeededScrollBarVertical();n.elScrollBar&&(t=jindo.$Element(n.elScrollBar),o?t.addClass(e+"show"):t.removeClass(e+"show"),n.elThumb&&s&&jindo.$Element(n.elThumb).css("height","0px"));var a=this.isNeededScrollBarHorizontal();i.elScrollBar&&(t=jindo.$Element(i.elScrollBar),a?t.addClass(e+"show"):t.removeClass(e+"show"),i.elThumb&&s&&jindo.$Element(i.elThumb).css("width","0px")),n.elScrollBar&&(t=jindo.$Element(n.elScrollBar),this.isNeededScrollBarVertical()?t.addClass(e+"show"):t.removeClass(e+"show"),n.elThumb&&s&&jindo.$Element(n.elThumb).css("height","0px"))}},_adjustTrackSize:function(){if(this.isActivating()){var t=this.getDefaultBoxSize(),e=this.getScrollBarHorizontal(),i=this.getScrollBarVertical();if(this.isNeededScrollBarHorizontal()&&e.elScrollBar){var n=t.nWidth,s=jindo.$Element(e.elScrollBar);s.css("top",t.nHeight-s.height()+"px");this.hasScrollBarVertical()&&i.elScrollBar&&(n-=parseInt(jindo.$Element(i.elScrollBar).width(),10)),s.width(n);var o=0;e.elButtonLeft&&(n-=o=parseInt(jindo.$Element(e.elButtonLeft).width(),10)),e.elButtonRight&&(n-=parseInt(jindo.$Element(e.elButtonRight).width(),10)),jindo.$Element(e.elTrack).css("left",o+"px"),this.setTrackSize(e,n,null)}if(this.isNeededScrollBarVertical()&&i.elScrollBar){var a=t.nHeight;this.hasScrollBarHorizontal()&&e.elScrollBar&&(a-=parseInt(jindo.$Element(e.elScrollBar).height(),10)),i.elButtonUp&&(a-=parseInt(jindo.$Element(i.elButtonUp).height(),10)),i.elButtonDown&&(a-=parseInt(jindo.$Element(i.elButtonDown).height(),10)),this.setTrackSize(i,null,a)}}},_adjustBoxSize:function(){var t=this.getDefaultBoxSize(),e=this.getScrollBarHorizontal(),i=this.getScrollBarVertical(),n=this.hasScrollBarVertical(),s=this.hasScrollBarHorizontal();if(this.setBoxSize(t.nWidth,t.nHeight),this.isActivating()){if(s&&e.elScrollBar){var o=t.nHeight;o-=parseInt(jindo.$Element(e.elScrollBar).height(),10),this.setBoxSize(null,o)}if(n&&i.elScrollBar){var a=t.nWidth;a-=parseInt(jindo.$Element(i.elScrollBar).width(),10),this.setBoxSize(a,null)}}},_adjustContentSize:function(){if(this.isActivating()){var t,e,i=this.getBoxSize(),n="hidden"!=this.option("sOverflowY"),s="hidden"!=this.option("sOverflowX");n&&!s&&(t=i.nWidth),s&&!n&&(e=i.nHeight),this.setContentSize(t||1/0,e||1/0)}},_adjustThumbSize:function(){if(this.isActivating()&&this.option("bAdjustThumbSize")){var t,e=this.option("nMinThumbSize"),i=this.getContentSize(),n=this.getBoxSize(),s=this.getScrollBarHorizontal(),o=this.getScrollBarVertical();if(o.elScrollBar){var a=this.getTrackSize(o),h=Math.floor(parseInt(a.nHeight*n.nHeight/i.nHeight,10));h<e&&(h=e),h>=a.nHeight&&(h=a.nHeight),jindo.$Element(o.elThumb).height(h),t=0,o.elThumbHead&&(t+=jindo.$Element(o.elThumbHead).height()),o.elThumbFoot&&(t+=jindo.$Element(o.elThumbFoot).height()),o.elThumbBody&&jindo.$Element(o.elThumbBody).height(h-t)}if(s.elScrollBar){var l=this.getTrackSize(s),r=Math.floor(parseInt(l.nWidth*n.nWidth/i.nWidth,10));r<e&&(r=e),r>=l.nWidth&&(r=l.nWidth),jindo.$Element(s.elThumb).width(r),t=0,s.elThumbHead&&(t+=jindo.$Element(s.elThumbHead).width()),s.elThumbFoot&&(t+=jindo.$Element(s.elThumbFoot).width()),s.elThumbBody&&jindo.$Element(s.elThumbBody).width(r-t)}}},_autoToggleAvailability:function(){var t=this.option("sClassPrefix"),e=this.getContentSize(),i=this.getBoxSize(),n=this.getScrollBarHorizontal(),s=this.getScrollBarVertical();n.elScrollBar&&("scroll"==this.option("sOverflowX")&&i.nWidth>=e.nWidth?(jindo.$Element(n.elScrollBar).addClass(t+"disabled"),this.$super._onDeactivate("horizontal"),this.isActivating()&&jindo.$Element(this._el).removeClass(t+"noscript")):(jindo.$Element(n.elScrollBar).removeClass(t+"disabled"),this.isActivating()&&this.$super._onActivate("horizontal"))),s.elScrollBar&&("scroll"==this.option("sOverflowY")&&i.nHeight>=e.nHeight?(jindo.$Element(s.elScrollBar).addClass(t+"disabled"),this.$super._onDeactivate("vertical"),this.isActivating()&&jindo.$Element(this._el).removeClass(t+"noscript")):(jindo.$Element(s.elScrollBar).removeClass(t+"disabled"),this.isActivating()&&this.$super._onActivate("vertical")))}}).extend(jindo.ScrollBar),jindo.StarRating=jindo.$Class({$init:function(t,e){this.option({nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:!1,bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._wel=jindo.$Element(t),this._assignHTMLElements(),this._wfMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this),this._wfClick=jindo.$Fn(this._onClick,this),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement()),this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(t){return t=this._round(t,this.option("nStep")),t=Math.min(t,this.option("nMaxValue")),t=Math.max(t,0)},setValue:function(t,e){void 0===e&&(e=!0);var i=this.option("nMaxValue");t=this.getValueToBeSet(t);var n=this._nBaseWidth*t/i;return n=Math.min(n,this._nBaseWidth),this._welRatingElement.width(n),this._nValue=t,e&&this.fireEvent("set",{nValue:this._nValue}),this},reset:function(){var t=this.option("nDefaultValue")||0;return this.setValue(t,!1),this},_round:function(t,e){var i,n,s=t,o=Math.floor(t),a=o+1,h=1;for(n=o;n<=a;n+=e)(i=Math.abs(t-n))<=h&&(h=i,s=n);return s.toFixed(Math.max(e.toString().length-2,0))},_onActivate:function(){var t=this.getBaseElement();this._wfMouseMove.attach(t,"mousemove"),this._wfMouseLeave.attach(t,"mouseleave"),this._wfClick.attach(t,"click"),this._nBaseWidth=this._wel.width(),this.reset()},_onDeactivate:function(){var t=this.getBaseElement();this._wfMouseMove.detach(t,"mousemove"),this._wfMouseLeave.detach(t,"mouseleave"),this._wfClick.detach(t,"click")},_onMouseMove:function(t){var e,i=t.pos(!0).offsetX+1,n=i>this._nBaseWidth?this._nBaseWidth:i;this.option("bSnap")&&(e=i/this._nBaseWidth*this.option("nMaxValue"),n=this._round(e,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue"),n=Math.min(n,this._nBaseWidth)),this._welRatingElement.css("width",n+"px"),e=this.getValueByWidth(),this.fireEvent("move",{nValue:e,nValueToBeSet:this.getValueToBeSet(e)})},_onMouseLeave:function(t){this.setValue(this._nValue,!1),this.fireEvent("out")},_onClick:function(t){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent),jindo.TabControl=jindo.$Class({_bIsActivating:!1,_nCurrentIndex:null,_welSelectedTab:null,_welSelectedPanel:null,$init:function(t,e){this.option({sClassPrefix:"tc-",sCheckEvent:"click",bActivateOnload:!0}),this.option(e||{}),this._el=jindo.$(t),this._wfEventTab=jindo.$Fn(this._onEventTab,this),this._assignHTMLElements(),this.option("bActivateOnload")&&(this._selectTab(this._elSelectedTab),this.activate())},_assignHTMLElements:function(){var t=this.option("sClassPrefix"),e=this._el;this._aTab=jindo.$$("."+t+"tab",e),this._aPanel=jindo.$$("."+t+"panel",e),this._elSelectedTab=jindo.$$.getSingle("."+t+"tab."+t+"selected",e)||this.getTab(0),this._waTab=jindo.$A(this._aTab)},getTab:function(t){return this.getTabs()[t]},getTabs:function(){return this._aTab},getPanel:function(t){return this.getPanels()[t]},getPanels:function(){return this._aPanel},selectTab:function(t,e){void 0===e&&(e=!0),this._selectTab(this.getTab(t),e)},getIndex:function(t){return this._waTab.indexOf(t)},getCurrentIndex:function(){return this._nCurrentIndex},_selectTab:function(t,e){void 0===e&&(e=!0);var i=this.option("sClassPrefix"),n=this.getIndex(t),s=this.getPanel(n);if(!e||this.fireEvent("beforeSelect",{nIndex:n,elTab:t,elPanel:s})){var o=jindo.$Element(t);this._welSelectedTab&&this._welSelectedTab.removeClass(i+"selected"),this._welSelectedTab=o,o.addClass(i+"selected");var a=jindo.$Element(s);this._welSelectedPanel&&this._welSelectedPanel.removeClass(i+"selected"),this._welSelectedPanel=a,a.addClass(i+"selected"),this._nCurrentIndex=n,e&&this.fireEvent("select",{nIndex:n,elTab:t,elPanel:s})}},getBaseElement:function(){return this._el},_onActivate:function(){this._wfEventTab.attach(this._el,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfEventTab.detach(this._el,this.option("sCheckEvent"))},_onEventTab:function(t){if(this.fireEvent(t.type,{weEvent:t})){var e=this.option("sClassPrefix"),i=t.element,n=jindo.$$.test(i,"."+e+"tab")?i:jindo.$$.getSingle("! ."+e+"tab",i);n&&this._selectTab(n)}}}).extend(jindo.UIComponent),jindo.DynamicTree=jindo.$Class({$init:function(t,e){this.option({sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:{}}),this.option(e||{}),this._attachEvents(),this._initAjax()},_attachEvents:function(){this.attach("beforeExpand",(function(t){var e=t.element;if(!this.getNodeData(e).hasOwnProperty("_aChildren")){var i=this.option("htRequestParameter");i.key=this._getNodeDataKey(e);var n={element:e,htRequestParameter:i};this.fireEvent("request",n)?this._request(n.htRequestParameter):t.stop()}}))},_initAjax:function(){var t=this.option(),e=this.option("sClassPrefix"),i=t.sUrl,n=this;this._oAjax=jindo.$Ajax(i,{type:t.sRequestType,method:t.sRequestMethod,onload:function(t){try{var i={htResponseJSON:t.json()};if(!n.fireEvent("response",i))return;var s=n.createNode(i.htResponseJSON.aChildren),o=jindo.$$.getSingle("."+i.htResponseJSON.sKey,n.getRootList());if(n.getChildListOfNode(o))return;n.appendNode(o,s),jindo.$A(s).forEach((function(t){jindo.$$.getSingle("."+e+"has-child",t)&&jindo.$Element(t).addClass(e+"collapsed")}))}catch(t){}}})},_request:function(t){this._oAjax.abort(),this._oAjax.request(t)},hasChild:function(t){return this._htNodeData[this._getNodeDataKey(t)].bHasChild},_paintNode:function(t){if(t){var e=this.getPartsOfNode(t),i=this.getChildNodes(t),n=this.getNodeData(t),s=jindo.$Element(t),o=jindo.$Element(e.elItem);if(delete n._aChildren,this.hasChild(t)){o.addClass(this.htClassName.sHasChild),i.length>0&&(n.bHasChild=!0,n._aChildren=[]);var a=this;jindo.$A(i).forEach((function(t,e){n._aChildren.push(a.getNodeData(t))}))}else o.removeClass(this.htClassName.sHasChild),e.elChild&&e.elChild.parentNode.removeChild(e.elChild);n.lastNode=!jindo.$$.getSingle("~ ."+this.htClassName.sNode,t),n.lastNode?s.addClass(this.htClassName.sLastNode):s.removeClass(this.htClassName.sLastNode),t.parentNode.style.zoom=1}},_makeNodeData:function(t){var e=this.getNodeData(t);e.bHasChild=!1,jindo.$Element(this.getPartsOfNode(t).elItem).hasClass(this.option("sClassPrefix")+"has-child")&&(e.bHasChild=!0),this.$super._makeNodeData(t)}}).extend(jindo.Tree),jindo.CheckBox=jindo.$Class({sTagName:"input[type=checkbox]",$init:function(t,e){this.option({sClassPrefix:"checkbox-"}),this.option(e||{}),this._elWrapper=jindo.$(t),this._welWrapper=jindo.$Element(t),this._assignHTMLElements(),this.wfOnClickInput=jindo.$Fn(this._onClickInput,this),this.wfOnClickWrapper=jindo.$Fn(this._onClickWrapper,this),this.wfOnFocusInput=jindo.$Fn(this._onFocusInput,this),this.wfOnBlurInput=jindo.$Fn(this._onBlurInput,this),this.activate(),this.paint()},_assignHTMLElements:function(){var t=this._elWrapper;this._elInput=jindo.$$.getSingle("input",t),"radio"==this._elInput.type&&(this.sTagName="input[type=radio]",this.option("sClassPrefix","radio-"));var e=this.option("sClassPrefix");this._elSubstitute=jindo.$$.getSingle("."+e+"mark",t),this._welSubstitute=jindo.$Element(this._elSubstitute)},getInput:function(){return this._elInput},getChecked:function(){return this.getInput().checked},setChecked:function(t){return this.getInput().checked=t,this.paint(),this},enable:function(){return this.getInput().disabled=!1,this.paint(),this},disable:function(){return this.getInput().disabled=!0,this.paint(),this},_onClickInput:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT);var e=this;setTimeout((function(){e._welWrapper.fireEvent("click")}),1)},_onClickWrapper:function(t){var e=this._elInput;if(!e.disabled&&t.element!==e&&(e.focus(),this.fireEvent("beforeChange",{bChecked:e.checked})))switch(e.type){case"checkbox":e.checked=!e.checked,this.paint();break;case"radio":e.checked=!0;var i=this;jindo.$A(this.constructor.getInstance()).forEach((function(t){t.getInput().name==i.getInput().name&&t.paint()}))}},_onFocusInput:function(t){this._welWrapper.addClass(this.option("sClassPrefix")+"focused")},_onBlurInput:function(t){this._welWrapper.removeClass(this.option("sClassPrefix")+"focused")},_onActivate:function(){this._welWrapper.addClass(this.option("sClassPrefix")+"applied"),this.wfOnClickInput.attach(this._elInput,"click"),this.wfOnClickWrapper.attach(this._elWrapper,"click"),this.wfOnFocusInput.attach(this._elInput,"focus"),this.wfOnBlurInput.attach(this._elInput,"blur")},_onDeactivate:function(){this._welWrapper.removeClass(this.option("sClassPrefix")+"applied"),this.wfOnClickInput.detach(this._elInput,"click"),this.wfOnClickWrapper.detach(this._elWrapper,"click"),this.wfOnFocusInput.detach(this._elInput,"focus"),this.wfOnBlurInput.detach(this._elInput,"blur")},_onPaint:function(){var t=this.option("sClassPrefix");this._elInput.disabled?this._welWrapper.addClass(t+"disabled"):this._welWrapper.removeClass(t+"disabled"),this._elInput.checked?this._welSubstitute.addClass(t+"checked"):this._welSubstitute.removeClass(t+"checked"),this.fireEvent("change",{bChecked:this._elInput.checked})}}).extend(jindo.HTMLComponent),jindo.SelectBox=jindo.$Class({sTagName:"select",_bDisabled:!1,_sPrevValue:null,_nSelectedIndex:0,_bRealFocused:!1,$init:function(t,e){this._aItemData=[],this._aListItem=[],this._aOptions=[],this.option({sClassPrefix:"selectbox-",nWidth:null,nHeight:null,bUseLayerPosition:!0,aOptionHTML:[],aOptionLabel:[],LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0},LayerManager:{sCheckEvent:"mousedown",nShowDelay:20,nHideDelay:0}}),this.option(e||{}),this._el=jindo.$(t),this._assignHTMLElements(),this.option("bUseLayerPosition")&&this._initLayerPosition(),this._initLayerManager(),this._initRolloverClick(),this._oTimer=new jindo.Timer,this._wfOnFocusSelect=jindo.$Fn(this._onFocusSelect,this),this._wfOnBlurSelect=jindo.$Fn(this._onBlurSelect,this),this._wfOnMouseDownBox=jindo.$Fn(this._onMouseDownBox,this),this._wfOnMouseDownList=jindo.$Fn(this._onMouseDownList,this),this._wfOnKeyDown=jindo.$Fn(this._onKeyDown,this),this._wfOnMouseWheel=jindo.$Fn((function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this._elLayer.scrollTop-=16*t.mouse().delta}),this),this._oAgent=jindo.$Agent(),this.activate()},_assignHTMLElements:function(){var t=this.option("sClassPrefix"),e=this._el;this._wel=jindo.$Element(e),this._elSelect=jindo.$$.getSingle("select."+t+"source",e),this._sSelectInnerHTML=this._elSelect.innerHTML,this._elOptionDefault=jindo.$$.getSingle("option."+t+"default",e),this._elSelectOptionGroup=jindo.$$.getSingle("select."+t+"source-option-group",e),this._elBox=jindo.$$.getSingle("."+t+"box",e),this._elLabel=jindo.$$.getSingle("."+t+"label",e),this._elLayer=jindo.$$.getSingle("."+t+"layer",e),this._elList=jindo.$$.getSingle("."+t+"list",e),this._elList.innerHTML="",this._elSelectList=jindo.$("<ul>"),this._elList.insertBefore(this._elSelectList,this._elList.firstChild)},getSelectElement:function(){return this._elSelect},getBoxElement:function(){return this._elBox},getLabelElement:function(){return this._elLabel},getLayerElement:function(){return this._elLayer},getListElement:function(){return this._elList},getSelectListElement:function(){return this._elSelectList},_limitWidth:function(){var t=this.option("nWidth");t&&(jindo.$Element(this.getBoxElement()).css({width:t+"px",overflowX:"hidden"}),jindo.$Element(this.getLayerElement()).css({width:t+"px",overflowX:"hidden"}))},_limitHeight:function(){var t=this.option("nHeight");if(t){var e,i=jindo.$Element(this.getLayerElement()),n=i.$value().cloneNode(!0),s=jindo.$Element(n);s.opacity(0),i.after(s),s.show(),e=s.height(),s.leave(),t<e&&i.css({height:t+"px",overflowX:"hidden"})}},_initLayerManager:function(){var t=this,e=this.option("sClassPrefix"),i=this.getSelectElement();this._oLayerManager=new jindo.LayerManager(this.getLayerElement(),this.option("LayerManager")).attach({beforeShow:function(n){t.fireEvent("open")?(t._limitWidth(),t._limitHeight(),setTimeout((function(){i.focus()}),10),t._wel.addClass(e+"open"),t.option("bUseLayerPosition")&&t.getLayerPosition().setPosition()):n.stop()},show:function(e){t._paintSelected()},beforeHide:function(n){t.fireEvent("close")?(t._wel.removeClass(e+"open").removeClass(e+"focused"),setTimeout((function(){t.getSelectElement().blur()}),10)):(n.stop(),setTimeout((function(){i.focus()}),10))}}).link(this.getBoxElement()).link(this.getLayerElement())},getLayerManager:function(){return this._oLayerManager},_initRolloverClick:function(){var t=this,e=this.option("sClassPrefix");this._oRolloverClick=new jindo.RolloverClick(this.getSelectListElement(),{sCheckEvent:"mouseup",RolloverArea:{sClassName:e+"item",sClassPrefix:e+"item-"}}).attach({over:function(i){t._welOvered&&t._welOvered.removeClass(e+"item-over");var n=jindo.$Element(i.element);n.addClass(e+"item-over"),t._welOvered=n},out:function(t){t.stop()},click:function(i){var n=t._nSelectedIndex;jindo.$A(t._aItemData).forEach((function(e){e.elItem===i.element&&(t.setValue(e.sValue),jindo.$A.Break())}));var s=t.getSelectedIndex();n!=s&&(jindo.$Element(t.getSelectElement()).fireEvent("change"),t.fireEvent("change",{nIndex:n,nLastIndex:s})),jindo.$Element(i.element).hasClass(e+"notclose")||t.getLayerManager().hide()}})},getRolloverClick:function(){return this._oRolloverClick},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(this.getBoxElement(),this.getLayerElement(),this.option("LayerPosition"))},getLayerPosition:function(){return this._oLayerPosition},_onActivate:function(){var t=this.option("sClassPrefix"),e=this.getSelectElement();this._limitWidth(),this._wel.removeClass(t+"noscript"),this._wfOnFocusSelect.attach(e,"focus"),this._wfOnBlurSelect.attach(e,"blur"),this._wfOnMouseDownBox.attach(this.getBoxElement(),"mousedown"),this._wfOnMouseDownList.attach(this.getListElement(),"mousedown"),this._wfOnKeyDown.attach(e,"keydown"),this._wfOnMouseWheel.attach(e,"mousewheel"),this.paint(),this._sPrevValue=this.getValue()},_onDeactivate:function(){this.getLayerManager().hide();var t=this.option("sClassPrefix"),e=this.getSelectElement();this._wel.addClass(t+"noscript"),this._wfOnFocusSelect.detach(e,"focus"),this._wfOnBlurSelect.detach(e,"blur"),this._wfOnMouseDownBox.detach(this.getBoxElement(),"mousedown"),this._wfOnMouseDownList.detach(this.getListElement(),"mousedown"),this._wfOnKeyDown.detach(e,"keydown"),this._wfOnMouseWheel.detach(e,"mousewheel")},getValueOf:function(t){for(var e,i=0;e=this._aItemData[i];i++)if(e.sText==t)return e.sValue;return null},getValue:function(){return this.getSelectElement().value},getText:function(){return this._aItemData[this._nSelectedIndex].sText},getHTML:function(){return this.getLabelElement().innerHTML},setValue:function(t){this.getSelectElement().value=t,this._sPrevValue=this.getValue(),this._paint()},getSelectedIndex:function(t){return this.getSelectElement().selectedIndex},setSelectedIndex:function(t,e){if(void 0===e&&(e=!0),this._isSelectable(t)){var i=this.getSelectedIndex();return this._setSelectedIndex(t),this._paint(),e&&i!=t&&this.fireEvent("change",{nIndex:t,nLastIndex:i}),!0}return!1},_setSelectedIndex:function(t){this.getSelectElement().selectedIndex=t},_isSelectable:function(t){var e=this._aItemData[t];return!(!e||e.bDisabled||e.bDefault)},getOptions:function(){return this._aOptions},getListItems:function(){return this._aListItem},getDisabled:function(){return this._bDisabled},setOptionGroup:function(t){if(!this._elSelectOptionGroup||!this._elOptionDefault)return!1;var e=this.getSelectElement(),i=this.option("sClassPrefix"),n=jindo.$$("."+i+"option-group-"+t,this._elSelectOptionGroup),s=this._elOptionDefault=this._elOptionDefault.cloneNode(!0);e.innerHTML="",e.appendChild(s),this._nSelectedIndex=0;for(var o=0;o<n.length;o++)e.appendChild(n[o].cloneNode(!0));return this._sPrevValue=this.getValue(),this.paint(),!0},isSelected:function(){return!this._aItemData[this.getSelectedIndex()].bDefault},setDefault:function(){var t=-1;jindo.$A(this._aItemData).forEach((function(e,i){(e.bDefault||e.bSelected)&&(t=i)})),t<0&&(t=0),this._nSelectedIndex=t,this._setSelectedIndex(t),this._sPrevValue=this.getValue(),this._paint()},paint:function(){this._paintList(),this._paintSelected(),this._paintLabel(),this.getLayerManager().setLayer(this.getLayerElement())},_paint:function(){this._paintSelected(),this._paintLabel()},_paintLabel:function(){var t=jindo.$Element(this.getLabelElement()),e=this.option("aOptionHTML")[this._nSelectedIndex]||"",i=this.option("aOptionLabel")[this._nSelectedIndex]||"",n=this.getText();e?i?t.html(i):t.html(e):t.text(n),t.attr("unselectable","on")},_paintList:function(){var t=this.option("sClassPrefix");this._aOptions=jindo.$$("option",this.getSelectElement());var e=this._aOptions;this._aItemData=[],this._aListItem=[],this._nSelectedIndex=0;var i=this.getSelectListElement();i.innerHTML="",this.option("nHeight")&&jindo.$Element(this.getLayerElement()).css("height","auto");for(var n,s=0;n=e[s];s++){var o=jindo.$Element(n),a=o.hasClass(t+"default"),h="selected"==o.attr("selected"),l=a||n.disabled,r=this.option("aOptionHTML")[s]||"",c=o.text()||"",u=o.attr("value");u||(o.attr("value",c),u=c),this._aItemData[s]={elOption:n,elItem:null,sHTML:r,sText:c,sValue:u,bDisabled:l,bSelected:h,bDefault:a};var d=null,f=this._aItemData[s];if(!f.bDefault){(d=jindo.$("<li>")).style.cssText=f.elOption.style.cssText,d.className=f.elOption.className;var _=jindo.$Element(d);f.sHTML?_.html(f.sHTML):_.text(f.sText),_.attr("unselectable","on"),f.bDisabled?_.addClass(t+"item-disabled"):_.addClass(t+"item"),i.appendChild(d),this._aListItem.push(d),this._aItemData[s].elItem=d}}0!==this._aListItem.length?this.enable():this.disable()},_paintSelected:function(){var t,e=this.option("sClassPrefix"),i=this.getSelectedIndex(),n=this._nSelectedIndex;if(this._welSelected&&(this._welSelected.removeClass(e+"item-selected"),this._welSelected=null),this._welOvered&&(this._welOvered.removeClass(e+"item-over"),this._welOvered=null),this._nSelectedIndex=i,(t=this._aItemData[i]).elItem){var s=t.elItem,o=jindo.$Element(s);if(this._welSelected=this._welOvered=o,o.addClass(e+"item-selected").addClass(e+"item-over"),this.isLayerOpened()){var a,h=this.getLayerElement(),l=parseInt(jindo.$Element(h).css("height"),10),r=s.offsetTop,c=s.offsetHeight,u=h.scrollTop;a=n<i,(r<u||r>u+l)&&(h.scrollTop=r),a?r+c>l+u&&(h.scrollTop=r+c-l):r<u&&(h.scrollTop=r)}}},isLayerOpened:function(){return this.getLayerManager().getVisible()},disable:function(){this.getLayerManager().hide();var t=this.option("sClassPrefix");this._wel.addClass(t+"disabled"),this.getSelectElement().disabled=!0,this._bDisabled=!0},enable:function(){var t=this.option("sClassPrefix");this._wel.removeClass(t+"disabled"),this.getSelectElement().disabled=!1,this._bDisabled=!1},open:function(){return this._bDisabled||this.getLayerManager().show(),this},close:function(){return this.getLayerManager().hide(),this},_onMouseDownBox:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this._bDisabled||this.getLayerManager().toggle()},_onMouseDownList:function(t){jindo.$$.getSingle("! ."+this.option("sClassPrefix")+"notclose",t.element)||t.stop(jindo.$Event.CANCEL_DEFAULT)},_getSelectableIndex:function(t,e,i){var n,s=-1,o=this._aItemData.length-1;for(n=0;n<this._aItemData.length;n++)this._isSelectable(n)&&(s<0?s=n:o=n);switch(e){case-1:if(t==s)return t;for(n=t-1;n>s;n--)if(this._isSelectable(n))return n;return s;case 1:if(t==o)return t;for(n=t+1;n<o;n++)if(this._isSelectable(n))return n;return o;case 1/0:return o;case-1/0:return s}},_onKeyDown:function(t){var e=t.key();if(this._oAgent.os().mac&&this._oAgent.navigator().safari||this._oAgent.navigator().ie&&6==this._oAgent.navigator().version){var i=e.keyCode;9!=i&&t.stop(jindo.$Event.CANCEL_DEFAULT);var n=this.getSelectedIndex(),s=n;switch(i){case 37:case 38:s=this._getSelectableIndex(n,-1);break;case 39:case 40:s=this._getSelectableIndex(n,1);break;case 33:s=this._getSelectableIndex(n,-1/0);break;case 34:s=this._getSelectableIndex(n,1/0);break;case 13:this.getLayerManager().hide()}var o={nIndex:s,nLastIndex:parseInt(this._nSelectedIndex,10)};this._setSelectedIndex(s),this._paint(),o.nIndex!=o.nLastIndex&&this.fireEvent("change",o)}else this.isLayerOpened()&&(e.enter||9==e.keyCode)&&this.getLayerManager().hide()},_onFocusSelect:function(t){var e=this.option("sClassPrefix"),i=this._wel;if(!this.isLayerOpened()){if(!this.fireEvent("focus"))return void this.getSelectElement().blur();this._bRealFocused=!0}if(i.addClass(e+"focused"),!this._oAgent.os().mac||!this._oAgent.navigator().safari){var n=this;this._oTimer.start((function(){var t=n.getValue();if(n._sPrevValue&&n._sPrevValue!=t){var e=n.getSelectElement().selectedIndex;if(!n._isSelectable(e)){var i=-(n._nSelectedIndex-e);return i=i>0?1:-1,n._setSelectedIndex(n._getSelectableIndex(n._nSelectedIndex,i,e)),!0}var s={nIndex:e,nLastIndex:parseInt(n._nSelectedIndex,10)};n._paint(),s.nIndex!=s.nLastIndex&&n.fireEvent("change",s),n._sPrevValue=t}return!0}),10)}},_onBlurSelect:function(t){var e=this,i=this.option("sClassPrefix");this._bRealFocused&&(this.fireEvent("blur"),this._wel.removeClass(i+"focused"),this._bRealFocused=!1),setTimeout((function(){e._oTimer.abort()}),10)}}).extend(jindo.HTMLComponent)}}]);